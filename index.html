<!DOCTYPE html>
<html lang="zh-Hant">
<meta charset="UTF-8">
<title>Colors</title>

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-342D6M2MKX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-342D6M2MKX');
  </script>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=0" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js?1"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
<link href="https://erichsia7.github.io/colors/c2_512.png" sizes="512x512" rel="apple-touch-icon-precomposed" />
<meta property="og:image" content="https://erichsia7.github.io/colors/og/colors_og_image_v1.jpeg" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff" p="light">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1a1a1a" p="dark">
<link type="image/x-icon" href="https://erichsia7.github.io/colors/c2_ico.ico" rel="icon" />
<link type="image/x-icon" href="https://erichsia7.github.io/colors/c2_ico.ico" rel="bookmark" />
<link type="image/x-icon" href="https://erichsia7.github.io/colors/c2_ico.ico" rel="shortcut icon" />
<link rel="manifest" href="https://erichsia7.github.io/colors/manifest.json?20220209_198de2381adfe">
<style>
  :root {
    --fx-bth: calc(55px + env(safe-area-inset-bottom));
    --bottom-icon-color: #000000;
    --qrcode-color-fff: #fff;
    --qrcode-color-1a1a1a: #1a1a1a
  }

  * {
    -webkit-appearance: none;
    outline: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  }

  body {
    margin: 0px;
    padding: 0px;
    background: #fff;
  }

  .bottom {
    height: calc(55px + env(safe-area-inset-bottom));
    width: 100%;
    position: fixed;
    left: 0;
    bottom: 0;
    background: #ffffff;
    box-shadow: 0 0 10px 2px rgba(0, 0, 0, 0.045);
    background-size: var(--b-size);
    background-repeat: repeat;
    -webkit-user-select: none;
    user-select: none;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-gap: 0px;
  }

  .bottom-btn {
    height: 55px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .bottom-btn svg {
    width: 25px;
    height: 25px;
  }

  .container {
    position: fixed;
    top: 0px;
    left: 0px;
    width: 100%;
    height: var(--ft-window-height);
    overflow: hidden;
    -webkit-user-select: none;
    user-select: none;
  }

  .box {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    will-change: transform;
    -webkit-user-select: none;
    user-select: none;
  }

  .color {
    position: relative;
    width: var(--ft-window-width);
    height: var(--ft-window-height);
    background: #888;
    overflow: hidden;
    -webkit-user-select: none;
    user-select: none;
  }

  .colorbox {
    position: absolute;
    height: 100%;
    width: calc(var(--ft-window-width) * 11);
    top: 0px;
    left: 0px;
    -webkit-user-select: none;
    user-select: none;
  }

  .colorcontent {
    position: absolute;
    top: 0px;
    left: calc(var(--ft-window-width) * var(--dx-li-f));
    width: var(--ft-window-width);
    height: 100%;
    -webkit-user-select: none;
    user-select: none;
  }

  .colorcontent-text {
    font-size: 25px;
    font-family: "Noto Sans TC", sans-serif;
    -webkit-user-select: none;
    user-select: none;
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .colorcontent-image {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    -webkit-user-select: none;
    user-select: none;
  }

  .colorcontentpathsvg {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    -webkit-user-select: none;
    user-select: none;
  }

  .colorcontent-image-blur-mask {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    -webkit-backdrop-filter: blur(15px);
    backdrop-filter: blur(15px);
    display: none;
    -webkit-user-select: none;
    user-select: none;
  }

  .rightbar {
    width: 55px;
    height: calc(55px * 3);
    position: absolute;
    bottom: 10px;
    right: 10px;
    -webkit-user-select: none;
    user-select: none;
  }

  .favorite {
    background: url(https://erichsia7.github.io/colors/favorite.png);
  }

  .share {
    background: url(https://erichsia7.github.io/colors/share4.png);
  }

  .options {
    background: url(https://erichsia7.github.io/colors/more.png);
  }

  .favorite,
  .share,
  .options {
    width: 55px;
    height: 55px;
    background-size: 35px;
    background-position: center;
    background-repeat: no-repeat;
    -webkit-user-select: none;
    user-select: none;
  }

  .rightbar[txtcolor="#ffffff"] .favorite,
  .rightbar[txtcolor="#ffffff"] .share,
  .rightbar[txtcolor="#ffffff"] .options {
    filter: invert(100%);
  }


  .arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 55px;
    height: 55px;
    background: url(https://erichsia7.github.io/colors/arrow-right.png);
    background-size: 35px;
    background-position: center;
    background-repeat: no-repeat;
    display: none;
    -webkit-user-select: none;
    user-select: none;
  }

  .arrow-left {
    left: 10px;
    transform: translateY(-50%) rotate(180deg);
  }

  .arrow-right {
    right: 10px;
  }

  .arrow[txtcolor="#ffffff"] {
    filter: invert(100%);
  }

  .color[group="true"] .arrow {
    display: block;
  }

  .optionlist {
    position: fixed;
    bottom: var(--ot-bottom);
    left: var(--ot-left);
    width: 100%;
    height: calc(var(--b-bottom-height) + (50px * var(--b-option-list)));
    border-radius: 15px 15px 0px 0px;
    background: #fff;
    transform: translateY(calc(var(--b-bottom-height) + (50px * var(--b-option-list)) + var(--ot-d-translateY))) translateX(var(--ot-translateX-offset));
    opacity: 0;
    display: none;
    -webkit-user-select: none;
    user-select: none;
    overflow: hidden;
  }

  .optionlist-mask,
  .qrcode-mask,
  .toimage-mask {
    position: fixed;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    opacity: 0;
    display: none;
    -webkit-user-select: none;
    user-select: none;
  }

  .optionlist li {
    list-style: none;
    padding: 0px;
    margin: 0px;
    height: 49px;
    width: calc(100% - 10px);
    padding-left: 10px;
    display: flex;
    align-items: center;
    font-size: 18px;
    border-bottom: 1px solid #f5f5f5;
    -webkit-user-select: none;
    user-select: none;
  }

  .group-progress-bar {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    padding-right: 3px;
    -webkit-user-select: none;
    user-select: none;
  }

  .group-progress-bar[txtcolor="#ffffff"] {
    filter: invert(100%);
  }

  .group-progress-bar li {
    list-style: none;
    padding: 0px;
    margin: 0px;
    margin-left: 3px;
    height: 8px;
    width: 8px;
    border-radius: 99em;
    background: #000;
    opacity: 0.5;
    float: left;
    transition: 0.3s;
    -webkit-user-select: none;
    user-select: none;
  }

  .group-progress-bar li[sl="1"] {
    opacity: 1;
  }

  .qrcodebox,
  .toimagebox {
    position: fixed;
    bottom: var(--ot-bottom);
    left: var(--ot-left);
    height: calc(55px + 300px);
    width: 100%;
    background: #fff;
    opacity: 0;
    display: none;
    border-radius: 15px 15px 0px 0px;
    transform: translateY(calc(55px + 300px + var(--ot-d-translateY))) translateX(var(--ot-translateX-offset));
    overflow: hidden;
  }

  .toimagebox {
    height: calc(55px + 195px);
    transform: translateY(55px + 195px);
  }

  .qrcodebx {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .qrcodebx img {
    max-height: 250px;
    max-width: 250px;
  }

  .toimagebox .toimagebox-title {
    position: absolute;
    top: 0px;
    left: 10px;
    width: calc(100% - 20px);
    height: 50px;
    font-size: 18px;
    display: flex;
    align-items: center;
    font-family: "Noto Sans TC", sans-serif;
    -webkit-user-select: none;
    user-select: none;
  }

  .toimagebox .toimagebox-title[g="2"] {
    top: calc(45px + 5px + 45px + 5px + 45px);
  }

  .toimagebox input {
    position: absolute;
    border: 1px solid #e3e3e3;
    border-radius: 15px;
    -webkit-appearance: none;
    background: rgba(0, 0, 0, 0);
    font-size: 18px;
    width: calc(100% - 20px);
    left: 10px;
    box-sizing: border-box;
    padding: 5px;
    height: 45px;
  }

  #toimageboxwidth {
    top: calc(45px + 5px);
  }

  #toimageboxheight {
    top: calc(45px + 5px + 45px + 5px);
  }

  #toimageboxscale {
    top: calc(45px + 5px + 45px + 5px + 45px + 45px);
  }

  .toimage-download {
    position: absolute;
    left: 10px;
    top: calc(45px + 5px + 45px + 5px + 45px + 45px + 45px + 5px);
    background: #e3e3e3;
    border-radius: 15px;
    width: calc(100% - 20px);
    height: 45px;
    font-size: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: "Noto Sans TC", sans-serif;
    user-select: none;
    -webkit-user-select: none;
  }

  .promptcenter {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #000;
    font-size: 15px;
    font-family: "Noto Sans TC", sans-serif;
    -webkit-user-select: none;
    user-select: none;
  }

  .promptcenter * {
    color: #000;
    font-size: 15px;
    font-family: "Noto Sans TC", sans-serif;
    -webkit-user-select: none;
    user-select: none;
  }

  .prompt {
    width: clamp(180px, 90%, 350px);
    height: 60px;
    border-radius: 15px;
    position: fixed;
    left: 50%;
    bottom: 0px;
    opacity: 0;
    transform: translateX(-50%) translateY(150px);
    background: #f5f5f5;
    box-shadow: 0 0 15px 2px rgba(0, 0, 0, 0.08);
    will-change: transform, opacity;
    -webkit-user-select: none;
    user-select: none;
  }

  #toimagecanvas {
    display: none;
  }

  @media screen and (min-width: 650px) {

    .optionlist,
    .qrcodebox,
    .toimagebox {
      width: clamp(350px, 55%, 450px);
      border-radius: 15px;
    }
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --bottom-icon-color: #ffffff;
      --qrcode-color-fff: #1a1a1a;
      --qrcode-color-1a1a1a: #fff;
    }

    .prompt {
      background: #1f1f1f;

    }

    .promptcenter,
    .promptcenter * {
      color: #fff;
    }

    body {
      background: #1a1a1a;
    }

    .bottom,
    .optionlist,
    .qrcodebox,
    .toimagebox {
      background: #1a1a1a;
    }

    .toimagebox input {
      border: 1px solid #1f1f1f;
      color: #fff;
    }

    .toimagebox-title {
      color: #fff;
    }

    .toimage-download {
      background: #1f1f1f;
      color: #fff;
    }

    .optionlist li {
      border-bottom: 1px solid #1f1f1f;
      color: #fff;
    }
  }
</style>
<style id="iphonesafearea">
  :root {
    --fx-bth: calc(55px + 24px)
  }

  @media only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) {
    .bottom {
      height: var(--fx-bth);
    }
  }

  @media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {
    .bottom {
      height: var(--fx-bth);
    }
  }

  @media only screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) {
    .bottom {
      height: var(--fx-bth);
    }
  }

  @media only screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) {
    .bottom {
      height: var(--fx-bth);
    }
  }
</style>
<style id="bottom-icon">
  :root {
    --bottom-icon-home: var(--bottom-icon-color);
    --bottom-icon-favorite: rgba(0, 0, 0, 0);
    --bottom-icon-plus-a: rgba(0, 0, 0, 0);
    --bottom-icon-plus-b: var(--bottom-icon-color);
    --bottom-icon-trend: rgba(0, 0, 0, 0);
    --bottom-icon-more: rgba(0, 0, 0, 0);
  }
</style>
<style id="ft">
</style>
<style id="optlistcss">
  :root {
    --ot-bottom-height: 0px;
    --ot-translateY-offset: 0px;
    --ot-translateX-offset: 0px;
    --ot-bottom: 0px;
    --ot-left: 0px;
    --ot-d-translateY: 0px
  }

  @media screen and (min-width: 650px) {
    :root {
      --ot-bottom-height: -55px;
      --ot-translateY-offset: 50%;
      --ot-translateX-offset: -50%;
      --ot-bottom: 50%;
      --ot-left: 50%;
      --ot-d-translateY: 50vh;
    }
  }
</style>

<body>
  <canvas id="toimagecanvas"></canvas>
  <div class="container">
    <div class="box" dy="0" fy="0"></div>
  </div>
  <div class="bottom">
    <div class="bottom-btn" u="home">
      <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M256.219 46.8125C247.137 46.8125 239.182 50.8395 233.688 55.6875C233.827 55.564 233.951 55.4325 234.094 55.3125C196.023 87.2578 119.883 151.148 81.8125 183.094C76.7071 187.378 73.75 193.71 73.75 200.375C73.75 256.539 73.75 368.867 73.75 425.031C73.75 435.775 76.7738 447.787 85.6875 456.875C94.6005 465.963 106.651 469.25 117.531 469.25L393.156 469.25C403.973 469.25 416.136 466.002 425.062 456.719C433.801 447.631 436.75 435.746 436.75 425.031C436.75 368.469 436.75 255.344 436.75 198.781C436.75 192.118 433.792 185.784 428.688 181.5C391.102 149.953 315.93 86.8594 278.344 55.3125C278.486 55.4319 278.611 55.5646 278.75 55.6875C273.278 50.8596 265.318 46.8125 256.219 46.8125Z" fill="var(--bottom-icon-home)" fill-rule="evenodd" opacity="1" stroke="none" />
        <path d="M256.219 30.7812C246.995 30.7812 238.383 34.1541 230.375 40.875L6.875 228.531C2.2991 232.249 0 236.923 0 242.5C0 246.933 1.64857 250.903 4.9375 254.406C8.22643 257.91 12.7176 259.656 18.4375 259.656C21.4404 259.656 24.2163 258.93 26.7188 257.5C29.2212 256.07 31.5871 254.497 33.875 252.781L61.7812 229.375L61.7812 433.812C61.7812 448.827 66.0229 460.487 74.5312 468.781C83.0396 477.075 94.9493 481.219 110.25 481.219L400.469 481.219C415.769 481.219 427.626 477.075 436.062 468.781C444.499 460.487 448.719 448.827 448.719 433.812L448.719 227.75L478.531 252.781C480.676 254.497 482.998 256.07 485.5 257.5C488.002 258.93 490.778 259.656 493.781 259.656C498.786 259.656 503.05 258.181 506.625 255.25C510.2 252.319 512 248.273 512 243.125C512 237.119 509.777 232.249 505.344 228.531L282.062 40.875C274.055 34.1542 265.442 30.7813 256.219 30.7812ZM256.219 69.375C258.864 69.375 261.413 70.4488 263.844 72.5938L414.188 198.781L414.188 425.031C414.188 432.038 412.387 437.376 408.812 441.094C405.238 444.812 400.02 446.688 393.156 446.688L117.531 446.688C110.667 446.688 105.428 444.812 101.781 441.094C98.1348 437.376 96.3125 432.038 96.3125 425.031L96.3125 200.375L248.594 72.5938C251.025 70.4488 253.573 69.375 256.219 69.375Z" fill="var(--bottom-icon-color)" fill-rule="evenodd" opacity="1" stroke="none" />
      </svg>
    </div>
    <div class="bottom-btn" u="favorite">
      <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M145.656 37.8125C122.015 37.8125 99.7275 43.6356 80.2188 55.4688C60.8707 67.2045 45.4898 83.902 34.6875 104.375C23.6548 125.285 18.4687 149.189 18.4688 175.062C18.4688 202.699 25.1963 230.307 37.9375 257.406C50.4044 283.922 67.1885 309.602 88.0625 334.469C108.694 359.047 131.975 382.432 157.875 404.594C183.584 426.592 210.345 446.785 238.125 465.188C237.751 464.94 237.39 464.675 237.031 464.406C238.789 465.725 240.353 466.868 242.344 468.062C243.362 468.673 244.479 469.317 246.219 470.062C247.87 470.77 250.37 472.125 256 472.125C261.607 472.125 263.974 470.832 265.531 470.188C267.204 469.495 268.277 468.887 269.281 468.312C271.041 467.307 272.529 466.304 274.125 465.188C274.232 465.117 274.332 465.041 274.438 464.969C302.104 446.623 328.764 426.508 354.375 404.594C380.285 382.424 403.538 359.033 424.094 334.438C444.872 309.576 461.605 283.901 474.062 257.406C486.802 230.312 493.531 202.7 493.531 175.062C493.531 149.195 488.346 125.286 477.312 104.375C466.516 83.9129 451.138 67.2098 431.781 55.4688C412.28 43.6404 389.998 37.8125 366.344 37.8125C347.495 37.8125 329.929 41.1708 314.469 48.8438C300.707 55.6735 288.469 64.4818 278.188 75.1875C269.722 84.002 262.403 92.8568 256.031 101.812C249.927 92.6671 242.815 83.757 234.469 75.0625C224.168 64.3325 211.769 55.5876 197.75 48.7812C182.149 41.2069 164.516 37.8125 145.656 37.8125Z" fill="var(--bottom-icon-favorite)" fill-rule="evenodd" opacity="1" stroke="none" />
        <path d="M0 175.049C0 211.658 9.66767 247.879 29.003 283.714C48.3384 319.549 75.7946 354.438 111.372 388.383C146.949 422.327 188.971 454.767 237.438 485.704C240.188 487.423 243.325 489.012 246.848 490.473C250.371 491.934 253.422 492.665 256 492.665C258.75 492.665 261.887 491.934 265.41 490.473C268.933 489.012 272.07 487.423 274.82 485.704C323.287 454.767 365.266 422.327 400.757 388.383C436.248 354.438 463.662 319.549 482.997 283.714C502.332 247.879 512 211.658 512 175.049C512 152.191 508.348 131.266 501.043 112.274C493.739 93.2823 483.513 76.8258 470.365 62.9043C457.217 48.9829 441.748 38.241 423.96 30.6788C406.171 23.1165 386.793 19.3353 365.825 19.3353C341.935 19.3353 320.58 24.5774 301.76 35.0614C282.941 45.5455 267.687 59.4669 256 76.8258C244.485 59.4669 229.274 45.5455 210.369 35.0614C191.463 24.5774 170.065 19.3353 146.175 19.3353C125.379 19.3353 106.087 23.1165 88.2981 30.6788C70.5096 38.241 54.9983 48.9829 41.7644 62.9043C28.5304 76.8258 18.2612 93.2823 10.9567 112.274C3.65223 131.266 0 152.191 0 175.049ZM41.5065 175.049C41.5065 152.191 46.0181 132.211 55.0413 115.11C64.0645 98.0087 76.4391 84.6888 92.1652 75.1501C107.891 65.6113 125.723 60.8419 145.66 60.8419C161.815 60.8419 175.823 63.7207 187.682 69.4783C199.541 75.236 209.595 82.4115 217.845 91.005C226.095 99.5985 232.969 108.192 238.469 116.785C242.079 121.942 245.129 125.422 247.621 127.227C250.113 129.031 252.906 129.934 256 129.934C259.094 129.934 261.844 128.988 264.25 127.098C266.656 125.207 269.75 121.77 273.531 116.785C279.374 108.364 286.464 99.8134 294.8 91.1339C303.135 82.4545 313.104 75.236 324.705 69.4783C336.306 63.7207 350.185 60.8419 366.34 60.8419C386.277 60.8419 404.109 65.6113 419.835 75.1501C435.561 84.6888 447.936 98.0087 456.959 115.11C465.982 132.211 470.493 152.191 470.493 175.049C470.493 198.939 464.736 223.13 453.221 247.621C441.705 272.113 426.108 296.132 406.429 319.678C386.75 343.224 364.407 365.696 339.4 387.094C314.393 408.491 288.397 428.128 261.414 446.002C258.492 448.064 256.687 449.096 256 449.096C255.313 449.096 253.594 448.064 250.844 446.002C223.86 428.128 197.865 408.491 172.858 387.094C147.851 365.696 125.465 343.224 105.7 319.678C85.9349 296.132 70.2947 272.113 58.7795 247.621C47.2642 223.13 41.5065 198.939 41.5065 175.049Z" fill="var(--bottom-icon-color)" fill-rule="evenodd" opacity="1" stroke="none" />
      </svg>
    </div>
    <div class="bottom-btn" u="option">
      <svg height="100%" stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="0 0 512 512" width="100%" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M255.75 18.5938C223.16 18.5938 192.13 24.6988 163.281 36.9688C134.756 49.1014 109.437 66.1893 87.8438 87.9688C66.2998 109.698 49.3276 135.062 37.2188 163.531C24.9498 192.377 18.8437 223.406 18.8438 256C18.8438 288.59 24.9488 319.62 37.2188 348.469C49.339 376.965 66.3687 402.306 88.0312 423.969C109.68 445.617 134.996 462.672 163.469 474.875C192.328 487.243 223.383 493.406 256 493.406C288.614 493.406 319.695 487.265 348.625 474.906C377.181 462.708 402.556 445.631 424.219 423.969C445.88 402.308 462.91 376.968 475.031 348.469C487.3 319.623 493.406 288.594 493.406 256C493.406 223.387 487.244 192.331 474.875 163.469C462.668 134.986 445.568 109.63 423.844 87.9062C402.109 66.1714 376.73 49.0952 348.219 36.9688C319.373 24.6998 288.344 18.5937 255.75 18.5938Z" fill="var(--bottom-icon-plus-a)" fill-rule="evenodd" opacity="1" stroke="none" />
        <path d="M255.75 0C220.78 0 187.871 6.70813 157 20.0938C126.129 33.4794 98.9148 51.9391 75.4062 75.5312C51.8978 99.1234 33.4794 126.379 20.0938 157.25C6.70813 188.121 1.27157e-06 221.03 0 256C0 290.97 6.70813 323.879 20.0938 354.75C33.4794 385.621 51.9391 412.876 75.5312 436.469C99.1234 460.061 126.379 478.521 157.25 491.906C188.121 505.292 221.03 512 256 512C290.97 512 323.879 505.292 354.75 491.906C385.621 478.521 412.876 460.061 436.469 436.469C460.061 412.877 478.521 385.621 491.906 354.75C505.292 323.879 512 290.97 512 256C512 221.03 505.292 188.121 491.906 157.25C478.521 126.379 460.061 99.1234 436.469 75.5312C412.877 51.9391 385.579 33.4794 354.625 20.0938C323.671 6.70813 290.72 1.27157e-06 255.75 0ZM255.75 42.6562C285.366 42.6562 313.045 48.1343 338.812 59.0938C364.58 70.0532 387.267 85.3298 406.844 104.906C426.42 124.483 441.738 147.17 452.781 172.938C463.824 198.705 469.344 226.384 469.344 256C469.344 285.616 463.866 313.295 452.906 339.062C441.947 364.83 426.712 387.476 407.219 406.969C387.726 426.462 365.038 441.738 339.188 452.781C313.337 463.824 285.616 469.344 256 469.344C226.384 469.344 198.705 463.824 172.938 452.781C147.17 441.738 124.524 426.462 105.031 406.969C85.5384 387.476 70.3032 364.83 59.3438 339.062C48.3843 313.295 42.9063 285.616 42.9062 256C42.9062 226.384 48.3843 198.705 59.3438 172.938C70.3032 147.17 85.4971 124.483 104.906 104.906C124.315 85.3298 146.92 70.0532 172.688 59.0938C198.455 48.1343 226.134 42.6563 255.75 42.6562Z" fill="var(--bottom-icon-color)" fill-rule="evenodd" opacity="1" stroke="none" />
        <path d="M255.5 139.031C249.309 139.031 244.327 141.047 240.562 145.062C236.798 149.078 234.906 154.267 234.906 160.625L234.906 235.156L160.375 235.156C153.85 235.156 148.62 237.13 144.688 241.062C140.755 244.995 138.781 250.142 138.781 256.5C138.781 262.524 140.797 267.464 144.812 271.312C148.828 275.161 154.017 277.094 160.375 277.094L234.906 277.094L234.906 351.875C234.906 358.233 236.798 363.38 240.562 367.312C244.327 371.245 249.309 373.219 255.5 373.219C261.858 373.219 267.006 371.245 270.938 367.312C274.87 363.38 276.844 358.233 276.844 351.875L276.844 277.094L351.625 277.094C357.816 277.094 362.922 275.161 366.938 271.312C370.953 267.464 372.969 262.524 372.969 256.5C372.969 250.142 370.995 244.994 367.062 241.062C363.13 237.13 357.983 235.156 351.625 235.156L276.844 235.156L276.844 160.625C276.844 154.267 274.87 149.078 270.938 145.062C267.005 141.047 261.858 139.031 255.5 139.031Z" fill="var(--bottom-icon-plus-b)" fill-rule="evenodd" opacity="1" stroke="none" />
        </g>
      </svg>
    </div>
    <div class="bottom-btn" u="trend">
      <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M415.281 93.7188C407.325 93.7188 401.047 95.1955 397.062 99.0938C393.044 103.025 391.531 109.337 391.531 117.281C391.531 186.695 391.531 325.523 391.531 394.938C391.531 402.772 393.064 408.994 397.062 412.906C401.053 416.81 407.336 418.281 415.281 418.281L459 418.281C467.08 418.281 473.412 416.814 477.406 412.906C481.403 408.996 482.969 402.774 482.969 394.938C482.969 325.523 482.969 186.695 482.969 117.281C482.969 109.314 481.411 103.012 477.406 99.0938C473.405 95.1799 467.068 93.7188 459 93.7188L415.281 93.7188ZM234.125 152.562C226.04 152.562 219.679 154.071 215.688 158.062C211.713 162.036 210.188 168.262 210.188 176.094C210.188 230.805 210.188 340.227 210.188 394.938C210.187 402.772 211.72 408.995 215.719 412.906C219.72 416.82 226.057 418.281 234.125 418.281L277.875 418.281C285.832 418.281 292.082 416.801 296.062 412.906C300.059 408.996 301.625 402.774 301.625 394.938C301.625 340.227 301.625 230.805 301.625 176.094C301.625 168.241 300.055 162.024 296.094 158.062C292.11 154.078 285.829 152.562 277.875 152.562L234.125 152.562ZM52.7812 211.188C44.8239 211.188 38.5748 212.668 34.5938 216.562C30.5826 220.486 29.0313 226.794 29.0312 234.75C29.0312 274.797 29.0312 354.891 29.0312 394.938C29.0312 402.784 30.6026 409.002 34.5938 412.906C38.5806 416.806 44.8342 418.281 52.7812 418.281L96.5312 418.281C104.611 418.281 110.943 416.814 114.938 412.906C118.942 408.989 120.469 402.762 120.469 394.938C120.469 354.891 120.469 274.797 120.469 234.75C120.469 226.794 118.95 220.488 114.938 216.562C110.937 212.649 104.599 211.188 96.5312 211.188L52.7812 211.188Z" fill="var(--bottom-icon-trend)" fill-rule="evenodd" opacity="1" stroke="none" />
        <path d="M409.844 66.2812C394.261 66.2812 382.461 70.0978 374.469 77.6875C366.476 85.2772 362.5 96.5268 362.5 111.438L362.5 400.781C362.5 415.692 366.476 426.915 374.469 434.438C382.461 441.96 394.261 445.719 409.844 445.719L464.25 445.719C479.967 445.719 491.846 441.96 499.906 434.438C507.966 426.915 512 415.692 512 400.781L512 111.438C512 96.5268 507.966 85.2772 499.906 77.6875C491.846 70.0978 479.967 66.2812 464.25 66.2812L409.844 66.2812ZM415.281 96.7188L459 96.7188C466.791 96.7188 472.223 98.2276 475.312 101.25C478.402 104.272 479.969 109.624 479.969 117.281L479.969 394.938C479.969 402.46 478.402 407.728 475.312 410.75C472.223 413.772 466.791 415.281 459 415.281L415.281 415.281C407.624 415.281 402.246 413.772 399.156 410.75C396.067 407.728 394.531 402.46 394.531 394.938L394.531 117.281C394.531 109.624 396.067 104.272 399.156 101.25C402.246 98.2276 407.624 96.7188 415.281 96.7188ZM228.688 125.125C212.971 125.125 201.118 128.91 193.125 136.5C185.132 144.09 181.156 155.339 181.156 170.25L181.156 400.781C181.156 415.692 185.132 426.915 193.125 434.438C201.118 441.96 212.971 445.719 228.688 445.719L283.094 445.719C298.81 445.719 310.664 441.96 318.656 434.438C326.649 426.915 330.656 415.692 330.656 400.781L330.656 170.25C330.656 155.339 326.649 144.09 318.656 136.5C310.664 128.91 298.81 125.125 283.094 125.125L228.688 125.125ZM234.125 155.562L277.875 155.562C285.532 155.562 290.879 157.098 293.969 160.188C297.058 163.277 298.625 168.571 298.625 176.094L298.625 394.938C298.625 402.46 297.058 407.728 293.969 410.75C290.879 413.772 285.532 415.281 277.875 415.281L234.125 415.281C226.334 415.281 220.902 413.772 217.812 410.75C214.723 407.728 213.187 402.46 213.188 394.938L213.188 176.094C213.188 168.571 214.723 163.277 217.812 160.188C220.902 157.098 226.334 155.562 234.125 155.562ZM47.5625 183.75C31.8459 183.75 19.9927 187.567 12 195.156C4.00735 202.746 1.90735e-06 213.996 0 228.906L0 400.781C0 415.692 4.00734 426.915 12 434.438C19.9927 441.96 31.8459 445.719 47.5625 445.719L101.75 445.719C117.467 445.719 129.346 441.96 137.406 434.438C145.466 426.915 149.5 415.692 149.5 400.781L149.5 228.906C149.5 213.996 145.466 202.746 137.406 195.156C129.346 187.567 117.467 183.75 101.75 183.75L47.5625 183.75ZM52.7812 214.188L96.5312 214.188C104.322 214.188 109.754 215.696 112.844 218.719C115.933 221.741 117.469 227.093 117.469 234.75L117.469 394.938C117.469 402.46 115.933 407.728 112.844 410.75C109.754 413.772 104.322 415.281 96.5312 415.281L52.7812 415.281C45.1244 415.281 39.7771 413.772 36.6875 410.75C33.5979 407.728 32.0313 402.46 32.0312 394.938L32.0312 234.75C32.0312 227.093 33.5979 221.741 36.6875 218.719C39.7771 215.696 45.1244 214.188 52.7812 214.188Z" fill="var(--bottom-icon-color)" fill-rule="evenodd" opacity="1" stroke="none" />
      </svg>
    </div>
    <div class="bottom-btn" u="more">
      <svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M78.7188 202.906C69.0794 202.906 60.0744 205.302 52 210.094C44.0119 214.834 37.5536 221.292 32.8125 229.281C28.0224 237.354 25.625 246.358 25.625 256C25.625 265.78 27.9981 274.851 32.8125 282.875C37.5568 290.782 44.0256 297.174 52 301.906C60.0723 306.696 69.0766 309.094 78.7188 309.094C88.6405 309.094 97.8279 306.719 105.938 301.906C113.908 297.176 120.371 290.788 125.188 282.906C130.091 274.882 132.531 265.803 132.531 256C132.531 241.453 127.226 228.701 116.875 218.438C106.518 208.168 93.5524 202.906 78.7188 202.906ZM256 202.906C246.361 202.906 237.356 205.302 229.281 210.094C221.284 214.839 214.851 221.305 210.188 229.312C205.487 237.383 203.156 246.378 203.156 256C203.156 265.76 205.495 274.791 210.219 282.812C214.886 290.738 221.298 297.169 229.281 301.906C237.354 306.696 246.358 309.094 256 309.094C265.78 309.094 274.851 306.721 282.875 301.906C290.767 297.171 297.17 290.768 301.906 282.875C306.719 274.853 309.094 265.783 309.094 256C309.094 241.458 303.825 228.7 293.562 218.438C283.309 208.184 270.555 202.906 256 202.906ZM433.281 202.906C423.501 202.906 414.379 205.273 406.219 210.062C398.143 214.803 391.651 221.286 386.906 229.281C382.116 237.354 379.719 246.358 379.719 256C379.719 265.78 382.092 274.851 386.906 282.875C391.654 290.787 398.156 297.205 406.219 301.938C414.377 306.726 423.498 309.094 433.281 309.094C442.921 309.094 451.926 306.698 460 301.906C467.973 297.175 474.442 290.784 479.188 282.875C484.001 274.853 486.375 265.783 486.375 256C486.375 241.458 481.106 228.7 470.844 218.438C460.591 208.184 447.836 202.906 433.281 202.906Z" fill="none" fill-rule="evenodd" opacity="1" stroke="var(--bottom-icon-more)" stroke-linecap="round" stroke-linejoin="round" stroke-width="12.2734" />
        <path d="M78.7188 208.281C69.9701 208.281 61.9875 210.424 54.75 214.719C47.5125 219.014 41.7323 224.794 37.4375 232.031C33.1427 239.269 31 247.251 31 256C31 264.908 33.1427 272.936 37.4375 280.094C41.7323 287.252 47.5125 292.986 54.75 297.281C61.9875 301.576 69.9701 303.719 78.7188 303.719C87.7856 303.719 95.95 301.576 103.188 297.281C110.425 292.986 116.219 287.252 120.594 280.094C124.968 272.936 127.156 264.908 127.156 256C127.156 242.797 122.479 231.555 113.094 222.25C103.709 212.945 92.2394 208.281 78.7188 208.281ZM256 208.281C247.251 208.281 239.269 210.424 232.031 214.719C224.794 219.014 219.059 224.794 214.844 232.031C210.628 239.269 208.531 247.251 208.531 256C208.531 264.908 210.628 272.936 214.844 280.094C219.059 287.252 224.794 292.986 232.031 297.281C239.269 301.576 247.251 303.719 256 303.719C264.908 303.719 272.936 301.576 280.094 297.281C287.252 292.986 292.986 287.252 297.281 280.094C301.576 272.936 303.719 264.908 303.719 256C303.719 242.797 299.055 231.555 289.75 222.25C280.445 212.945 269.203 208.281 256 208.281ZM433.281 208.281C424.374 208.281 416.255 210.424 408.938 214.719C401.62 219.014 395.826 224.794 391.531 232.031C387.236 239.269 385.094 247.251 385.094 256C385.094 264.908 387.236 272.936 391.531 280.094C395.826 287.252 401.62 292.986 408.938 297.281C416.255 301.576 424.374 303.719 433.281 303.719C442.03 303.719 450.012 301.576 457.25 297.281C464.488 292.986 470.268 287.252 474.562 280.094C478.857 272.936 481 264.908 481 256C481 242.797 476.337 231.555 467.031 222.25C457.726 212.945 446.484 208.281 433.281 208.281Z" fill="var(--bottom-icon-color)" fill-rule="evenodd" opacity="1" stroke="none" />
      </svg>
    </div>
  </div>
  <div class="optionlist-mask"></div>
  <div class="optionlist">
    <li h="copycolorcode" f="1">複製顏色代碼</li>
    <li h="copyoptions" f="1">複製選項</li>
    <li h="qrcode" f="1">二維碼</li>
    <li h="picker" f="1">顏色選擇器</li>
    <li h="llgrd" f="1">似色漸層</li>
    <li h="mixgrd" f="1">混合漸層</li>
    <li h="llpath" f="1">似色路徑</li>
    <li h="copysourceimageurl" f="1">複製圖片連結</li>
    <li h="dlsourceimage" f="1">下載圖片</li>
    <li h="toimg" f="1">下載顏色圖片</li>
    <li h="addallfav" f="1">將全部顏色新增至喜好項目</li>
    <li h="shareacolor" f="1">分享單個顏色</li>
    <li h="copy-hex" f="2">複製HEX</li>
    <li h="copy-rgb" f="2">複製RGB</li>
    <li h="copy-hsl" f="2">複製HSL</li>
    <li h="copy-hsv" f="2">複製HSV</li>
    <li h="copy-cmyk" f="2">複製CMYK</li>

  </div>

  <div class="qrcode-mask"></div>
  <div class="qrcodebox">
    <div class="qrcodebx"></div>
  </div>

  <div class="toimage-mask"></div>
  <div class="toimagebox">
    <div class="toimagebox-title" g="1">尺寸</div>
    <input type="text" placeholder="寬度" id="toimageboxwidth" inputmode="numeric">
    <input type="text" placeholder="高度" id="toimageboxheight" inputmode="numeric">
    <div class="toimagebox-title" g="2">縮放</div>
    <input type="text" placeholder="縮放" id="toimageboxscale" inputmode="decimal">
    <div class="toimage-download">下載</div>
  </div>
</body>
<script>
  (function ($) {
    $.fn.prompt = function (options) {
      var settings = $.extend(
        {
          message: "undefined",
          time: 2000,
          animate: "slide",
        },
        options
      );

      return this.each(function () {
        $('.prompt,style[promptanimation="promptanimation"]').remove();
        var promptchars = "0123456789abcdefghijklmnopqrstuvwxyz";
        var promptid = "";
        for (var i = 0; i < 10; i++) {
          var randomNumber = Math.floor(Math.random() * promptchars.length);
          promptid += promptchars.substring(randomNumber, randomNumber + 1);
        }

        if (settings.animate === "slide") {
          var translateyyy = -1 * ($('.bottom').height() + 15)
          $(this).append('<style qix="promptanimation' + promptid + '" promptanimation="promptanimation">.promptanimation' + promptid + '{animation-name:prompt' + promptid + ';animation-duration:' + (settings.time + 300 * 2) + 'ms;animation-fill-mode:forwards;animation-timing-function:ease-in-out}@keyframes prompt' + promptid + '{0%{opacity:0;transform:translateX(-50%) translateY(80px);}' + Math.floor((300) / (settings.time + 300 * 2) * 100) + '%{opacity:1;transform:translateX(-50%) translateY(' + translateyyy + 'px);}' + Math.floor((300 + settings.time) / (settings.time + 300 * 2) * 100) + '%{opacity:1;transform:translateX(-50%) translateY(' + translateyyy + 'px);}100%{opacity:0;transform:translateX(-50%) translateY(80px);}}</style><div class="prompt promptanimation' + promptid + '" id="' + promptid + '"><span class="promptcenter">' + settings.message + "</span></div>");
          setTimeout(function () {
            $("#" + promptid + ',style[qix="promptanimation' + promptid + '"]').remove();
          }, settings.time + 400 * 2 + 50);
        }


      });
    };
  })(jQuery);

</script>
<script>
  var getUrlString = location.href;
  var url = new URL(getUrlString);
  function gup(param) {
    param = String(param)
    return url.searchParams.get(param)
  }
  var allcolor = [];
  // left: 37, up: 38, right: 39, down: 40,
  // spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36
  var keys = { 37: 1, 38: 1, 39: 1, 40: 1 };

  function preventDefault(e) {
    e.preventDefault();
  }

  function preventDefaultForScrollKeys(e) {
    if (keys[e.keyCode]) {
      preventDefault(e);
      return false;
    }
  }

  // modern Chrome requires { passive: false } when adding event
  var supportsPassive = false;
  try {
    window.addEventListener("test", null, Object.defineProperty({}, 'passive', {
      get: function () { supportsPassive = true; }
    }));
  } catch (e) { }

  var wheelOpt = supportsPassive ? { passive: false } : false;
  var wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel';

  // call this to Disable
  function disableScroll() {
    window.addEventListener('DOMMouseScroll', preventDefault, false); // older FF
    window.addEventListener(wheelEvent, preventDefault, wheelOpt); // modern desktop
    window.addEventListener('touchmove', preventDefault, wheelOpt); // mobile
    window.addEventListener('keydown', preventDefaultForScrollKeys, false);
  }
  // call this to Enable
  function enableScroll() {
    window.removeEventListener('DOMMouseScroll', preventDefault, false);
    window.removeEventListener(wheelEvent, preventDefault, wheelOpt);
    window.removeEventListener('touchmove', preventDefault, wheelOpt);
    window.removeEventListener('keydown', preventDefaultForScrollKeys, false);
  }
  disableScroll()

  function genid(mode) {
    if (mode === "random") {
      var genidchars = "0123456789abcdefghijklmnopqrstuvwxyz";
      var genid = "";
      for (var i = 0; i < 16; i++) {
        var genrandomNumber = Math.floor(Math.random() * genidchars.length);
        genid += genidchars.substring(genrandomNumber, genrandomNumber + 1);
      }
      return genid;
    }
    if (mode === "time") {
      var gtoday = new Date();
      var genid2 =
        gtoday.getMonth() +
        1 +
        "_" +
        gtoday.getDate() +
        "_" +
        gtoday.getHours() +
        "_" +
        gtoday.getMinutes() +
        "_" +
        gtoday.getSeconds() +
        "-" +
        (1 + Math.floor(Math.random() * 8)) +
        "" +
        (1 + Math.floor(Math.random() * 8)) +
        "" +
        (1 + Math.floor(Math.random() * 8)) +
        "" +
        (1 + Math.floor(Math.random() * 8)) +
        "" +
        (1 + Math.floor(Math.random() * 8)) +
        "" +
        (1 + Math.floor(Math.random() * 8)) +
        "" +
        (1 + Math.floor(Math.random() * 8)) +
        "" +
        (1 + Math.floor(Math.random() * 8));
      return genid2;
    }
    if (mode === "number") {
      var genid3 = "";
      for (var i = 0; i < 16; i++) {
        genid3 += "" + (0 + Math.floor(Math.random() * 9));
      }
      return genid3;
    }
    if (mode === "uuid") {
      var genidchars4 = "abcdef012345678";
      var geniduu = [8, 4, 4, 4, 12];
      var genid4 = "";
      var genid5 = "";
      for (var ia = 0; ia < geniduu.length; ia++) {
        var genid4 = "";
        for (var i = 0; i < geniduu[ia]; i++) {
          var genrandomNumber4 = Math.floor(Math.random() * genidchars4.length);
          genid4 += genidchars4.substring(genrandomNumber4, genrandomNumber4 + 1);
        }
        genid5 += "-" + genid4;
      }
      return genid5.substring(1, genid5.length);
    }
  }
  let getMode = (e) => {
    let t = {};
    e.forEach((e) => {
      t[e] = (t[e] || 0) + 1;
    });
    let l = 0,
      r = [];
    for (let e in t)
      if (
        (t[e] > l ? ((l = t[e]), (r = [e])) : t[e] === l && r.push(e),
          r.length === Object.keys(t).length)
      )
        return [];
    return r;
  };

  function setcookie(cookiename, cookievalue) {
    document.cookie = cookiename + "=" + cookievalue + "; max-age=" + 60 * 60 * 24 * 30;
    localStorage.setItem(cookiename, cookievalue)
  }
  function getCookie(cname) {
    if (localStorage.hasOwnProperty(cname)) {
      return String(localStorage.getItem(cname))
    }
    var name = cname + "=";
    var ca = document.cookie.split(";");
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i].trim();
      if (c.indexOf(name) == 0) {
        localStorage.setItem(cname, c.substring(name.length, c.length))
        return c.substring(name.length, c.length)
      };
    }
    return "";
  }

  function componentToHex(a) {
    var r = a.toString(16);
    return 1 == r.length ? "0" + r : r;
  }
  function rgbToHex(a, r, t) {
    return "#" + componentToHex(a) + componentToHex(r) + componentToHex(t);
  }
  function hexToRgb(a) {
    var r = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
    return r
      ? { r: parseInt(r[1], 16), g: parseInt(r[2], 16), b: parseInt(r[3], 16) }
      : null;
  }
  function rgbtocmyk(a, r, t, o) {
    var h = 1 - a / 255,
      n = 1 - r / 255,
      M = 1 - t / 255,
      e = Math.min(h, Math.min(n, M));
    return (
      (h = (h - e) / (1 - e)),
      (n = (n - e) / (1 - e)),
      (M = (M - e) / (1 - e)),
      o ||
      ((h = Math.round(1e4 * h) / 100),
        (n = Math.round(1e4 * n) / 100),
        (M = Math.round(1e4 * M) / 100),
        (e = Math.round(1e4 * e) / 100)),
      {
        c: (h = isNaN(h) ? 0 : h),
        m: (n = isNaN(n) ? 0 : n),
        y: (M = isNaN(M) ? 0 : M),
        k: (e = isNaN(e) ? 0 : e),
        cmykstr: h + "," + n + "," + M + "," + e
      }
    );
  }
  function rgbtohsv(a, r, t) {
    let o, h, n, M, e, s, u, m, d, f, l, c;
    return (
      (o = a / 255),
      (h = r / 255),
      (n = t / 255),
      (d = Math.max(o, h, n)),
      (l = (a) => (d - a) / 6 / f + 0.5),
      (c = (a) => Math.round(100 * a) / 100),
      0 == (f = d - Math.min(o, h, n))
        ? (u = m = 0)
        : ((m = f / d),
          (M = l(o)),
          (e = l(h)),
          (s = l(n)),
          o === d
            ? (u = s - e)
            : h === d
              ? (u = 1 / 3 + M - s)
              : n === d && (u = 2 / 3 + e - M),
          u < 0 ? (u += 1) : u > 1 && (u -= 1)),
      {
        h: Math.round(360 * u),
        s: c(100 * m),
        v: c(100 * d),
        hsvstr: Math.round(360 * u) + "," + c(100 * m) + "," + c(100 * d)
      }
    );
  }
  function rgbtohsl(a, r, t) {
    var o = [a, r, t],
      h = o[0] / 255,
      n = o[1] / 255,
      M = o[2] / 255,
      e = Math.max(h, n, M),
      s = Math.min(h, n, M),
      u = (e + s) / 2,
      m = 0,
      d = 0;
    return (
      e != s &&
      ((m = u < 0.5 ? (e - s) / (e + s) : (e - s) / (2 - e - s)),
        (d =
          h == e
            ? (n - M) / (e - s)
            : n == e
              ? 2 + (M - h) / (e - s)
              : 4 + (h - n) / (e - s))),
      (d *= 60) < 0 && (d += 360),
      { h: d, s: (m *= 100), l: (u *= 100), hslstr: d + "," + m + "," + u }
    );
  }
  function hsvToRgb(a, r, t) {
    var o, h, n, M, e, s, u, m;
    if (
      ((a = Math.max(0, Math.min(360, a))),
        (r = Math.max(0, Math.min(100, r))),
        (t = Math.max(0, Math.min(100, t))),
        (t /= 100),
        0 == (r /= 100))
    )
      return (
        (o = h = n = t),
        [Math.round(255 * o), Math.round(255 * h), Math.round(255 * n)]
      );
    switch (
    ((s = t * (1 - r)),
      (u = t * (1 - r * (e = (a /= 60) - (M = Math.floor(a))))),
      (m = t * (1 - r * (1 - e))),
      M)
    ) {
      case 0:
        (o = t), (h = m), (n = s);
        break;
      case 1:
        (o = u), (h = t), (n = s);
        break;
      case 2:
        (o = s), (h = t), (n = m);
        break;
      case 3:
        (o = s), (h = u), (n = t);
        break;
      case 4:
        (o = m), (h = s), (n = t);
        break;
      default:
        (o = t), (h = s), (n = u);
    }
    return [Math.round(255 * o), Math.round(255 * h), Math.round(255 * n)];
  }
  function getligrd(a) {
    var r = hexToRgb(a),
      t = rgbtohsv(r.r, r.g, r.b),
      o = Math.floor(360 * Math.random()),
      h = 0,
      n = 0,
      M = 0,
      e = 0,
      s = 0,
      u = 0;
    t.h < 35 &&
      ((h = t.h + Math.floor(35 * Math.random())),
        (n = t.h + Math.floor(35 * Math.random()))),
      t.h > 35 &&
      t.h < 325 &&
      ((h = t.h + Math.floor(70 * Math.random() - 35)),
        (n = t.h + Math.floor(70 * Math.random() - 35))),
      t.h > 325 &&
      ((h = t.h - Math.floor(35 * Math.random())),
        (n = t.h - Math.floor(35 * Math.random()))),
      t.s < 35 &&
      ((M = t.s + Math.floor(35 * Math.random())),
        (e = t.s + Math.floor(35 * Math.random()))),
      t.s > 35 &&
      t.s < 65 &&
      ((M = t.s + Math.floor(70 * Math.random() - 35)),
        (e = t.s + Math.floor(70 * Math.random() - 35))),
      t.s > 65 &&
      ((M = t.s - Math.floor(35 * Math.random())),
        (e = t.s - Math.floor(35 * Math.random()))),
      t.v < 35 &&
      ((s = t.v + Math.floor(35 * Math.random())),
        (u = t.v + Math.floor(35 * Math.random()))),
      t.v > 35 &&
      t.v < 65 &&
      ((s = t.v + Math.floor(70 * Math.random() - 35)),
        (u = t.v + Math.floor(70 * Math.random() - 35))),
      t.v > 65 &&
      ((s = t.v - Math.floor(35 * Math.random())),
        (u = t.v - Math.floor(35 * Math.random())));
    var m = hsvToRgb(h, M, s),
      d = hsvToRgb(n, e, u);
    return [o, rgbToHex(m[0], m[1], m[2]), rgbToHex(d[0], d[1], d[2])];
  }
  function hsv2rgb(a, r, t) {
    (a /= 60), (r /= 100), (t /= 100);
    var o = Math.floor(a) % 6,
      h = a - Math.floor(a),
      n = 255 * t * (1 - r),
      M = 255 * t * (1 - r * h),
      e = 255 * t * (1 - r * (1 - h));
    t *= 255;
    switch (o) {
      case 0:
        return [t, e, n];
      case 1:
        return [M, t, n];
      case 2:
        return [n, t, e];
      case 3:
        return [n, M, t];
      case 4:
        return [e, n, t];
      case 5:
        return [t, n, M];
    }
  }
  function favoriteshare() {
    var timeseedrandom = new Date().getTime();
    var rand = Math.random()
    if (rand > 0.3) {
      return true
    }
    else {
      return false
    }
  }
  function cllhi() {
    if (String(getCookie("colorfav2")).length > 10) {
      var tthi = getCookie("colorfav2").substring(1, getCookie("colorfav2").length).split("&");
    }
    else {
      return false;
    }
    if (tthi.length < 10) {
      return false;
    }
    var ttww = [];
    var hhsv = [];
    var shsv = [];
    var vhsv = [];
    var rdbx = [
      "a0_15",
      "a16_30",
      "a31_45",
      "a46_60",
      "a61_75",
      "a76_90",
      "a91_105",
      "a106_120",
      "a121_135",
      "a136_150",
      "a151_165",
      "a166_180",
      "a181_195",
      "a196_210",
      "a211_225",
      "a226_240",
      "a241_255",
      "a256_270",
      "a271_285",
      "a286_300",
      "a301_315",
      "a316_330",
      "a331_345",
      "a346_360"
    ];
    var yau = {
      a0_15: [],
      a16_30: [],
      a31_45: [],
      a46_60: [],
      a61_75: [],
      a76_90: [],
      a91_105: [],
      a106_120: [],
      a121_135: [],
      a136_150: [],
      a151_165: [],
      a166_180: [],
      a181_195: [],
      a196_210: [],
      a211_225: [],
      a226_240: [],
      a241_255: [],
      a256_270: [],
      a271_285: [],
      a286_300: [],
      a301_315: [],
      a316_330: [],
      a331_345: [],
      a346_360: []
    };
    var yab = 0;

    for (var ffpp = 0; ffpp < tthi.length; ffpp++) {
      if (tthi[ffpp].indexOf("li") != -1) {
        //li
        var yywiw = tthi[ffpp].split("]");

        var yy_a = hexToRgb(yywiw[2]);
        var yy_b = hexToRgb(yywiw[3]);

        ttww.push(
          rgbToHex(
            Math.floor((yy_a.r + yy_b.r) / 2),
            Math.floor((yy_a.g + yy_b.g) / 2),
            Math.floor((yy_a.b + yy_b.b) / 2)
          )
        );

        hhsv.push(
          rgbtohsv(
            Math.floor((yy_a.r + yy_b.r) / 2),
            Math.floor((yy_a.g + yy_b.g) / 2),
            Math.floor((yy_a.b + yy_b.b) / 2)
          ).h
        );
      } else {
        if (tthi[ffpp].indexOf("pa") != -1) {
          var tyv = tthi[ffpp].split("]");
          var yy_y = hexToRgb(tyv[2]);
          var yy_yr = hexToRgb(tyv[1]);
          ttww.push(tyv[2]);
          hhsv.push(
            rgbtohsv(
              Math.floor((yy_y.r + yy_yr.r) / 2),
              Math.floor((yy_y.g + yy_yr.g) / 2),
              Math.floor((yy_y.b + yy_yr.b) / 2)
            ).h
          );
        } else {
          ttww.push(tthi[ffpp]);
          var yy_c = hexToRgb(tthi[ffpp]);
          hhsv.push(
            rgbtohsv(Math.floor(yy_c.r), Math.floor(yy_c.g), Math.floor(yy_c.b)).h
          );
        }
      }
    }

    for (var u = 0; u < hhsv.length; u++) {
      if (hhsv[u] >= 0 && hhsv[u] <= 15) {
        yau.a0_15.push(hhsv[u]);
      }
      if (hhsv[u] > 15 && hhsv[u] <= 30) {
        yau.a16_30.push(hhsv[u]);
      }
      if (hhsv[u] > 30 && hhsv[u] <= 45) {
        yau.a31_45.push(hhsv[u]);
      }
      if (hhsv[u] > 45 && hhsv[u] <= 60) {
        yau.a46_60.push(hhsv[u]);
      }
      if (hhsv[u] > 60 && hhsv[u] <= 75) {
        yau.a61_75.push(hhsv[u]);
      }
      if (hhsv[u] > 75 && hhsv[u] <= 90) {
        yau.a76_90.push(hhsv[u]);
      }
      if (hhsv[u] > 90 && hhsv[u] <= 105) {
        yau.a91_105.push(hhsv[u]);
      }
      if (hhsv[u] > 105 && hhsv[u] <= 120) {
        yau.a106_120.push(hhsv[u]);
      }
      if (hhsv[u] > 120 && hhsv[u] <= 135) {
        yau.a121_135.push(hhsv[u]);
      }
      if (hhsv[u] > 135 && hhsv[u] <= 150) {
        yau.a136_150.push(hhsv[u]);
      }
      if (hhsv[u] > 150 && hhsv[u] <= 165) {
        yau.a151_165.push(hhsv[u]);
      }
      if (hhsv[u] > 165 && hhsv[u] <= 180) {
        yau.a166_180.push(hhsv[u]);
      }
      if (hhsv[u] > 180 && hhsv[u] <= 195) {
        yau.a181_195.push(hhsv[u]);
      }
      if (hhsv[u] > 195 && hhsv[u] <= 210) {
        yau.a196_210.push(hhsv[u]);
      }
      if (hhsv[u] > 210 && hhsv[u] <= 225) {
        yau.a211_225.push(hhsv[u]);
      }
      if (hhsv[u] > 225 && hhsv[u] <= 240) {
        yau.a226_240.push(hhsv[u]);
      }
      if (hhsv[u] > 240 && hhsv[u] <= 255) {
        yau.a241_255.push(hhsv[u]);
      }
      if (hhsv[u] > 255 && hhsv[u] <= 270) {
        yau.a256_270.push(hhsv[u]);
      }
      if (hhsv[u] > 270 && hhsv[u] <= 285) {
        yau.a271_285.push(hhsv[u]);
      }
      if (hhsv[u] > 285 && hhsv[u] <= 300) {
        yau.a286_300.push(hhsv[u]);
      }
      if (hhsv[u] > 300 && hhsv[u] <= 315) {
        yau.a301_315.push(hhsv[u]);
      }
      if (hhsv[u] > 315 && hhsv[u] <= 330) {
        yau.a316_330.push(hhsv[u]);
      }
      if (hhsv[u] > 330 && hhsv[u] <= 345) {
        yau.a331_345.push(hhsv[u]);
      }
      if (hhsv[u] > 345 && hhsv[u] <= 360) {
        yau.a346_360.push(hhsv[u]);
      }
    }

    for (var t in yau) {
      eval("yau." + t + " = yau." + t + ".length");
    }
    for (var r in yau) {
      yab += eval("yau." + r);
    }

    for (var w in yau) {
      eval("yau." + w + "= Math.round((yau." + w + "/" + yab + ")*100)");
    }

    for (var x in yau) {
      for (var u = 0; u < eval("yau." + x); u++) {
        rdbx.push(x);
      }
    }

    var rsty = rdbx[Math.floor(Math.random() * (rdbx.length - 1))]
      .replaceAll("a", "")
      .split("_");

    rsta = parseInt(rsty[0]);
    rstb = parseInt(rsty[1]);
    var rstgg_h = rsta + Math.floor(Math.random() * (rstb - rsta));
    var rstgg_s = Math.floor(Math.random() * 100);
    var rstgg_v = Math.floor(Math.random() * 100);

    var thhu = hsv2rgb(rstgg_h, rstgg_s, rstgg_v);

    var rsthex = rgbToHex(
      Math.floor(thhu[0]),
      Math.floor(thhu[1]),
      Math.floor(thhu[2])
    );

    return rsthex;
  }

  function gtffim(l, b, w, h, expt) {
    var ssscale = 1;
    var ssssssw = w * ssscale;
    var ssssssh = h * ssscale;
    var sssizew = ssssssw * 2;
    var sssizeh = ssssssh * 2;
    var sssizex = -sssizew / 2;
    var sssizey = -sssizeh / 2;
    var sspath = ["M" + sssizex + " " + sssizey];
    for (var i = 0; i < 256; i++) {
      sspath.push(
        "S" +
        (sssizex + Math.random() * (sssizew - sssizex)).toFixed(3) +
        " " +
        (sssizey + Math.random() * (sssizeh - sssizey)).toFixed(3) +
        " " +
        (sssizex + Math.random() * (sssizew - sssizex)).toFixed(3) +
        " " +
        (sssizey + Math.random() * (sssizeh - sssizey)).toFixed(3)
      );
    }
    if (expt === 1) {
      var thssvghtmlpp = sspath.join(' ')
    }
    else {
      var thssvghtmlpp = '<svg xmlns="http://www.w3.org/2000/svg" viewbox="0,0,' + ssssssw + "," + ssssssh + '" class="colorcontentpathsvg"><path d="' + sspath.join(" ") + '" id="ssp" fill="transparent" stroke="' + l + '" stroke-width="0.4"/></svg>';
    }

    return thssvghtmlpp;
  }

  var colorstops = [
    { color: "rgba(130,0,159,1)", pos: 0 },
    { color: "rgba(93,52,175,1)", pos: 50 },
    { color: "rgba(0,206,171,1)", pos: 100 }
  ]
  var mode = 1;

  // Gather Elements
  canvas = document.getElementById("toimagecanvas")
  ctx = canvas.getContext("2d")

  //Draw Gradients
  function drawGradients(deg, w, h) {
    var points = mode === 1 ? linearGradient_a(w, h, deg) : linearGradient_b(w, h, deg);
    var grd = ctx.createLinearGradient(
      points.tx,
      points.ty,
      points.bx,
      points.by
    );

    for (var i in colorstops) {
      grd.addColorStop(colorstops[i].pos / 100, colorstops[i].color);
    }

    // Draw Box
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.beginPath();
    ctx.fillStyle = grd;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.stroke();
  }


  //Calculate Linear Gradient Angle and Cut Points
  function linearGradient_a(w, h, deg) {
    var caseAngle1 = Math.round((Math.atan(w / h) * 180) / Math.PI), //rundung
      caseAngle2 = Math.round(180 - caseAngle1),
      caseAngle3 = Math.round(180 + caseAngle1),
      caseAngle4 = Math.round(360 - caseAngle1);

    var bx = tx = wh = w / 2,
      hh = h / 2,
      ty = h,
      by = 0,
      angInRad = (deg * Math.PI) / 180,
      count1;

    if (deg == caseAngle1) { tx = 0; bx = w; } else
      if (deg == caseAngle2) { tx = 0; ty = 0; bx = w; by = h; } else
        if (deg == caseAngle3) { tx = w; ty = 0; bx = 0; by = h; } else
          if (deg == caseAngle4) { tx = w; ty = h; bx = 0; by = 0; } else {
            var mtan = Math.tan(angInRad);

            if (0 < deg && deg < caseAngle1) {
              count1 = (mtan * h) / 2;
              tx = wh - count1;
              bx = wh + count1;
            }
            else if (caseAngle1 < deg && deg < caseAngle2) {
              count1 = wh / mtan;
              tx = 0;
              ty = hh + count1;
              bx = w;
              by = hh - count1;
            } else if (caseAngle2 < deg && deg < caseAngle3) {
              count1 = (mtan * h) / 2;
              tx = wh + count1;
              ty = 0;
              bx = wh - count1;
              by = h;
            } else if (caseAngle3 < deg && deg < caseAngle4) {
              count1 = wh / mtan;
              tx = w;
              ty = hh - count1;
              bx = 0;
              by = hh + count1;
            } else if (caseAngle4 < deg && deg < 361) {
              count1 = (mtan * h) / 2;
              tx = wh - count1;
              ty = h;
              bx = wh + count1;
              by = 0;
            }
          }
    return { tx: tx, ty: ty, bx: bx, by: by };
  }



  function linearGradient_b(w, h, angle) {
    angle = angle * Math.PI / 180 + Math.PI / 2;

    var tx,
      ty,
      bx,
      by,
      len = Math.sqrt(w / 2 * w / 2 + h / 2 * h / 2),
      l1 = {
        x1: Math.cos(angle) * len + w / 2,
        y1: Math.sin(angle) * len + h / 2,
        x2: w / 2,
        y2: h / 2
      };

    var lines = [
      getPerpLine({ x: 0, y: 0 }, angle),
      getPerpLine({ x: w, y: 0 }, angle),
      getPerpLine({ x: w, y: h }, angle),
      getPerpLine({ x: 0, y: h }, angle),
    ];
    var intersects = []
    for (var i = 0; i < lines.length; i++) {

      var line = lines[i];
      var p = lineIntersect(line, l1);
      intersects.push(p);
    }

    if (dist(w / 2, h / 2, intersects[0].x, intersects[0].y) > dist(w / 2, h / 2, intersects[1].x, intersects[1].y)) {
      tx = intersects[0].x;
      ty = intersects[0].y;
    } else {
      tx = intersects[1].x;
      ty = intersects[1].y;
    }

    if (dist(w / 2, h / 2, intersects[2].x, intersects[2].y) > dist(w / 2, h / 2, intersects[3].x, intersects[3].y)) {
      bx = intersects[2].x;
      by = intersects[2].y;
    } else {
      bx = intersects[3].x;
      by = intersects[3].y;
    }

    var eAngle = Math.round(Math.atan2((h / 2 - ty), (w / 2 - tx)) * 100) / 100;
    var aAngle = Math.round(angle % (Math.PI * 2) * 100) / 100;

    if (eAngle === aAngle) {
      var x = tx, y = ty;
      tx = bx, ty = by;
      bx = x, by = y;
    }

    l1 = {
      x1: tx, y1: ty, x2: w / 2, y2: h / 2
    };
    l2 = {
      x1: w / 2, y1: h / 2, x2: bx, y2: by
    };

    return {
      tx: Math.round(tx),
      ty: Math.round(ty),
      bx: Math.round(bx),
      by: Math.round(by)
    }
  }


  function degToRad(d) {
    return d * Math.PI / 180;
  }

  function dist(x1, y1, x2, y2) {
    var dx = x1 - x2;
    var dy = y1 - y2;
    return Math.sqrt(dx * dx + dy * dy);
  }


  function getPerpLine(p, ang) {
    return {
      x1: p.x,
      y1: p.y,
      x2: p.x + Math.cos(ang + Math.PI / 2) * 100,
      y2: p.y + Math.sin(ang + Math.PI / 2) * 100,
    }
  }

  function lineIntersect(l1, l2) {
    var p0 = {
      x: l1.x1,
      y: l1.y1
    }
    var p1 = {
      x: l1.x2,
      y: l1.y2
    }
    var p2 = {
      x: l2.x1,
      y: l2.y1
    }
    var p3 = {
      x: l2.x2,
      y: l2.y2
    }

    var A1 = p1.y - p0.y,
      B1 = p0.x - p1.x,
      C1 = A1 * p0.x + B1 * p0.y,
      A2 = p3.y - p2.y,
      B2 = p2.x - p3.x,
      C2 = A2 * p2.x + B2 * p2.y,
      denominator = A1 * B2 - A2 * B1;

    if (denominator === 0) {
      return false;
    }

    return {
      x: Math.round((B2 * C1 - B1 * C2) / denominator * 100) / 100,
      y: Math.round((A1 * C2 - A2 * C1) / denominator * 100) / 100
    }

  }

  function toimage(datajson, gindex, width, height, scale) {
    var rwidth = String(width)
    var rheight = String(height)
    width = width * scale
    height = height * scale
    var type = datajson.type
    var content = datajson.content
    var filename = new Date().getTime()
    //var gindex = ;
    var canvas2 = document.querySelector('#toimagecanvas')
    canvas2.width = width
    canvas2.height = height
    var ctx2 = canvas2.getContext('2d')
    ctx2.clearRect(0, 0, width, height);
    if (type === 'color') {
      ctx2.fillStyle = content[0];
      ctx2.fillRect(0, 0, width, height);
      filename = 'color_' + content[0]
    }
    if (type === 'gradient') {
      colorstops = [
        { color: content[1], pos: 0 },
        { color: content[2], pos: 100 }
      ]
      mode = 1;
      drawGradients(content[0], width, height)
      filename = 'linear-gradient_' + content.join('_')
    }
    if (type === 'path') {
      var pathdata = gtffim(content[0], content[1], width, height, 1)
      ctx2.fillStyle = content[1];
      ctx2.fillRect(0, 0, width, height);
      ctx.strokeStyle = content[0];
      ctx.lineWidth = 1;
      var p = new Path2D(pathdata)
      ctx.stroke(p);
      filename = 'path_' + content.join('_')
    }
    if (type === 'imagecolorgroup') {
      if (gindex === 0) {
        return ''
      }
      ctx2.fillStyle = content[(gindex - 1)];
      ctx2.fillRect(0, 0, width, height);
      filename = 'color_' + content[(gindex - 1)]

    }
    if (type === 'colorgroup') {
      ctx2.fillStyle = content[(gindex)];
      ctx2.fillRect(0, 0, width, height);
      filename = 'color_' + content[(gindex)]
    }

    filename += '_' + rwidth + 'x' + rheight + '_' + scale + 'x'
    canvas2.toBlob(function (blob) {
      var uu = window.URL || window.webkitURL;
      var a = document.createElement('a');
      a.download = filename + '.png';
      a.href = uu.createObjectURL(blob);
      document.body.appendChild(a);
      a.click()
      a.remove()

    })
    //return blob obj
  }

  function textcol(r, g, b) {
    var textcolrgbfy = (r * 0.213 + g * 0.718 + b * 0.072)
    //var textcolrgbfy = (r + g + b) / 3;
    if (textcolrgbfy > 255 / 2) {
      return "#000000";
    } else {
      return "#ffffff";
    }
  }
  function setthemecol(hexcolsjs, delaytimems) {
    setTimeout(function () {
      $('meta[name="theme-color"]').attr('content', hexcolsjs);
    }, delaytimems);
  }
  function isRunningStandalone() {
    return (window.matchMedia('(display-mode: standalone)').matches);
  }
  //userid
  function systeminfodata(uid) {
    var nav = window.navigator;
    gtag('event', 'user_system_appcodename', {
      'event_category': nav.appCodeName,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_appname', {
      'event_category': nav.appName,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_appver', {
      'event_category': nav.appVersion,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_lang', {
      'event_category': nav.language,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_platform', {
      'event_category': nav.platform,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_product', {
      'event_category': nav.product,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_productsub', {
      'event_category': nav.productSub,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_useragent', {
      'event_category': nav.userAgent,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });

    gtag('event', 'user_system_vendor', {
      'event_category': nav.vendor,
      'event_label': uid,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });
  }

  var user_id;
  if (localStorage.getItem('user_id_r') === '1') {
    user_id = localStorage.getItem('user_id');
    gtag('event', 'user_start', {
      'event_category': 'count',
      'event_label': user_id,
      'transport_type': 'beacon',
      'event_callback': function () {

        //systeminfodata(user_id)
      }
    });
  }
  else {
    var user_id_chars = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    user_id = "";
    for (var useridi = 0; useridi < 64; useridi++) {
      var user_id_randomNumber = Math.floor(Math.random() * user_id_chars.length);
      user_id += user_id_chars.substring(user_id_randomNumber, user_id_randomNumber + 1);
    }
    localStorage.setItem('user_id_r', '1');
    localStorage.setItem('user_id', user_id);
    var hyatav = { 'appcodename': window.navigator.appCodeName, 'appname': window.navigator.appName, 'appver': window.navigator.appVersion, 'lang': window.navigator.language, 'platform': window.navigator.platform, 'product': window.navigator.product, 'productsub': window.navigator.productSub, 'useragent': window.navigator.userAgent, 'vendor': window.navigator.vendor };

    var newuseridbackurl = 'https://docs.google.com/forms/d/e/1FAIpQLSeu19oOI34etg9rGCah1l50AkJVqy2gi5d1uhW-g-zYDsCJCw/formResponse?usp=pp_url&entry.584799207=' + user_id + '&entry.1702628837=' + encodeURIComponent(JSON.stringify(hyatav)) + '&entry.688790589=' + encodeURIComponent(location.href);
    $(document).ready(function () {
      var newuseridbackurlajaxee = $.ajax({ url: newuseridbackurl, async: true });
    });
    gtag('event', 'user_start', {
      'event_category': 'count',
      'event_label': user_id,
      'transport_type': 'beacon',
      'event_callback': function () {

        systeminfodata(user_id)
      }
    });

  }
  //useridend
  //manifest.json
  //var manifestjsonjj = {"name":"Colors","short_name":"Colors","icons":[{"src":"https://erichsia7.github.io/colors/ic/icon_48x48.png","sizes":"48x48","type":"image/png"},{"src":"https://erichsia7.github.io/colors/ic/icon_72x72.png","sizes":"72x72","type":"image/png"},{"src":"https://erichsia7.github.io/colors/ic/icon_96x96.png","sizes":"96x96","type":"image/png"},{"src":"https://erichsia7.github.io/colors/ic/icon_144x144.png","sizes":"144x144","type":"image/png"},{"src":"https://erichsia7.github.io/colors/ic/icon_168x168.png","sizes":"168x168","type":"image/png"},{"src":"https://erichsia7.github.io/colors/ic/icon_192x192.png","sizes":"192x192","type":"image/png"},{"src":"https://erichsia7.github.io/colors/c2_512.png","sizes":"512x512","type":"image/png"}],"start_url":"./?pwa=1&souuid=" + user_id,"display":"standalone","orientation":"portrait","shortcuts":[{"name":"Random Color","short_name":"Random Color","description":"Generate random colors","url":"https://erichsia7.github.io/colors/?shortcuts=1","icons":[{"src":"https://erichsia7.github.io/colors/shortcuts/random-192.png","sizes":"192x192"}]}]}
  //$('link[rel="manifest"]').attr('href','data:application/manifest+json,' + JSON.stringify(manifestjsonjj))
  //manifest.jsonend
  //darkmode
  let darkmodematched = window.matchMedia('(prefers-color-scheme: dark)').matches;
  var darkmodematchedstr = 'undefined';
  if (darkmodematched) {
    darkmodematchedstr = 'true';
    //setthemecol('#1a1a1a',1)
  }
  else {
    darkmodematchedstr = 'false';
  }

  gtag('event', 'dark_mode', {
    'event_category': darkmodematchedstr,
    'event_label': user_id,
    'transport_type': 'beacon',
    'event_callback': function () {

    }
  });

  //darkmodeend
  //windowresize
  var window_sou_width = window.innerWidth;
  var window_sou_height = window.innerHeight;
  $(window).resize(function () {
    var window_width_change = (window_sou_width - window.innerWidth);
    var window_height_change = (window_sou_height - window.innerHeight);
    gtag('event', 'window_resize', {
      'event_category': '{"before":"' + window_sou_width + ',' + window_sou_height + '","after":"' + window.innerWidth + ',' + window.innerHeight + '","change":"' + window_width_change + ',' + window_height_change + '"}',
      'event_label': user_id,
      'transport_type': 'beacon',
      'event_callback': function () {

      }
    });
  });

  //windowresizeend
  //settings
  if (localStorage.getItem('settings_lowspeed') === null) {
    localStorage.setItem('settings_lowspeed', '1')
  }
  if (localStorage.getItem('settings_sharefav') === null) {
    localStorage.setItem('settings_sharefav', '1')
  }
  //settingsend
  //usage_point
  function initializeusagepoint() {
    var todaygg = new Date()
    var tddatehh = todaygg.getFullYear() + '-' + (todaygg.getMonth() + 1) + '-' + todaygg.getDate()
    if (localStorage.getItem('usage_point_' + tddatehh) === undefined || localStorage.getItem('usage_point_' + tddatehh) === null) {
      var usagepoint_json = { "date": tddatehh, "events": {} }
    }
    else {
      var usagepoint_json = JSON.parse(String(localStorage.getItem('usage_point_' + tddatehh)))
    }
    localStorage.setItem('usage_point_' + tddatehh, JSON.stringify(usagepoint_json))
  }

  function usagepoint(eventname, points) {
    var todaygg = new Date()
    var tddatehh = todaygg.getFullYear() + '-' + (todaygg.getMonth() + 1) + '-' + todaygg.getDate()
    var ydhstdjson = JSON.parse(String(localStorage.getItem('usage_point_' + tddatehh)))
    eval('ydhstdjson.events.a_' + eventname + '_' + new Date().getTime() + ' = "' + points + '"')
    localStorage.setItem('usage_point_' + tddatehh, JSON.stringify(ydhstdjson))
  }

  initializeusagepoint()


  //usage_point_end
  //usage_point_send
  function usgaepointresultjsoncalc(dayy, datau) {
    var keys = [];
    var keysnorep = [];
    var keysrepcount = {}
    var keysreppoint = {}
    var pointtotal = 0
    for (var k in datau) {
      keys.push(k);
    }
    for (var i = 0; i < keys.length; i++) {
      eval('pointtotal = pointtotal' + eval('datau.' + keys[i]))
      if (!(keysnorep.join(',').indexOf(keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], '')) > -1)) {
        keysnorep.push(keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], ''))
        eval('keysrepcount.' + keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], '') + ' = 1')
        eval('keysreppoint.' + keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], '') + ' = 0 + (' + eval('datau.' + keys[i]) + ')')
      }
      else {
        eval('keysrepcount.' + keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], '') + ' = ' + 'parseInt(keysrepcount.' + keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], '') + ')+1')
        eval('keysreppoint.' + keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], '') + ' = (keysreppoint.' + keys[i].replaceAll('_' + String(keys[i]).split('_')[(String(keys[i]).split('_').length - 1)], '') + ')+(' + eval('datau.' + keys[i]) + ')')
      }
    }

    var resultjsonddcsowcjfi = { "date": dayy.date, "events": { "event_count": keysrepcount, "event_point": keysreppoint, "event_point_total": pointtotal, "event_type_count": keysnorep.length } }
    return resultjsonddcsowcjfi
  }
  function sendusagepoint() {
    var todaydated = new Date()
    for (var i = 1; i < 366; i++) {
      var lastdaydated = new Date()
      lastdaydated.setTime(todaydated.getTime() - 60 * 60 * 24 * 1000 * i)
      var lastdatese = lastdaydated.getFullYear() + '-' + (lastdaydated.getMonth() + 1) + '-' + lastdaydated.getDate()
      if (localStorage.hasOwnProperty('usage_point_' + lastdatese)) {

        if (String(localStorage.getItem('usage_point_' + lastdatese)).indexOf('"1"') > -1 || String(localStorage.getItem('usage_point_' + lastdatese)).indexOf('"+"') > -1) {
          localStorage.removeItem('usage_point_' + lastdatese)
          continue;
        }
      }
      if (String(localStorage.getItem('usage_point_' + lastdatese)).length > 10 && !(localStorage.getItem('usage_point_' + lastdatese + '_send') === '1') && !(localStorage.getItem('usage_point_' + lastdatese) === null) && !(localStorage.getItem('usage_point_' + lastdatese) === undefined)) {
        var lastdayresultjson = usgaepointresultjsoncalc(JSON.parse(String(localStorage.getItem('usage_point_' + lastdatese))), JSON.parse(String(localStorage.getItem('usage_point_' + lastdatese))).events)

        var lastdayresultjson_event_count = lastdayresultjson.events.event_count
        var lastdayresultjson_event_point = lastdayresultjson.events.event_point
        var lastdayresultjson_event_point_total = lastdayresultjson.events.event_point_total
        var lastdayresultjson_event_type_count = lastdayresultjson.events.event_type_count
        //send
        for (var hssu_1 in lastdayresultjson_event_count) {
          //event_count
          var thskeyname = hssu_1
          var thskeyvalue = eval('lastdayresultjson_event_count.' + hssu_1)

          gtag('event', 'event_count_' + thskeyname, {
            'count': thskeyvalue,
            'event_label': user_id,
            'transport_type': 'beacon',
            'event_callback': function () {

            }
          });

        }
        for (var hssu_2 in lastdayresultjson_event_point) {
          //event_point
          var thskeyname = hssu_2
          var thskeyvalue = eval('lastdayresultjson_event_point.' + hssu_2)


          gtag('event', 'event_point_' + thskeyname, {
            'point': thskeyvalue,
            'event_label': user_id,
            'transport_type': 'beacon',
            'event_callback': function () {

            }
          });

        }

        gtag('event', 'event_point_total', {
          'point_total': lastdayresultjson_event_point_total,
          'event_label': user_id,
          'transport_type': 'beacon',
          'event_callback': function () {

          }
        });
        gtag('event', 'event_type_count', {
          'evt_type_count': lastdayresultjson_event_type_count,
          'event_label': user_id,
          'transport_type': 'beacon',
          'event_callback': function () {

          }
        });
        localStorage.setItem('usage_point_' + lastdatese + '_send', '1')
        //sendend  
      }
      if (localStorage.getItem('usage_point_' + lastdatese + '_send') === '1') {
        localStorage.removeItem('usage_point_' + lastdatese)
        localStorage.removeItem('usage_point_' + lastdatese + '_send')
      }
    }

  }
  sendusagepoint()
  //usage_point_send_end	  


  function addcolorcontent() {
    usagepoint('add_color', '+1')
    var col = cllhi()
    if (col === false) {
      var random_r = Math.floor(Math.random() * 255)
      var random_g = Math.floor(Math.random() * 255)
      var random_b = Math.floor(Math.random() * 255)
      col = rgbToHex(random_r, random_g, random_b)
    }
    var txc = textcol(hexToRgb(col).r, hexToRgb(col).g, hexToRgb(col).b)
    var content = {
      type: "color",
      group: false,
      content: [col],
      shareurl: 'https://erichsia7.github.io/colors/?s=1&c=' + btoa(col) + '&r=' + genid('random'),
      id: 'c_' + genid('random'),
      textcolor: txc,
      themecolor: col
    };
    allcolor.push(content)
  }
  function addgradientcontent() {
    usagepoint('add_gradient', '+1')
    var col = cllhi()
    if (col === false) {
      var random_r = Math.floor(Math.random() * 255)
      var random_g = Math.floor(Math.random() * 255)
      var random_b = Math.floor(Math.random() * 255)
      col = rgbToHex(random_r, random_g, random_b)
    }

    var grd = getligrd(col)

    var txc = textcol((hexToRgb(grd[1]).r + hexToRgb(grd[2]).r) * .5, (hexToRgb(grd[1]).g + hexToRgb(grd[2]).g) * .5, (hexToRgb(grd[1]).b + hexToRgb(grd[2]).b) * .5)
    var mixcol = rgbToHex(Math.floor((hexToRgb(grd[1]).r + hexToRgb(grd[2]).r) * .5), Math.floor((hexToRgb(grd[1]).g + hexToRgb(grd[2]).g) * .5), Math.floor((hexToRgb(grd[1]).b + hexToRgb(grd[2]).b) * .5))


    var content = {
      type: "gradient",
      group: false,
      content: grd,
      shareurl: 'https://erichsia7.github.io/colors/?s=2&ga=' + btoa(grd[1]) + '&gb=' + btoa(grd[2]) + '&gdeg=' + grd[0] + '&r=' + genid('random'),
      id: 'c_' + genid('random'),
      textcolor: txc,
      themecolor: mixcol
    };
    allcolor.push(content)
  }
  function addimagecolorcontentgroup() {
    usagepoint('add_image_color_group', '+1')
    var imgid = 'd-' + genid('uuid')
    $('body').append('<img id="' + imgid + '" style="display:none;">')
    var rcimgwh = 256
    var rcimg = 'https://picsum.photos/' + rcimgwh + '?' + Math.random();
    $.ajax({
      type: 'GET', url: rcimg, beforeSend: function (xhr) { xhr.overrideMimeType('text/plain; charset=x-user-defined'); }, async: true, success: function (result, textStatus, jqXHR) {
        var binary = "";
        var responseText = jqXHR.responseText;
        var responseTextLen = responseText.length;
        for (i = 0; i < responseTextLen; i++) {
          binary += String.fromCharCode(responseText.charCodeAt(i) & 255)
        }
        var b64url = 'data:image/jpeg;base64,' + btoa(binary)
        $.ajax({
          type: 'get', url: 'https://picsum.photos/id/' + jqXHR.getResponseHeader('picsum-id') + '/info', dataType: 'text', async: true, success: function (e) {
            var imginfojson = JSON.parse(e)
            $('#' + imgid).attr('src', b64url)

            $('#' + imgid).ready(function () {
              setTimeout(function () {
                const colorThief = new ColorThief();
                const imgee = document.querySelector('#' + imgid);
                if (imgee.complete) {
                  var imgcolorpalette = colorThief.getPalette(imgee);
                  var imgmaincolor = colorThief.getColor(imgee)
                  var pltcolorhex = []
                  var plttextcolor = []
                  for (var hq = 0; hq < imgcolorpalette.length; hq++) {
                    var thshex = rgbToHex(imgcolorpalette[hq][0], imgcolorpalette[hq][1], imgcolorpalette[hq][2])
                    pltcolorhex.push(thshex)
                    plttextcolor.push(textcol(imgcolorpalette[hq][0], imgcolorpalette[hq][1], imgcolorpalette[hq][2]))
                  }
                  var imagetxc = textcol(imgmaincolor[0], imgmaincolor[1], imgmaincolor[2])
                  var imgcol = rgbToHex(imgmaincolor[0], imgmaincolor[1], imgmaincolor[2])
                  var thcol = []
                  thcol.push(imgcol)
                  for (var t = 0; t < pltcolorhex.length; t++) {
                    thcol.push(pltcolorhex[t])
                  }
                  var content = {
                    type: "imagecolorgroup",
                    group: true,
                    content: pltcolorhex,
                    image: {
                      dataurl: b64url,
                      hdurl: imginfojson.download_url,
                      source: imginfojson.url
                    },
                    shareurl: 'https://erichsia7.github.io/colors/?s=4&grouplist=' + btoa(pltcolorhex.join(',')) + '&picid=' + jqXHR.getResponseHeader('picsum-id') + '&picurl=' + btoa(imginfojson.download_url) + '&picsou=' + btoa(imginfojson.url) + '&pictx=' + btoa(imagetxc) + '&pictm=' + btoa(imgcol) + '&r=' + genid('random'),
                    id: 'c_' + genid('random'),
                    textcolor: plttextcolor,
                    imgtextcolor: imagetxc,
                    themecolor: thcol
                  };
                  allcolor.push(content)
                  $('#' + imgid).remove()
                }
              }, 150);
            });
          }
        });
      }
    });
  }
  function addpathcontent() {
    usagepoint('add_path', '+1')
    var col = cllhi()
    if (col === false) {
      var random_r = Math.floor(Math.random() * 255)
      var random_g = Math.floor(Math.random() * 255)
      var random_b = Math.floor(Math.random() * 255)
      col = rgbToHex(random_r, random_g, random_b)
    }
    var pathzz = getligrd(col)
    var txc = textcol((hexToRgb(pathzz[1]).r + hexToRgb(pathzz[2]).r) * .5, (hexToRgb(pathzz[1]).g + hexToRgb(pathzz[2]).g) * .5, (hexToRgb(pathzz[1]).b + hexToRgb(pathzz[2]).b) * .5)
    var path_datahtml = gtffim(pathzz[1], pathzz[2], window.innerWidth, (window.innerHeight - $('.bottom').height()))
    var content = {
      type: "path",
      group: false,
      content: [pathzz[1], pathzz[2]],
      path_data: path_datahtml,
      shareurl: 'https://erichsia7.github.io/colors/?s=3&la=' + btoa(pathzz[1]) + '&lb=' + btoa(pathzz[2]) + '&r=' + genid('random'),
      id: 'c_' + genid('random'),
      textcolor: txc,
      themecolor: pathzz[2]
    };
    allcolor.push(content)
  }
  var gtg = 0;
  var dbclick = {}
  var sentcolors = {}

  function addcolorcontentgroup() {
    usagepoint('add_color_group', '+1')

    var random_r = Math.floor(Math.random() * 255)
    var random_g = Math.floor(Math.random() * 255)
    var random_b = Math.floor(Math.random() * 255)
    var col = rgbToHex(random_r, random_g, random_b)

    var e1 = getligrd(col)
    var e2 = getligrd(e1[2])
    var e3 = getligrd(e2[2])
    var e4 = getligrd(e3[2])
    var e5 = getligrd(e4[2])
    var bb = [e1, e2, e3, e4, e5]
    var groupcontent = []
    var contenttextcol = []
    for (var b = 0; b < bb.length; b++) {
      groupcontent.push(bb[b][1])
      groupcontent.push(bb[b][2])
      var bb1 = hexToRgb(bb[b][1])
      var bb2 = hexToRgb(bb[b][2])
      contenttextcol.push(textcol(bb1.r, bb1.g, bb1.b))
      contenttextcol.push(textcol(bb2.r, bb2.g, bb2.b))
    }
    var content = {
      type: "colorgroup",
      group: true,
      content: groupcontent,
      shareurl: 'https://erichsia7.github.io/colors/?s=5&grouplist=' + btoa(groupcontent.join(',')) + '&r=' + genid('random'),
      id: 'c_' + genid('random'),
      textcolor: contenttextcol,
      themecolor: groupcontent
    };
    allcolor.push(content)
  }

  function printcolor() {
    usagepoint('printcolor', '+' + gtg)

    for (var i = gtg; i < allcolor.length; i++) {
      var ths_ctx = allcolor[i].content
      var contents = []
      var groupprogressbar = []
      var groupprogressbar_c = 0
      var dftextcolor = '#000000'
      var favstr = ''
      var favcss = ''
      if (allcolor[i].group) {
        var contentindexoffset = 0
        if (allcolor[i].type === 'imagecolorgroup') {
          groupprogressbar_c = allcolor[i].content.length
          favstr = 'false'
          contentindexoffset = 1
          var contentimageid = 'e_' + genid('uuid')
          contents.push('<div class="colorcontent" style="background:url(' + allcolor[i].image.dataurl + ');background-size:cover;background-position:center;background-repeat:no-repeat;--dx-li-f:' + 0 + ';"><div class="colorcontent-image-blur-mask"></div><div class="colorcontent-image" style="background:url(' + allcolor[i].image.hdurl + ');background-size: cover;background-position:center;background-repeat:no-repeat;" id="' + contentimageid + '" i="' + i + '"></div></div>')
          groupprogressbar.push('<li sl="1"></li>')
          dftextcolor = allcolor[i].imgtextcolor
        }
        if (allcolor[i].type === 'colorgroup') {
          groupprogressbar_c = allcolor[i].content.length - 1
          favstr = '&' + ths_ctx[0]
          groupprogressbar.push('<li sl="1"></li>')
          dftextcolor = allcolor[i].textcolor[0]
        }
        for (var d = 0; d < allcolor[i].content.length; d++) {
          contents.push('<div class="colorcontent" style="background:' + ths_ctx[d] + ';--dx-li-f:' + (d + contentindexoffset) + ';color:' + allcolor[i].textcolor[d] + '"><div class="colorcontent-text">' + ths_ctx[d] + '</div></div>')
        }
        for (var s = 0; s < groupprogressbar_c; s++) {
          groupprogressbar.push('<li></li>')
        }
      }
      else {
        if (allcolor[i].type === 'color') {
          favstr = '&' + ths_ctx[0]
          contents.push('<div class="colorcontent" style="background:' + ths_ctx[0] + ';color:' + allcolor[i].textcolor + '"><div class="colorcontent-text">' + ths_ctx + '</div></div>')
          dftextcolor = allcolor[i].textcolor
        }
        if (allcolor[i].type === 'gradient') {
          favstr = '&li]' + ths_ctx[0] + ']' + ths_ctx[1] + ']' + ths_ctx[2]
          contents.push('<div class="colorcontent" style="background:linear-gradient(' + ths_ctx[0] + 'deg ,' + ths_ctx[1] + ' ,' + ths_ctx[2] + ');color:' + allcolor[i].textcolor + '"><div class="colorcontent-text">' + ths_ctx.join(',') + '</div></div>')
          dftextcolor = allcolor[i].textcolor
        }
        if (allcolor[i].type === 'path') {
          favstr = '&pa]' + ths_ctx[0] + ']' + ths_ctx[1]
          contents.push('<div class="colorcontent" style="background:' + ths_ctx[1] + ';color:' + allcolor[i].textcolor + '">' + allcolor[i].path_data + '<div class="colorcontent-text">' + ths_ctx.join(',') + '</div></div>')
          dftextcolor = allcolor[i].textcolor
        }
      }
      if (getCookie('colorfav2').indexOf(favstr) != -1) {
        favcss = 'background:url(https://erichsia7.github.io/colors/favorited.png);background-size:35px;background-position:center;background-repeat:no-repeat'
      }
      $('.box').append('<div class="color" fid="' + allcolor[i].id + '" group="' + allcolor[i].group + '" i="' + i + '" group-index="0"><div class="colorbox">' + contents.join('') + '</div><div class="group-progress-bar" txtcolor="' + dftextcolor + '">' + groupprogressbar.join('') + '</div><div class="arrow arrow-left" txtcolor="' + dftextcolor + '" btnid="' + allcolor[i].id + '"></div><div class="arrow arrow-right" txtcolor="' + dftextcolor + '" btnid="' + allcolor[i].id + '"></div><div class="rightbar" txtcolor="' + dftextcolor + '"><div class="favorite" btnid="' + allcolor[i].id + '" style="' + favcss + '"></div><div class="share" btnid="' + allcolor[i].id + '"></div><div class="options" btnid="' + allcolor[i].id + '"></div></div></div>')

      $('.arrow-left[btnid="' + allcolor[i].id + '"]').click(function (evt) {
        evt.stopPropagation();
        usagepoint('group_arrow_left', '+1')
        var gtype = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].type
        var gindex = parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index'))

        if (gindex > 0) {
          gindex -= 1

          $('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index', gindex)
          $('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').attr('sl', '0')
          $('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').eq(gindex).attr('sl', '1')

          $('.color[fid="' + $(this).attr('btnid') + '"] .colorbox').css({ 'transform': 'translateX(calc(var(--ft-window-width) * ' + gindex + ' * -1))', 'transition': '0.3s' });

          var allcolorindex = parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))
          setthemecol(allcolor[allcolorindex].themecolor[gindex])


          var nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].textcolor[(gindex)]
          if (gtype === 'imagecolorgroup') {
            nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].textcolor[(gindex - 1)]
            if (gindex === 0) {
              nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].imgtextcolor
            }
          }
          $('.color[fid="' + $(this).attr('btnid') + '"] .rightbar,.color[fid="' + $(this).attr('btnid') + '"] .arrow,.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar').attr('txtcolor', nwcol)

          var cfl = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].content[(gindex)]
          if (gtype === 'imagecolorgroup') {
            var cfl = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].content[(gindex - 1)]
          }
          if (getCookie('colorfav2').indexOf('&' + cfl) > -1) {
            $('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' }).attr('class', 'favorite')
          }
          else {
            $('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorite.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' }).attr('class', 'favorite')
          }
        }
      });

      $('.arrow-right[btnid="' + allcolor[i].id + '"]').click(function (evt) {
        evt.stopPropagation();
        usagepoint('group_arrow_right', '+1')

        var gjson = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))]
        var gtype = gjson.type
        var gindex = parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index'))
        var gindexmax = (gjson.content.length - 1)
        if (gtype === 'imagecolorgroup') {
          gindexmax = (gjson.content.length)
        }
        if (gindex < gindexmax) {
          gindex += 1
          $('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index', gindex)
          $('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').attr('sl', '0')
          $('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').eq(gindex).attr('sl', '1')

          $('.color[fid="' + $(this).attr('btnid') + '"] .colorbox').css({ 'transform': 'translateX(calc(var(--ft-window-width) * ' + gindex + ' * -1))', 'transition': '0.3s' })
          var allcolorindex = parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))
          setthemecol(allcolor[allcolorindex].themecolor[gindex])



          var nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].textcolor[(gindex)]
          if (gtype === 'imagecolorgroup') {
            var nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].textcolor[(gindex - 1)]

            if (gindex === 0) {
              nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].imgtextcolor
            }
          }
          $('.color[fid="' + $(this).attr('btnid') + '"] .rightbar,.color[fid="' + $(this).attr('btnid') + '"] .arrow,.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar').attr('txtcolor', nwcol)

          var cfl = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].content[(gindex)]
          if (gtype === 'imagecolorgroup') {
            var cfl = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].content[(gindex - 1)]
          }
          if (getCookie('colorfav2').indexOf('&' + cfl) > -1) {
            $('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' }).attr('class', 'favorite')
          }
          else {
            $('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorite.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' }).attr('class', 'favorite')
          }
        }
      });
      $('.share[btnid="' + allcolor[i].id + '"]').click(function (evt) {
        evt.stopPropagation();
        usagepoint('share', '+1')
        var fidtt = $(this).attr('btnid')
        var fidindex = parseInt($('.color[fid="' + fidtt + '"]').attr('i'))
        var shareurltt = allcolor[fidindex].shareurl
        if (navigator.share) {
          navigator.share({
            title: 'Colors',
            url: shareurltt
          }).then(() => {
            //ok
          })
            .catch(console.error);
        } else {
          shareDialog.classList.add('is-open');
        }
      });



      $('.options[btnid="' + allcolor[i].id + '"]').click(function (evt) {
        evt.stopPropagation();
        usagepoint('open_option', '+1')

        var fidtt = $(this).attr('btnid')
        var fidindex = parseInt($('.color[fid="' + fidtt + '"]').attr('i'))
        var fidgroupindex = parseInt($('.color[fid="' + fidtt + '"]').attr('group-index'))
        var fytype = allcolor[fidindex].type
        var listcc = 0
        $('.optionlist').attr('f', fidtt)
        $('.optionlist li[f="2"]').css({ 'display': 'none' })
        if (fytype === 'color') {
          listcc = 7
          $('.optionlist li[h="qrcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="picker"]').css({ 'display': 'flex' });
          $('.optionlist li[h="toimg"]').css({ 'display': 'flex' });
          $('.optionlist li[h="llgrd"]').css({ 'display': 'flex' });
          $('.optionlist li[h="mixgrd"]').css({ 'display': 'none' });
          $('.optionlist li[h="llpath"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copycolorcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copyoptions"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copysourceimageurl"]').css({ 'display': 'none' });
          $('.optionlist li[h="dlsourceimage"]').css({ 'display': 'none' });
          $('.optionlist li[h="addallfav"]').css({ 'display': 'none' });
          $('.optionlist li[h="shareacolor"]').css({ 'display': 'none' });


        }
        if (fytype === 'gradient') {
          listcc = 5
          $('.optionlist li[h="qrcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="picker"]').css({ 'display': 'none' });
          $('.optionlist li[h="toimg"]').css({ 'display': 'flex' });
          $('.optionlist li[h="llgrd"]').css({ 'display': 'none' });
          $('.optionlist li[h="mixgrd"]').css({ 'display': 'flex' });
          $('.optionlist li[h="llpath"]').css({ 'display': 'none' });
          $('.optionlist li[h="copycolorcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copyoptions"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copysourceimageurl"]').css({ 'display': 'none' });
          $('.optionlist li[h="dlsourceimage"]').css({ 'display': 'none' });
          $('.optionlist li[h="addallfav"]').css({ 'display': 'none' });
          $('.optionlist li[h="shareacolor"]').css({ 'display': 'none' });
        }
        if (fytype === 'path') {
          listcc = 2
          $('.optionlist li[h="qrcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="picker"]').css({ 'display': 'none' });
          $('.optionlist li[h="toimg"]').css({ 'display': 'flex' });
          $('.optionlist li[h="llgrd"]').css({ 'display': 'none' });
          $('.optionlist li[h="mixgrd"]').css({ 'display': 'none' });
          $('.optionlist li[h="llpath"]').css({ 'display': 'none' });
          $('.optionlist li[h="copycolorcode"]').css({ 'display': 'none' });
          $('.optionlist li[h="copyoptions"]').css({ 'display': 'none' });
          $('.optionlist li[h="copysourceimageurl"]').css({ 'display': 'none' });
          $('.optionlist li[h="dlsourceimage"]').css({ 'display': 'none' });
          $('.optionlist li[h="addallfav"]').css({ 'display': 'none' });
          $('.optionlist li[h="shareacolor"]').css({ 'display': 'none' });
        }
        if (fytype === 'imagecolorgroup') {
          listcc = 4
          $('.optionlist li[h="qrcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="picker"]').css({ 'display': 'none' });
          $('.optionlist li[h="toimg"]').css({ 'display': 'none' });
          $('.optionlist li[h="llgrd"]').css({ 'display': 'none' });
          $('.optionlist li[h="mixgrd"]').css({ 'display': 'none' });
          $('.optionlist li[h="llpath"]').css({ 'display': 'none' });
          $('.optionlist li[h="copycolorcode"]').css({ 'display': 'none' });
          $('.optionlist li[h="copyoptions"]').css({ 'display': 'none' });
          $('.optionlist li[h="copysourceimageurl"]').css({ 'display': 'flex' });
          $('.optionlist li[h="dlsourceimage"]').css({ 'display': 'flex' });
          $('.optionlist li[h="addallfav"]').css({ 'display': 'flex' });
          $('.optionlist li[h="shareacolor"]').css({ 'display': 'none' });
          if (!(fidgroupindex === 0)) {
            listcc += 6
            $('.optionlist li[h="llgrd"]').css({ 'display': 'flex' });
            $('.optionlist li[h="llpath"]').css({ 'display': 'flex' });
            $('.optionlist li[h="shareacolor"]').css({ 'display': 'flex' });
            $('.optionlist li[h="copycolorcode"]').css({ 'display': 'flex' });
            $('.optionlist li[h="copyoptions"]').css({ 'display': 'flex' });
            $('.optionlist li[h="toimg"]').css({ 'display': 'flex' });
          }

        }
        if (fytype === 'colorgroup') {
          listcc = 9
          $('.optionlist li[h="qrcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="picker"]').css({ 'display': 'flex' });
          $('.optionlist li[h="toimg"]').css({ 'display': 'flex' });
          $('.optionlist li[h="llgrd"]').css({ 'display': 'flex' });
          $('.optionlist li[h="mixgrd"]').css({ 'display': 'none' });
          $('.optionlist li[h="llpath"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copycolorcode"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copyoptions"]').css({ 'display': 'flex' });
          $('.optionlist li[h="copysourceimageurl"]').css({ 'display': 'none' });
          $('.optionlist li[h="dlsourceimage"]').css({ 'display': 'none' });
          $('.optionlist li[h="addallfav"]').css({ 'display': 'flex' });
          $('.optionlist li[h="shareacolor"]').css({ 'display': 'flex' });
        }

        $('.optionlist').css({ '--b-bottom-height': 'calc(' + $('.bottom').height() + 'px + var(--ot-bottom-height))', '--b-option-list': listcc, 'display': 'block', 'opacity': '0', 'transition': '0.3s' /*,'transform':'translateX(var(--ot-translateX-offset))'*/ });
        $('.optionlist-mask').css({ 'display': 'block', 'transition': '0.3s' });
        setTimeout(function () {
          $('.optionlist').css({ 'transform': 'translateY(var(--ot-translateY-offset)) translateX(var(--ot-translateX-offset))', 'opacity': '1' });
          $('.optionlist-mask').css({ 'opacity': '1' });
        }, 1);
      });

      $('.favorite[btnid="' + allcolor[i].id + '"]').click(function (evt) {
        evt.stopPropagation();
        usagepoint('favorite', '+1')

        var fidtt = $(this).attr('btnid')
        var gindexff = parseInt($('.color[fid="' + fidtt + '"]').attr('group-index'))
        var fidindex = parseInt($('.color[fid="' + fidtt + '"]').attr('i'))
        var contentss = allcolor[fidindex].content
        var contentindex = 0
        var colorstr = contentss[contentindex]
        var coltype = allcolor[fidindex].type

        //gg
        opensou = gup('open')

        //ggg

        var favtdpromptdelaytime = 1;
        if (coltype === "color") {
          if (getCookie('colorfav2').indexOf('&' + colorstr) != -1) {
            $('.favorite[btnid="' + fidtt + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' }).attr('class', 'favorite')
          }
          else {
            setcookie('colorfav2', getCookie('colorfav2') + '&' + colorstr)
            if (opensou === 'recommend' || opensou === 'trend') {

            }
            else {
              if (localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
                var favrecommendforms = $.ajax({ url: "https://docs.google.com/forms/d/e/1FAIpQLSeMGuvbZSK1mqORhroslYL_j1yCJ0WLvw2vIqk9_LpCmAYj5Q/formResponse?usp=pp_url&entry.450237995=%23" + colorstr.replaceAll('#', ''), async: true });
                var colforms_col = hexToRgb(colorstr)
                colforms_col['t'] = textcol(colforms_col.r, colforms_col.g, colforms_col.b)
                colforms_col['t'] = (colforms_col['t'] === '#000000') ? 0 : 1
                var colrecommendforms = $.ajax({url: `https://docs.google.com/forms/d/e/1FAIpQLScegkAY9MNjcr8nUsiaPz1FI7-FhpZ1pkO-vwrqUflgEiyc6Q/formResponse?usp=pp_url&entry.685447124=${colforms_col.r}&entry.1305802136=${colforms_col.g}&entry.836753427=${colforms_col.b}&entry.1343187283=${colforms_col.t}`, async: true
                });
              }
            }
            if (String(localStorage.getItem('favanimation_v2')).length > 100) {
              $('.favorite[btnid="' + fidtt + '"]').attr('class', 'favorite favoriteanimation')
              favtdpromptdelaytime = 460;
            }
            else {
              $('.favorite[btnid="' + fidtt + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' });
            }

          }
        }
        if (coltype === "gradient") {
          if (getCookie('colorfav2').indexOf('&li]' + contentss[0] + ']' + contentss[1] + ']' + contentss[2]) != -1) {
            $('.favorite[btnid="' + fidtt + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' }).attr('class', 'favorite')
          }
          else {
            if (opensou === 'recommend' || opensou === 'trend') {

            }
            else {
              if (localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
                var favrecommendforms = $.ajax({ url: 'https://docs.google.com/forms/d/e/1FAIpQLScLxMmjmZNWrv7yyYazyAkuxp0eQAaN8jkYgx1I7BlXQWA4dg/formResponse?usp=pp_url&entry.1247563127=%23' + contentss[1].replaceAll('#', '') + '&entry.293943510=%23' + contentss[2].replaceAll('#', '') + '&entry.123365810=' + contentss[0], async: true });
              }
            }
            setcookie('colorfav2', getCookie('colorfav2') + '&li]' + contentss[0] + ']' + contentss[1] + ']' + contentss[2])

            if (String(localStorage.getItem('favanimation_v2')).length > 100) {
              $('.favorite[btnid="' + fidtt + '"]').attr('class', 'favorite favoriteanimation')
              favtdpromptdelaytime = 460;
            }
            else {
              $('.favorite[btnid="' + fidtt + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' });
            }

          }
        }
        //hhhh
        if (coltype === "imagecolorgroup" || coltype === "colorgroup") {
          if (coltype === 'colorgroup') {
            var cfystr = contentss[(gindexff)]
          }
          if (coltype === 'imagecolorgroup') {
            var cfystr = contentss[(gindexff - 1)]
          }

          if (!(cfystr === undefined)) {

            if (getCookie('colorfav2').indexOf('&' + cfystr) != -1) {
              $('.favorite[btnid="' + fidtt + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' }).attr('class', 'favorite')
            }
            else {
              setcookie('colorfav2', getCookie('colorfav2') + '&' + cfystr)
              if (opensou === 'recommend' || opensou === 'trend') {

              }
              else {
                if (localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
                  var favrecommendforms = $.ajax({ url: "https://docs.google.com/forms/d/e/1FAIpQLSeMGuvbZSK1mqORhroslYL_j1yCJ0WLvw2vIqk9_LpCmAYj5Q/formResponse?usp=pp_url&entry.450237995=%23" + cfystr.replaceAll('#', ''), async: true });
                }
              }
              if (String(localStorage.getItem('favanimation_v2')).length > 100) {
                $('.favorite[btnid="' + fidtt + '"]').attr('style', '').attr('class', 'favorite favoriteanimation')
                favtdpromptdelaytime = 460;
              }
              else {
                $('.favorite[btnid="' + fidtt + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' });
              }

            }



          }

        }
        //ggggg
        if (coltype === "path") {
          if (getCookie('colorfav2').indexOf('&pa]' + contentss[0] + ']' + contentss[1]) != -1) {
          }
          else {
            if (opensou === 'recommend' || opensou === 'trend') {

            }
            else {
              if (localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
                var favrecommendformsppw = $.ajax({ url: 'https://docs.google.com/forms/d/e/1FAIpQLSd4KLvL9x_6jhRCdst5eT0gGv91wO8e0yqa1lnnTGDzVHoS4A/formResponse?usp=pp_url&entry.669769670=%23' + contentss[0].replaceAll('#', '') + '&entry.2145134131=%23' + contentss[1].replaceAll('#', ''), async: true });
              }
            }
            setcookie('colorfav2', getCookie('colorfav2') + '&pa]' + contentss[0] + ']' + contentss[1])

            if (String(localStorage.getItem('favanimation_v2')).length > 100) {
              $('.favorite[btnid="' + fidtt + '"]').attr('style', '').attr('class', 'favorite favoriteanimation')
              favtdpromptdelaytime = 460;
            }
            else {
              $('.favorite[btnid="' + fidtt + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' });
            }

          }
        }

      });
      $('.color[fid="' + allcolor[i].id + '"]').click(function () {
        var this_id = $(this).attr('fid')
        if (!dbclick.hasOwnProperty($(this).attr('fid'))) {
          dbclick[this_id] =  [new Date().getTime()]
        }
        dbclick[this_id].push(new Date().getTime())
        if (dbclick[this_id].length >= 2) {
          if ((dbclick[this_id][dbclick[this_id].length - 1] - dbclick[this_id][(dbclick[this_id].length - 2)]) > 10 && (dbclick[this_id][dbclick[this_id].length - 1] - dbclick[this_id][(dbclick[this_id].length - 2)]) < 550) {
            $('.favorite[btnid="' + $(this).attr('fid') + '"]').click()
          }
        }
      });

      gtg += 1
    }
    $('.box').css({ 'height': 'calc(' + $('.box .color').length + ' * var(--ft-window-height))' });
  }
  function setsize() {
    $('#ft').html(':root{--ft-window-width:' + $('.container').width() + 'px;--ft-window-height:' + (window.innerHeight - $('.bottom').height()) + 'px;}')
  }
  function initialize() {
    if (!(isRunningStandalone())) {
      $('#iphonesafearea').html('')
    }
    setsize()
    if (localStorage.getItem('colorfav2') === null) {
      localStorage.setItem('colorfav2', '')
    }
    //addimagecolorcontentgroup()
    if (gup('s') === '1') {
      var thsid = 'c_' + genid('random')
      var sharedolor = atob(gup('c'))
      var sharecontent = {
        type: "color",
        group: false,
        content: [sharedolor],
        shareurl: 'https://erichsia7.github.io/colors/?s=1&c=' + gup('c') + '&r=' + genid('random'),
        id: thsid,
        textcolor: textcol(hexToRgb(sharedolor).r, hexToRgb(sharedolor).g, hexToRgb(sharedolor).b),
        themecolor: sharedolor
      };
      allcolor.push(sharecontent)
      //gform

      if (eval('sentcolors.' + thsid) === undefined) {
        var gformurl = 'https://docs.google.com/forms/d/e/1FAIpQLSdzcew5FPAcBdlH2mUbmZbpchdq1mYps9_32FXzWWCEMsSePQ/formResponse?usp=pp_url&entry.472720214=%23' + sharedolor.replaceAll('#', '') + '&entry.327016326=' + user_id
        $.ajax({ type: 'get', url: gformurl, dataType: 'text' })
        eval('sentcolors.' + thsid + ' = "1"')
      }
      else {

      }


      //gformend
    }
    if (gup('s') === '2') {
      var sharega = atob(gup('ga'))
      var sharegb = atob(gup('gb'))
      var sharecontent = {
        type: "gradient",
        group: false,
        content: [parseInt(gup('gdeg')), sharega, sharegb],
        shareurl: 'https://erichsia7.github.io/colors/?s=2&ga=' + gup('ga') + '&gb=' + gup('gb') + '&gdeg=' + gup('gdeg') + '&r=' + genid('random'),
        id: 'c_' + genid('random'),
        textcolor: textcol((hexToRgb(sharega).r + hexToRgb(sharegb).r) * .5, (hexToRgb(sharega).g + hexToRgb(sharegb).g) * .5, (hexToRgb(sharega).b + hexToRgb(sharegb).b) * .5),
        themecolor: rgbToHex(Math.floor((hexToRgb(sharega).r + hexToRgb(sharegb).r) * .5), Math.floor((hexToRgb(sharega).g + hexToRgb(sharegb).g) * .5), Math.floor((hexToRgb(sharega).b + hexToRgb(sharegb).b) * .5))
      };
      allcolor.push(sharecontent)
    }

    if (gup('s') === '3') {
      var patharr = [atob(gup('la')), atob(gup('lb'))]
      var txc = textcol((hexToRgb(patharr[0]).r + hexToRgb(patharr[1]).r) * .5, (hexToRgb(patharr[0]).g + hexToRgb(patharr[1]).g) * .5, (hexToRgb(patharr[0]).b + hexToRgb(patharr[1]).b) * .5)

      var path_datahtml = gtffim(patharr[0], patharr[1], window.innerWidth, (window.innerHeight - $('.bottom').height()))

      var content = {
        type: "path",
        group: false,
        content: patharr,
        path_data: path_datahtml,
        shareurl: 'https://erichsia7.github.io/colors/?s=3&la=' + gup('la') + '&lb=' + gup('lb') + '&r=' + genid('random'),
        id: 'c_' + genid('random'),
        textcolor: txc,
        themecolor: patharr[1]
      };
      allcolor.push(content)

    }
    if (gup('s') === '4') {
      var colorarr = atob(gup('grouplist')).split(',')
      var pictxc = atob(gup('pictx'))
      var coltxc = []
      var thcol = []
      thcol.push(atob(gup('pictm')))
      for (var j = 0; j < colorarr.length; j++) {
        var jrgb = hexToRgb(colorarr[j])
        var jtxc = textcol(jrgb.r, jrgb.g, jrgb.b)
        coltxc.push(jtxc)
        thcol.push(colorarr[j])
      }

      var content = {
        type: "imagecolorgroup",
        group: true,
        content: colorarr,
        image: {
          dataurl: 'https://picsum.photos/id/' + gup('picid') + '/256/256',
          hdurl: atob(gup('picurl')),
          source: atob(gup('picsou'))
        },
        shareurl: 'https://erichsia7.github.io/colors/?s=4&grouplist=' + gup('grouplist') + '&picid=' + gup('picid') + '&picurl=' + gup('picurl') + '&picsou=' + gup('picsou') + '&pictm=' + gup('pictm') + '&r=' + genid('random'),
        id: 'c_' + genid('random'),
        textcolor: coltxc,
        imgtextcolor: pictxc,
        themecolor: thcol
      };
      allcolor.push(content)


    }
    if (gup('s') === '5') {
      var colorarr = atob(gup('grouplist')).split(',')
      var txcol = []
      for (var j = 0; j < colorarr.length; j++) {
        var jrgb = hexToRgb(colorarr[j])
        var jtxc = textcol(jrgb.r, jrgb.g, jrgb.b)
        txcol.push(jtxc)
      }
      var content = {
        type: "colorgroup",
        group: true,
        content: colorarr,
        shareurl: 'https://erichsia7.github.io/colors/?s=5&grouplist=' + gup('grouplist') + '&r=' + genid('random'),
        id: 'c_' + genid('random'),
        textcolor: txcol,
        themecolor: colorarr
      };
      allcolor.push(content)
    }


    for (var i = 0; i < 2; i++) {
      addcolorcontent()
      addgradientcontent()
      addpathcontent()
      addcolorcontentgroup()
    }
  }

  function optionlistid() {
    return String($('.optionlist').attr('f'))
  }
  function closeoptionlist(evt) {
    if (!(evt === undefined)) {
      evt.stopPropagation();
    }
    $('.optionlist').css({ 'transform': 'translateY(calc((50px * var(--b-option-list)) + var(--ot-d-translateY))) translateX(var(--ot-translateX-offset))', 'opacity': '0' });
    $('.optionlist-mask').css({ 'opacity': '0' });
    setTimeout(function () {
      $('.optionlist,.optionlist-mask').css({ 'display': 'none', 'opacity': '0', 'transition': '0s' });
    }, 310);

  }

  function closeqrcodebox(evt) {
    if (!(evt === undefined)) {
      evt.stopPropagation();
    }
    $('.qrcodebox').css({ 'transform': 'translateY(calc(' + (55 + 300) + 'px + var(--ot-d-translateY))) translateX(var(--ot-translateX-offset))', 'opacity': '0' });
    $('.qrcode-mask').css({ 'opacity': '0' });
    setTimeout(function () {
      $('.qrcodebox,.qrcode-mask').css({ 'display': 'none', 'opacity': '0', 'transition': '0s' });
    }, 310);

  }
  function closetoimagebox(evt) {
    if (!(evt === undefined)) {
      evt.stopPropagation();
    }
    $('.toimagebox').css({ 'transform': 'translateY(calc(' + ($('.bottom').height() + 285) + 'px + var(--ot-d-translateY))) translateX(var(--ot-translateX-offset))', 'height': 'calc(' + ($('.bottom').height() + 285) + 'px + var(--ot-bottom-height) + 10px)', 'opacity': '0' });
    $('.toimage-mask').css({ 'opacity': '0' });
    setTimeout(function () {
      $('.toimagebox,.toimage-mask').css({ 'display': 'none', 'opacity': '0', 'transition': '0s' });
    }, 310);

  }


  function copytext(str) {
    usagepoint('copy_text', '+1')
    try {
      var textArea = document.createElement("textarea");
      textArea.value = str;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand("Copy");
      textArea.remove();
      $('body').prompt({ 'message': '已複製。' })
    }
    catch (e) {
      $('body').prompt({ 'message': '發生錯誤。' })

    }
  }
  function wwmdquery() {
    return window.matchMedia('(min-width: 650px)').matches
  }
  function setoptlistcss() {
    $('#optlistcss').html(':root{--ot-bottom-height:0px;--ot-translateY-offset:0px;--ot-translateX-offset:0px;--ot-bottom:0px;--ot-left:0px;--ot-d-translateY:0px;}@media screen and (min-width:650px){:root{--ot-bottom-height:' + ($('.bottom').height() * -1) + 'px;--ot-translateY-offset:50%;--ot-translateX-offset:-50%;--ot-bottom:50%;--ot-left:50%;--ot-d-translateY:50vh}}')
  }
  function addtofavorite(content) {
    var added = 0;
    var addte = content.length;
    var addno = 0;
    for (var f = 0; f < content.length; f++) {
      if (getCookie('colorfav2').indexOf('&' + content[f]) > -1) {
        addno += 1;
      }
      else {
        setcookie('colorfav2', getCookie('colorfav2') + '&' + content[f])
        added += 1;
      }
    }
    $('body').prompt({ 'message': '已新增' + added + '個顏色，重複' + addno + '個。' })
    if (added > 0) {
      usagepoint('add_to_favorite', '+' + added)
    }
  }
  $(document).ready(function () {
    initialize()
    setoptlistcss()
    printcolor()

    if (allcolor[0].type === 'imagecolorgroup') {
      setthemecol(allcolor[0].themecolor[0], 1)
    }
    else {
      setthemecol(allcolor[0].themecolor, 1)
    }


    $('.optionlist-mask').click(function (evt) {
      closeoptionlist(evt)
    });
    $('.qrcode-mask').click(function (evt) {
      closeqrcodebox(evt)
    })
    $('.toimage-mask').click(function (evt) {
      closetoimagebox(evt)
    })

    $('.bottom-btn').click(function () {
      var k = $(this).attr('u')
      if (k === 'home') {
        location.href = 'https://erichsia7.github.io/colors/?r=' + genid('random')
      }
      if (k === 'favorite') {
        location.href = 'https://erichsia7.github.io/colors/favorite/?r=' + genid('random')
      }
      if (k === 'option') {
        location.href = 'https://erichsia7.github.io/colors/option/?r=' + genid('random')
      }
      if (k === 'trend') {
        location.href = 'https://erichsia7.github.io/colors/trend/?r=' + genid('random')
      }
      if (k === 'more') {

      }
    });

    $('.optionlist li[h="qrcode"]').click(function (ev) {
      //qrcode
      usagepoint('qrcode', '+1')

      $('.qrcodebox').css({ 'display': 'block', 'opacity': '0', 'transition': '0.3s' /*,'transform':'translateX(var(--ot-translateX-offset))'*/ });
      $('.qrcode-mask').css({ 'display': 'block', 'transition': '0.3s' });
      setTimeout(function () {
        $('.qrcodebox').css({ 'transform': 'translateY(var(--ot-translateY-offset)) translateX(var(--ot-translateX-offset))', 'opacity': '1' });
        $('.qrcode-mask').css({ 'opacity': '1' });
      }, 1);


      var shareurlhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))].shareurl
      document.querySelector('.qrcodebx').innerHTML = '';
      var qrcode = new QRCode(document.querySelector('.qrcodebx'), {
        text: shareurlhh,
        width: 512,
        height: 512,
        colorDark: getComputedStyle(document.body).getPropertyValue('--qrcode-color-1a1a1a'),
        colorLight: getComputedStyle(document.body).getPropertyValue('--qrcode-color-fff'),
        correctLevel: QRCode.CorrectLevel.M
      });
      //qrcode end
      closeoptionlist(ev)
    })
    $('.optionlist li[h="picker"]').click(function (ev) {
      closeoptionlist(ev)
    })
    $('.optionlist li[h="toimg"]').click(function (ev) {
      closeoptionlist(ev)
      usagepoint('toimage', '+1')

      $('.toimagebox').css({ 'display': 'block', 'opacity': '0', 'transition': '0.3s', 'height': 'calc(' + ($('.bottom').height() + 285) + 'px + var(--ot-bottom-height) + 10px)' });
      $('.toimage-mask').css({ 'display': 'block', 'transition': '0.3s' });
      setTimeout(function () {
        $('.toimagebox').css({ 'transform': 'translateY(var(--ot-translateY-offset)) translateX(var(--ot-translateX-offset))', 'opacity': '1' });
        $('.toimage-mask').css({ 'opacity': '1' });
      }, 1);
      var cwidth = parseInt($('#toimageboxwidth').val()) || window.screen.width || window.innerWidth
      var cheight = parseInt($('#toimageboxheight').val()) || window.screen.height || window.innerHeight
      var cscale = parseFloat($('#toimageboxscale').val()) || 1

      $('#toimageboxwidth').val(cwidth)
      $('#toimageboxheight').val(cheight)
      $('#toimageboxscale').val(cscale)

    })
    $('.toimage-download').click(function (ev) {
      usagepoint('toimage_download', '+1')

      var aindex = parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))
      var gindex = parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index'))
      var jsonhh = allcolor[aindex]
      var cwidth = parseInt($('#toimageboxwidth').val()) || window.screen.width || window.innerWidth
      var cheight = parseInt($('#toimageboxheight').val()) || window.screen.height || window.innerHeight
      var cscale = parseFloat($('#toimageboxscale').val()) || 1

      toimage(jsonhh, gindex, cwidth, cheight, cscale)
    })
    $('.optionlist li[h="llgrd"]').click(function (ev) {
      closeoptionlist(ev)
      usagepoint('ll_gradient', '+1')

      //llgrd
      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]
      var contenthh = jsonhh.content[0]
      if (jsonhh.type === 'imagecolorgroup') {
        var contenthh = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')) - 1)]
        if (contenthh === undefined) {
          return ''
        }
      }
      if (jsonhh.type === 'colorgroup') {
        var contenthh = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')))]
        if (contenthh === undefined) {
          return ''
        }
      }

      var lgd = getligrd(contenthh)
      var lgdshareurl = 'https://erichsia7.github.io/colors/?s=2&ga=' + btoa(lgd[1]) + '&gb=' + btoa(lgd[2]) + '&gdeg=' + lgd[0] + '&r=' + genid('random')
      setTimeout(function () {
        location.href = lgdshareurl
      }, 300)
      //llgrd end
    })
    $('.optionlist li[h="mixgrd"]').click(function (ev) {
      //mixgrd
      closeoptionlist(ev)
      usagepoint('mix_gradient', '+1')

      var contenthh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))].content
      var mixcolor = rgbToHex(Math.floor((hexToRgb(contenthh[1]).r + hexToRgb(contenthh[2]).r) * .5), Math.floor((hexToRgb(contenthh[1]).g + hexToRgb(contenthh[2]).g) * .5), Math.floor((hexToRgb(contenthh[1]).b + hexToRgb(contenthh[2]).b) * .5))
      var mixcolorshareurl = 'https://erichsia7.github.io/colors/?s=1&c=' + btoa(mixcolor) + '&r=' + genid('random')
      setTimeout(function () {
        location.href = mixcolorshareurl
      }, 300)
      //mixgrd end
    })
    $('.optionlist li[h="llpath"]').click(function (ev) {
      closeoptionlist(ev)
      usagepoint('ll_path', '+1')

      //llpath
      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]
      var contenthh = jsonhh.content[0]
      if (jsonhh.type === 'imagecolorgroup') {
        var contenthh = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')) - 1)]
        if (contenthh === undefined) {
          return ''
        }
      }
      if (jsonhh.type === 'colorgroup') {
        var contenthh = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')))]
        if (contenthh === undefined) {
          return ''
        }
      }

      var llpath = getligrd(contenthh)
      var llpathshareurl = 'https://erichsia7.github.io/colors/?s=3&la=' + btoa(llpath[1]) + '&lb=' + btoa(llpath[2]) + '&r=' + genid('random')

      setTimeout(function () {
        location.href = llpathshareurl
      }, 300)
      //llpath end


    })
    $('.optionlist li[h="copycolorcode"]').click(function (ev) {
      closeoptionlist(ev)
      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]
      var ctext = ''
      if (jsonhh.type === 'color') {
        ctext = jsonhh.content[0]
      }
      if (jsonhh.type === 'imagecolorgroup') {
        var ctext = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')) - 1)]
        if (ctext === undefined) {
          return ''
        }
      }
      if (jsonhh.type === 'colorgroup') {
        var ctext = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')))]
        if (ctext === undefined) {
          return ''
        }
      }
      if (jsonhh.type === 'gradient') {
        var ctext = 'linear-gradient(' + jsonhh.content[0] + 'deg ,' + jsonhh.content[1] + ' ,' + jsonhh.content[2] + ')'
      }
      copytext(ctext)
    })
    $('.optionlist li[h="copyoptions"]').click(function (ev) {
      //closeoptionlist(ev)
      ev.stopPropagation();

      $('.optionlist li[f="1"]').css({ 'display': 'none' })
      $('.optionlist li[f="2"]').css({ 'display': 'flex' })
      var listcc = 5
      $('.optionlist').css({ 'transform': 'translateX(var(--ot-translateX-offset)) translateY(var(--ot-translateY-offset))', '--b-bottom-height': 'calc(' + ($('.bottom').height()) + 'px + var(--ot-bottom-height))', '--b-option-list': listcc, 'display': 'block', 'opacity': '1', 'transition': '0.3s' });

    })
    //copyoption
    $('.optionlist li[f="2"]').click(function (ev) {
      //ev.stopPropagation();
      closeoptionlist(ev)
      var copyff = $(this).attr('h')
      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]
      var hexarr = jsonhh.content
      var ctarr = []
      var ctextff = ''
      if (copyff === 'copy-hex') {
        for (var g = 0; g < hexarr.length; g++) {
          if (String(hexarr[g]).indexOf('#') > -1) {
            ctarr.push(hexarr[g])
          }
        }
      }
      if (copyff === 'copy-rgb') {
        for (var g = 0; g < hexarr.length; g++) {
          if (String(hexarr[g]).indexOf('#') > -1) {
            var rgbff = hexToRgb(hexarr[g])
            ctarr.push('rgb(' + rgbff.r + ',' + rgbff.g + ',' + rgbff.b + ')')
          }
        }
      }
      if (copyff === 'copy-hsl') {
        for (var g = 0; g < hexarr.length; g++) {
          if (String(hexarr[g]).indexOf('#') > -1) {
            var rgbff = hexToRgb(hexarr[g])
            var hslff = rgbtohsl(rgbff.r, rgbff.g, rgbff.b)
            ctarr.push('hsl(' + Math.floor(hslff.h) + ',' + Math.floor(hslff.s) + ',' + Math.floor(hslff.l) + ')')
          }
        }

      }
      if (copyff === 'copy-hsv') {
        for (var g = 0; g < hexarr.length; g++) {
          if (String(hexarr[g]).indexOf('#') > -1) {
            var rgbff = hexToRgb(hexarr[g])
            var hsvff = rgbtohsv(rgbff.r, rgbff.g, rgbff.b)
            ctarr.push('hsv(' + Math.floor(hsvff.h) + ',' + Math.floor(hsvff.s) + ',' + Math.floor(hsvff.v) + ')')

          }
        }


      }
      if (copyff === 'copy-cmyk') {
        for (var g = 0; g < hexarr.length; g++) {
          if (String(hexarr[g]).indexOf('#') > -1) {
            var rgbff = hexToRgb(hexarr[g])
            var cmykff = rgbtocmyk(rgbff.r, rgbff.g, rgbff.b)
            ctarr.push('cmyk(' + Math.floor(cmykff.c) + ',' + Math.floor(cmykff.m) + ',' + Math.floor(cmykff.y) + ',' + Math.floor(cmykff.k) + ')')

          }
        }



      }

      if (jsonhh.type === 'color') {
        ctextff = ctarr[0]
      }
      if (jsonhh.type === 'gradient') {
        ctextff = 'linear-gradient(' + jsonhh.content[0] + 'deg ,' + ctarr[0] + ' ,' + ctarr[1] + ')'
      }
      if (jsonhh.type === 'imagecolorgroup') {
        ctextff = ctarr[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')) - 1)]
        if (ctextff === undefined) {
          return ''
        }
      }
      if (jsonhh.type === 'colorgroup') {
        ctextff = ctarr[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')))]
        if (ctextff === undefined) {
          return ''
        }
      }

      copytext(ctextff)

    });
    //copyoption end
    $('.optionlist li[h="copysourceimageurl"]').click(function (ev) {
      closeoptionlist(ev)
      usagepoint('copy_source_image_url', '+1')

      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]
      var sourceurl = jsonhh.image.source
      copytext(sourceurl)
    })
    $('.optionlist li[h="dlsourceimage"]').click(function (ev) {
      closeoptionlist(ev)
      usagepoint('download_source_image', '+1')

      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]
      var downloadurl = jsonhh.image.hdurl
      var downloadname = String(jsonhh.image.source).replaceAll('https://', '').replaceAll('.', '-').replaceAll('/', '_')
      $('body').prompt({ 'message': '圖片下載中⋯⋯' })
      $.ajax({
        type: 'GET', url: downloadurl, async: true, cache: false, xhrFields: { responseType: 'blob' }, success: function (data) {
          $('body').prompt({ 'message': '圖片下載完成。' })
          var ggurl = window.URL || window.webkitURL;

          var a = document.createElement('a');
          var filename = downloadname + '.jpg';
          a.href = ggurl.createObjectURL(data);
          a.download = filename;
          a.click();
          a.remove();
        }
      });


    })
    $('.optionlist li[h="addallfav"]').click(function (ev) {
      closeoptionlist(ev)
      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]
      if (jsonhh.type === 'imagecolorgroup' || jsonhh.type === 'colorgroup') {
        addtofavorite(jsonhh.content)
      }
      $('.favorite[btnid="' + jsonhh.id + '"]').css({ 'background': 'url(https://erichsia7.github.io/colors/favorited.png)', 'background-size': '35px', 'background-position': 'center', 'background-repeat': 'no-repeat' });
    })
    $('.optionlist li[h="shareacolor"]').click(function (ev) {
      closeoptionlist(ev)
      usagepoint('share_a_color', '+1')
      var jsonhh = allcolor[parseInt($('.color[fid="' + optionlistid() + '"]').attr('i'))]

      if (jsonhh.type === 'imagecolorgroup' || jsonhh.type === 'colorgroup') {
        if (jsonhh.type === 'imagecolorgroup') {
          var ctext = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')) - 1)]
        }
        if (jsonhh.type === 'colorgroup') {
          var ctext = jsonhh.content[(parseInt($('.color[fid="' + optionlistid() + '"]').attr('group-index')))]
        }

        if (ctext === undefined) {
          return ''
        }
        var ctshareurl = 'https://erichsia7.github.io/colors/?s=1&c=' + btoa(ctext) + '&r=' + genid('random')
        if (navigator.share) {
          navigator.share({
            title: 'Colors',
            url: ctshareurl
          }).then(() => {
            //ok
          })
            .catch(console.error);
        } else {
          shareDialog.classList.add('is-open');
        }

      }
      else {
        return ''
      }

    })


    $(window).resize(function () {
      //setsize()
      //location.reload()
    });
  });
  var lastcolor
  var stopload = 0
  let mouseX = 0
  let mouseY = 0
  let offsetX = 0
  let offsetY = 0
  let isDown = false
  var div = document.querySelector(".box");
  var imagect = 2
  div.addEventListener('touchstart', function (e) {
    isDown = true
    mouseX = e.pageX
    mouseY = e.pageY
    document.addEventListener('touchmove', move)
  });

  document.addEventListener('touchend', function (e) {
    if (isDown) {
      offsetX += e.pageX - mouseX
      offsetY += e.pageY - mouseY
    }
    isDown = false
    document.removeEventListener('mousemove', move)


    var ns = Math.round(parseInt(div.getAttribute('dy')) / $('.container').height()) * $('.container').height()

    if (Math.abs(parseInt(div.getAttribute('dy')) - parseInt(div.getAttribute('fy'))) > ($('.container').height() * 0.2)) {

      if (parseInt(div.getAttribute('dy')) - parseInt(div.getAttribute('fy')) < 0) {
        //down
        usagepoint('slide_down', '+1')
        ns = Math.ceil(Math.abs(parseInt(div.getAttribute('dy')) / $('.container').height())) * -1 * $('.container').height()

      }
      else {
        //up
        usagepoint('slide_up', '+1')

        var ns = Math.ceil(parseInt(div.getAttribute('dy')) / $('.container').height()) * $('.container').height()

      }
    }
    else {
      ns = parseInt(div.getAttribute('fy'))
    }

    var ws = parseInt(div.getAttribute('dy')) - ns
    offsetY -= ws
    div.style.transform = 'translateY(' + (ns) + 'px)';
    div.style.transition = '0.3s'
    div.setAttribute('dy', (ns))
    var nowcolorindex = Math.abs(Math.round(parseInt(document.querySelector(".box").getAttribute('dy')) / $('.container').height()))
    var nowcolorjson = allcolor[nowcolorindex]

    if (!(nowcolorjson === undefined) && !(nowcolorjson === null)) {
      history.pushState(null, null, nowcolorjson.shareurl);
      if (nowcolorjson.type === 'imagecolorgroup' || nowcolorjson.type === 'colorgroup') {
        var nowgroupindex = parseInt($('.color[fid="' + nowcolorjson.id + '"]').attr('group-index'))
        setthemecol(nowcolorjson.themecolor[nowgroupindex], 1)
      }
      else {
        setthemecol(nowcolorjson.themecolor, 1)
      }
      if (nowcolorjson.type === 'color') {
        if (eval('sentcolors.' + nowcolorjson.id) === undefined) {
          var gformurl = 'https://docs.google.com/forms/d/e/1FAIpQLSdzcew5FPAcBdlH2mUbmZbpchdq1mYps9_32FXzWWCEMsSePQ/formResponse?usp=pp_url&entry.472720214=%23' + nowcolorjson.content[0].replaceAll('#', '') + '&entry.327016326=' + user_id
          $.ajax({ type: 'get', url: gformurl, dataType: 'text' })
          eval('sentcolors.' + nowcolorjson.id + ' = "1"')
        }
        else {

        }
      }
    }

    if (Math.abs(Math.floor(parseInt(div.getAttribute('dy')) / $('.container').height())) > allcolor.length - 3) {

      addcolorcontent()
      addgradientcontent()
      addpathcontent()
      addcolorcontentgroup()
      imagect -= 1
      if (imagect < 0) {
        addimagecolorcontentgroup()
        imagect = 2
      }

      printcolor()
      /*
    if(allcolor.length > 10 && allcolor.length < 12) {
    addcolorcontent()
    lastcolor = allcolor[allcolor.length-1]
    stopload = 1
    }
    if(Math.abs(Math.floor(parseInt(div.getAttribute('dy'))/$('.container').height())) >= (allcolor.length-1)) {
    setTimeout(function(){ 
    location.href = 'https://erichsia7.github.io/colors/test5.html?db=1&dbjson=' + encodeURIComponent(JSON.stringify(lastcolor))
    },300);
    }
    */

    }
    div.setAttribute('fy', (ns))




  });


  function move(e) {
    if (isDown) {
      const dx = e.pageX - mouseX
      const dy = e.pageY - mouseY
      // const dy = e.pageY
      if ((offsetY + dy) <= 0) {


        div.style.transform = 'translateY(' + (offsetY + dy) + 'px)';
        div.setAttribute('dy', (offsetY + dy))
        div.style.transition = '0s'
      }
      //ggg


    }
  }



  //option touch evt

  var divooo = document.querySelector('.box');
  var divooolt = 0
  divooo.addEventListener('touchstart', function (e) {
    divooolt = setTimeout(function () {
      $('.options[btnid="' + allcolor[Math.abs(parseInt(document.querySelector(".box").getAttribute('dy')) / $('.container').height())].id + '"]').click()
    }, 500);
  });

  divooo.addEventListener('touchend', function (e) {
    clearTimeout(divooolt)
  });
  //option touch evt end


  $(document).ready(function () {
    if (localStorage.getItem('first_load') === "1") {
      var googlefontloadtime = new Date().getTime();
      if (googlefontloadtime - parseInt(localStorage.getItem('googlefontNotoSansTCloaded')) < 2592000000) {
        $('body').append('<style>' + localStorage.getItem('googlefontNotoSansTC') + '</style>');
      }
      else {
        $.ajax({
          type: 'get', url: "https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap", dataType: 'text', success: function (e) {
            var googlefontloadtimedd = new Date().getTime();
            localStorage.setItem('googlefontNotoSansTC', e); localStorage.setItem('googlefontNotoSansTCloaded', googlefontloadtimedd);
            $('body').append('<style>' + e + '</style>');
          }
        });
      }
      //fv

      var favanimationloadid = 'qi63fd57x934nr7i';

      if (favanimationloadid === localStorage.getItem('favanimationloadid_v2')) {
        $('body').append('<style>.favoriteanimation{background:url(' + localStorage.getItem('favanimation_v2') + ');background-size:55px 5500px;background-repeat:no-repeat;background-position:top 0px left 0px;animation-name:fav;animation-duration:.46s;animation-timing-function:steps(99,jump-start);animation-fill-mode:forwards}@keyframes fav{0%{background-position:top 0px left 0px}100%{background-position:top -5445px left 0px}}</style>');
      }
      else {
        $.ajax({
          type: 'get', url: "https://erichsia7.github.io/colors/favorite_animation_png_3_v2_128_base64.txt", dataType: 'text', success: function (e) {
            var favanimationloadtimedd = new Date().getTime();
            localStorage.setItem('favanimation_v2', e);
            localStorage.setItem('favanimationloadid_v2', favanimationloadid);
            $('body').append('<style>.favoriteanimation{background:url(' + e + ');background-size:55px 5500px;background-repeat:no-repeat;background-position:top 0px left 0px;animation-name:fav;animation-duration:.46s;animation-timing-function:steps(99,jump-start);animation-fill-mode:forwards}@keyframes fav{0%{background-position:top 0px left 0px}100%{background-position:top -5445px left 0px}}</style>');
          }
        });
      }


      var moreanimationloadid = 'chaq4tdiy3tqqevs';

      if (moreanimationloadid === localStorage.getItem('moreanimationloadid')) {
        $('body').append('<style>.moreanimation{background:rgba(245,245,245,0.8) url(' + localStorage.getItem('moreanimation') + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:mor;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}.moreanimation-f{background:rgba(245,245,245,0.8) url(' + localStorage.getItem('moreanimation') + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:morc;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}@keyframes mor{0%{background-position:top 0 left 0}100%{background-position:top -4815px left 0}}@keyframes morc{0%{background-position:top -4815px left 0}100%{background-position:top 0 left 0}}</style>');
      }
      else {
        $.ajax({
          type: 'get', url: "https://erichsia7.github.io/colors/more_animation_base64_1_128.txt", dataType: 'text', success: function (e) {
            var moreanimationloadtime = new Date().getTime();
            localStorage.setItem('moreanimation', e);
            localStorage.setItem('moreanimationloadid', moreanimationloadid);
            $('body').append('<style>.moreanimation{background:rgba(245,245,245,0.8) url(' + e + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:mor;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}.moreanimation-f{background:rgba(245,245,245,0.8) url(' + e + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:morc;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}@keyframes mor{0%{background-position:top 0 left 0}100%{background-position:top -4815px left 0}}@keyframes morc{0%{background-position:top -4815px left 0}100%{background-position:top 0 left 0}}</style>');
          }
        });
      }



      //f
    }
    else {
      localStorage.setItem('first_load', '1')
    }
  });
</script>