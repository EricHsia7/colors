<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Colors Card Edit</title>
 <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
<style>

@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400,500,700&display=swap');
.color_textcard {
position:fixed;
  top:50%;
  left:50%;
  width:85%;
  height:90%;
  max-width:400px;
  max-height:80%;
  background:linear-gradient(129deg ,#3abc79 0%,#3dd3e2 100%);
  overflow:scroll;
  color:#000;
  font-weight:bold;
  font-family: 'Noto Sans TC', sans-serif;
  font-size:1.6rem;
  border-radius:20px;
  transform:translate(-50%,-50%);
  box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.08);
  display:block;
}
.color_textcard textarea {
border:none;
  background:rgba(0, 0, 0, 0);
  width:calc(100% - 30px);
  min-height:2.3rem;
  max-height:calc(100% - 30px);
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  padding:0px;
  margin:0px;
  color:#fff;
  font-weight:500;
  font-family: 'Noto Sans TC', sans-serif;
  font-size:2rem;
  text-align: center;
  line-height:2.3rem;
  outline:none; -webkit-tap-highlight-color:rgba(0,0,0,0);
  overflow:hidden;
}

.color_textcard textarea::placeholder {
  color: #fff;
  opacity: 0.8;
}
.color_textcard span {
  border:none;
  background:rgba(0, 0, 0, 0);
  width:calc(100% - 30px);
  max-height:calc(100% - 30px);
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  padding:0px;
  margin:0px;
  color:rgba(0, 0, 0, 0);
  font-weight:500;
  font-family: 'Noto Sans TC', sans-serif;
  font-size:2rem;
  text-align: center;
  line-height:2.3rem;
  word-break: break-all;
}

</style>
</head>
<body>
<div class="color_textcard">
  <span>s</span>
  <textarea placeholder="輸入文字"></textarea>
</div>
  <script>
  var getUrlString = location.href;
var url = new URL(getUrlString);
var sharecolor = url.searchParams.get('s') ;
var shcolor = atob(url.searchParams.get('c')) ;
  var gc1 = atob(url.searchParams.get('ga')) ;
  var gc2 = atob(url.searchParams.get('gb')) ;
  var gcdeg = url.searchParams.get('gdeg') ;
function componentToHex(c) {
  var hex = c.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}

function rgbToHex(r, g, b) {
  return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
}
function hexToRgb(hex) {
  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : null;
}

if(sharecolor === "3") {    if((hexToRgb(gc1).r+hexToRgb(gc1).g+hexToRgb(gc1).b+hexToRgb(gc2).r+hexToRgb(gc2).g+hexToRgb(gc2).b)/6 > 128) {
      $('.color_textcard textarea').css({'color':'#000'});
    }
    else {
      $('.color_textcard textarea').css({'color':'#fff'});
    }
    var grd = 'linear-gradient(' + gcdeg + 'deg ,' +  gc1 + ' 0%,' +  gc2 + ' 100%)' ;
    $('.color_textcard').fadeIn(222);
    $('.color_textcard').css({'background':grd});
    $('#rgb').val(grd).attr('shga',gc1).attr('shgb',gc2).attr('shdeg',gcdeg);
  }

function resizecard() {
 $('.color_textcard').height($('.color_textcard').width()*1.3);
  if($('.color_textcard').width() > $('.color_textcard').height()/1.3) {
 //$('.color_textcard').width($('.color_textcard').height()/1.3)
  }
  else {
 $('.color_textcard').height($('.color_textcard').width()*1.3)
  }
}
$( window ).resize(function() {
resizecard();
});
resizecard();



$('.color_textcard textarea').val(decodeURIComponent(atob(url.searchParams.get('t'))))

function ReplaceAll(strOrg,strFind,strReplace)
{
    return strOrg.replace(new RegExp(strFind,"g"),strReplace);
}

setInterval(function() {
  $('.color_textcard span').html(ReplaceAll($('.color_textcard textarea').val(),"\n","<br><z>&nbsp</z>"))
    $('.color_textcard textarea').height($('.color_textcard span').height())
  },1)
  </script>

</body>
</html>
