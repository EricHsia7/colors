<!DOCTYPE html>
<html lang="zh-Hant">
<meta charset="UTF-8">
<title>Colors</title>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-342D6M2MKX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
gtag('config', 'G-342D6M2MKX');
</script>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=0" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js?1"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
<link href="https://erichsia7.github.io/colors/c2_512.png" sizes="512x512" rel="apple-touch-icon-precomposed" />
<meta property="og:image" content="https://erichsia7.github.io/colors/og/colors_og_image_v1.jpeg" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff" p="light">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1a1a1a" p="dark">
<link type="image/x-icon" href="https://erichsia7.github.io/colors/c2_ico.ico" rel="icon" />
<link type="image/x-icon" href="https://erichsia7.github.io/colors/c2_ico.ico" rel="bookmark" />
<link type="image/x-icon" href="https://erichsia7.github.io/colors/c2_ico.ico" rel="shortcut icon" />
<link rel="manifest" href="https://erichsia7.github.io/colors/manifest.json?20220209_198de2381adfe">
  <style>
:root {
     --fx-bth:calc(55px + env(safe-area-inset-bottom))
    }
	  * {
-webkit-appearance:none;
outline:none;
-webkit-tap-highlight-color:rgba(0,0,0,0);
	  }
  body {
margin:0px;
  padding:0px
}
.bottom{
	height:calc(55px + env(safe-area-inset-bottom));
	width:100%;
	position:fixed;
	left:0;
	bottom:0;
	background:#ffffff;
	box-shadow:0 0 10px 2px rgba(0,0,0,0.045);
	background-size:var(--b-size);
	background-repeat:repeat;
	-webkit-user-select:none;
	display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-gap: 0px;
		}
.bottom-btn {
height:55px;
	display: flex;
  justify-content: center;
  align-items: center;
		}
.bottom-btn svg {
	width:30px;
	height:30px;
		}
.container {
  position:fixed;
  top:0px;
  left:0px;
  width:100%;
  height:var(--ft-window-height);
  overflow:hidden;
  -webkit-user-select: none;
}
.box {
  position:absolute;
  top:0px;
  left:0px;
  width:100%;
  height:100%;
  will-change:transform;
	-webkit-user-select: none;
}
.color {
  position:relative;
  width:var(--ft-window-width);
  height:var(--ft-window-height);
  background:#888;
	overflow:hidden;
	-webkit-user-select: none;
}
.colorbox {
  position:absolute;
  height:100%;
  width:calc(var(--ft-window-width) * 11);
  top:0px;
  left:0px;
	-webkit-user-select: none;
}
.colorcontent {
  position:absolute;
  top:0px;
  left:calc(var(--ft-window-width) * var(--dx-li-f));
  width:var(--ft-window-width);
  height:100%;
  display: flex;
justify-content: center;
align-items: center;
	-webkit-user-select: none;
}
.colorcontent-text {
  font-size:25px;
  font-family:"Noto Sans TC",sans-serif;
	-webkit-user-select: none;
}
.colorcontent-image {
position:absolute;
  top:0px;
  left:0px;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0);
	-webkit-user-select: none;
 }
.colorcontent-image-blur-mask {
position:absolute;
  top:0px;
  left:0px;
  width:100%;
  height:100%;
  background:rgba(0, 0, 0, 0);
-webkit-backdrop-filter: blur(15px);
backdrop-filter: blur(15px);
display:none;
	-webkit-user-select: none;
 }
.rightbar {
	width:55px;
	height:calc(55px * 3);
	position:absolute;
	bottom:10px;
	right:10px;
	-webkit-user-select: none;
	  }
.favorite {
	background:url(https://erichsia7.github.io/colors/favorite.png);
		}
.share {
	background:url(https://erichsia7.github.io/colors/share3.png);
		}
.options {
	background:url(https://erichsia7.github.io/colors/more.png);
		}
.favorite,.share,.options {
	width:55px;
	height:55px;
	background-size:35px;
	background-position:center;
	background-repeat:no-repeat;
	-webkit-user-select: none;
		}
 .rightbar[txtcolor="#ffffff"] .favorite , .rightbar[txtcolor="#ffffff"] .share, .rightbar[txtcolor="#ffffff"] .options{
	 filter: invert(100%);
		}
	

 .arrow {
	 position:absolute;
	 top:50%;
	 transform:translateY(-50%);
	 width:55px;
	 height:55px;
	 background:url(https://erichsia7.github.io/colors/arrow-right.png);
	 background-size:35px;
	background-position:center;
	background-repeat:no-repeat;
	 display:none;
	 -webkit-user-select: none;
		}
	.arrow-left {
		left:10px;
		transform:translateY(-50%) rotate(180deg);
		}
		.arrow-right {
		right:10px;
		}
	.arrow[txtcolor="#ffffff"] {
		filter: invert(100%);
		}
	.color[group="true"] .arrow {
		display:block;
		}
	.optionlist {
		position:fixed;
		bottom:0px;
		left:0px;
		width:100%;
		height:calc(var(--b-bottom-height) + (50px * var(--b-option-list)));
		border-radius:15px 15px 0px 0px;
		background:#fff;
		transform:translateY(calc(var(--b-bottom-height) + (50px * var(--b-option-list))));
		opacity:0;
		display:none;
		-webkit-user-select: none;
		}
		.optionlist-mask {
			position:fixed;
			top:0px;
			left:0px;
			width:100%;
			height:100%;
			background:rgba(0, 0, 0,0.5);
			opacity:0;
			display:none;
			-webkit-user-select: none;
		}
		.optionlist li{
			list-style:none;
			padding:0px;
			margin:0px;
			height:49px;
			width:calc(100% - 10px);
			padding-left:10px;
			display: flex;
align-items: center;
			font-size:18px;
			border-bottom:1px solid #f5f5f5;
			-webkit-user-select: none;
		}
		.group-progress-bar {
			position:absolute;
			bottom:10px;
			left:50%;
			transform:translateX(-50%);
			padding-right:3px;
			-webkit-user-select: none;
		}
		.group-progress-bar[txtcolor="#ffffff"] {
			filter: invert(100%);
		}
		.group-progress-bar li {
			list-style:none;
			padding:0px;
			margin:0px;
			margin-left:3px;
			height:8px;
			width:8px;
			border-radius:99em;
			background:#000;
			opacity:0.5;
			float:left;
			transition:0.3s;
			-webkit-user-select: none;
		}
		.group-progress-bar li[sl="1"] {
			opacity:1;
		}
	@media (prefers-color-scheme: dark) {
			.bottom ,.optionlist{
				background:#1a1a1a;
		}
		.optionlist li {
			border-bottom:1px solid #1f1f1f;
			color:#fff;
		}
		}
  </style>
  <style id="iphonesafearea">
    :root {
     --fx-bth:calc(55px + 24px)
    }
    @media only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) {
        .bottom {
          height:var(--fx-bth);
        }
    }
    @media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {
        .bottom {
            height:var(--fx-bth);
        }
    }
    @media only screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) {
        .bottom {
            height:var(--fx-bth);
        }
    }
    @media only screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) {
        .bottom {
            height:var(--fx-bth);
    }
    @media (prefers-color-scheme: dark) {
        .bottom {
            height:var(--fx-bth);
        }
        @media only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) {
            .bottom {
                height:var(--fx-bth);
            }
        }
        @media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {
            .bottom {
                height:var(--fx-bth);
            }
        }
        @media only screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) {
            .bottom {
                height:var(--fx-bth);
            }
        }
        @media only screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) {
            .bottom {
                height:var(--fx-bth);
        }
    }
</style>
	<style id="bottom-icon">
	:root {
		--bottom-icon-home:#000000;
		}
	</style>
  <style id="ft">
</style>
<body>
<div class="container">
<div class="box" dy="0" fy="0"></div>
</div>
	<div class="bottom">
		<div class="bottom-btn">
<svg stroke-miterlimit="10" style="fill-rule:nonzero;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<path d="M256.219 46.8125C247.137 46.8125 239.182 50.8395 233.688 55.6875C233.827 55.564 233.951 55.4325 234.094 55.3125C196.023 87.2578 119.883 151.148 81.8125 183.094C76.7071 187.378 73.75 193.71 73.75 200.375C73.75 256.539 73.75 368.867 73.75 425.031C73.75 435.775 76.7738 447.787 85.6875 456.875C94.6005 465.963 106.651 469.25 117.531 469.25L393.156 469.25C403.973 469.25 416.136 466.002 425.062 456.719C433.801 447.631 436.75 435.746 436.75 425.031C436.75 368.469 436.75 255.344 436.75 198.781C436.75 192.118 433.792 185.784 428.688 181.5C391.102 149.953 315.93 86.8594 278.344 55.3125C278.486 55.4319 278.611 55.5646 278.75 55.6875C273.278 50.8596 265.318 46.8125 256.219 46.8125Z" fill="var(--bottom-icon-home)" fill-rule="evenodd" opacity="1" stroke="none"/>
<path d="M256.219 30.7812C246.995 30.7812 238.383 34.1541 230.375 40.875L6.875 228.531C2.2991 232.249 0 236.923 0 242.5C0 246.933 1.64857 250.903 4.9375 254.406C8.22643 257.91 12.7176 259.656 18.4375 259.656C21.4404 259.656 24.2163 258.93 26.7188 257.5C29.2212 256.07 31.5871 254.497 33.875 252.781L61.7812 229.375L61.7812 433.812C61.7812 448.827 66.0229 460.487 74.5312 468.781C83.0396 477.075 94.9493 481.219 110.25 481.219L400.469 481.219C415.769 481.219 427.626 477.075 436.062 468.781C444.499 460.487 448.719 448.827 448.719 433.812L448.719 227.75L478.531 252.781C480.676 254.497 482.998 256.07 485.5 257.5C488.002 258.93 490.778 259.656 493.781 259.656C498.786 259.656 503.05 258.181 506.625 255.25C510.2 252.319 512 248.273 512 243.125C512 237.119 509.777 232.249 505.344 228.531L282.062 40.875C274.055 34.1542 265.442 30.7813 256.219 30.7812ZM256.219 69.375C258.864 69.375 261.413 70.4488 263.844 72.5938L414.188 198.781L414.188 425.031C414.188 432.038 412.387 437.376 408.812 441.094C405.238 444.812 400.02 446.688 393.156 446.688L117.531 446.688C110.667 446.688 105.428 444.812 101.781 441.094C98.1348 437.376 96.3125 432.038 96.3125 425.031L96.3125 200.375L248.594 72.5938C251.025 70.4488 253.573 69.375 256.219 69.375Z" fill="#000000" fill-rule="evenodd" opacity="1" stroke="none"/>
</svg>

 
		</div>
		<div class="bottom-btn"></div>
		<div class="bottom-btn"></div>
		<div class="bottom-btn"></div>
		<div class="bottom-btn"></div>
	</div>
	<div class="optionlist-mask"></div>
	<div class="optionlist">
		<li h="qrcode">二維碼</li>
		<li h="picker">顏色選擇器</li>
		<li h="toimg">轉換圖片</li>
		<li h="llgrd">似色漸層</li>
		<li h="mixgrd">混合漸層</li>
		<li h="llpath">似色路徑</li>
		<li h="copycolorcode">複製顏色代碼</li>
		<li h="copyoptions">複製選項</li>
		<li h="copysourceimageurl">複製圖片連結</li>
    <li h="dlsourceimage">下載圖片</li>
    <li h="addallfav">將全部顏色新增至喜好項目</li>
    <li h="shareacolor">分享單個顏色</li>
	</div>
</body>
  <script>
  var getUrlString = location.href;
var url = new URL(getUrlString);
function gup(param) {
param = String(param)
return url.searchParams.get(param)
}
var allcolor = [];
// left: 37, up: 38, right: 39, down: 40,
// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36
var keys = {37: 1, 38: 1, 39: 1, 40: 1};

function preventDefault(e) {
  e.preventDefault();
}

function preventDefaultForScrollKeys(e) {
  if (keys[e.keyCode]) {
    preventDefault(e);
    return false;
  }
}

// modern Chrome requires { passive: false } when adding event
var supportsPassive = false;
try {
  window.addEventListener("test", null, Object.defineProperty({}, 'passive', {
    get: function () { supportsPassive = true; } 
  }));
} catch(e) {}

var wheelOpt = supportsPassive ? { passive: false } : false;
var wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel';

// call this to Disable
function disableScroll() {
  window.addEventListener('DOMMouseScroll', preventDefault, false); // older FF
  window.addEventListener(wheelEvent, preventDefault, wheelOpt); // modern desktop
  window.addEventListener('touchmove', preventDefault, wheelOpt); // mobile
  window.addEventListener('keydown', preventDefaultForScrollKeys, false);
}
// call this to Enable
function enableScroll() {
  window.removeEventListener('DOMMouseScroll', preventDefault, false);
  window.removeEventListener(wheelEvent, preventDefault, wheelOpt); 
  window.removeEventListener('touchmove', preventDefault, wheelOpt);
  window.removeEventListener('keydown', preventDefaultForScrollKeys, false);
}
    disableScroll()
    
function genid(mode) {
  if (mode === "random") {
    var genidchars = "0123456789abcdefghijklmnopqrstuvwxyz";
    var genid = "";
    for (var i = 0; i < 16; i++) {
      var genrandomNumber = Math.floor(Math.random() * genidchars.length);
      genid += genidchars.substring(genrandomNumber, genrandomNumber + 1);
    }
    return genid;
  }
  if (mode === "time") {
    var gtoday = new Date();
    var genid2 =
      gtoday.getMonth() +
      1 +
      "_" +
      gtoday.getDate() +
      "_" +
      gtoday.getHours() +
      "_" +
      gtoday.getMinutes() +
      "_" +
      gtoday.getSeconds() +
      "-" +
      (1 + Math.floor(Math.random() * 8)) +
      "" +
      (1 + Math.floor(Math.random() * 8)) +
      "" +
      (1 + Math.floor(Math.random() * 8)) +
      "" +
      (1 + Math.floor(Math.random() * 8)) +
      "" +
      (1 + Math.floor(Math.random() * 8)) +
      "" +
      (1 + Math.floor(Math.random() * 8)) +
      "" +
      (1 + Math.floor(Math.random() * 8)) +
      "" +
      (1 + Math.floor(Math.random() * 8));
    return genid2;
  }
  if (mode === "number") {
    var genid3 = "";
    for (var i = 0; i < 16; i++) {
      genid3 += "" + (0 + Math.floor(Math.random() * 9));
    }
    return genid3;
  }
  if (mode === "uuid") {
    var genidchars4 = "abcdef012345678";
    var geniduu = [8, 4, 4, 4, 12];
    var genid4 = "";
    var genid5 = "";
    for (var ia = 0; ia < geniduu.length; ia++) {
      var genid4 = "";
      for (var i = 0; i < geniduu[ia]; i++) {
        var genrandomNumber4 = Math.floor(Math.random() * genidchars4.length);
        genid4 += genidchars4.substring(genrandomNumber4, genrandomNumber4 + 1);
      }
      genid5 += "-" + genid4;
    }
    return genid5.substring(1, genid5.length);
  }
}
let getMode = (e) => {
  let t = {};
  e.forEach((e) => {
    t[e] = (t[e] || 0) + 1;
  });
  let l = 0,
    r = [];
  for (let e in t)
    if (
      (t[e] > l ? ((l = t[e]), (r = [e])) : t[e] === l && r.push(e),
      r.length === Object.keys(t).length)
    )
      return [];
  return r;
};

function setcookie(cookiename, cookievalue) {
  document.cookie = cookiename + "=" + cookievalue + "; max-age=" + 60 * 60 * 24 * 30;
	localStorage.setItem(cookiename,cookievalue)
}
function getCookie(cname) {
	if(localStorage.hasOwnProperty(cname)) {
		return String(localStorage.getItem(cname))
	}
  var name = cname + "=";
  var ca = document.cookie.split(";");
  for (var i = 0; i < ca.length; i++) {
    var c = ca[i].trim();
    if (c.indexOf(name) == 0) {
			localStorage.setItem(cname,c.substring(name.length, c.length))
			return c.substring(name.length, c.length)
		};
  }
  return "";
}

function componentToHex(a) {
  var r = a.toString(16);
  return 1 == r.length ? "0" + r : r;
}
function rgbToHex(a, r, t) {
  return "#" + componentToHex(a) + componentToHex(r) + componentToHex(t);
}
function hexToRgb(a) {
  var r = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
  return r
    ? { r: parseInt(r[1], 16), g: parseInt(r[2], 16), b: parseInt(r[3], 16) }
    : null;
}
function rgbtocmyk(a, r, t, o) {
  var h = 1 - a / 255,
    n = 1 - r / 255,
    M = 1 - t / 255,
    e = Math.min(h, Math.min(n, M));
  return (
    (h = (h - e) / (1 - e)),
    (n = (n - e) / (1 - e)),
    (M = (M - e) / (1 - e)),
    o ||
      ((h = Math.round(1e4 * h) / 100),
      (n = Math.round(1e4 * n) / 100),
      (M = Math.round(1e4 * M) / 100),
      (e = Math.round(1e4 * e) / 100)),
    {
      c: (h = isNaN(h) ? 0 : h),
      m: (n = isNaN(n) ? 0 : n),
      y: (M = isNaN(M) ? 0 : M),
      k: (e = isNaN(e) ? 0 : e),
      cmykstr: h + "," + n + "," + M + "," + e
    }
  );
}
function rgbtohsv(a, r, t) {
  let o, h, n, M, e, s, u, m, d, f, l, c;
  return (
    (o = a / 255),
    (h = r / 255),
    (n = t / 255),
    (d = Math.max(o, h, n)),
    (l = (a) => (d - a) / 6 / f + 0.5),
    (c = (a) => Math.round(100 * a) / 100),
    0 == (f = d - Math.min(o, h, n))
      ? (u = m = 0)
      : ((m = f / d),
        (M = l(o)),
        (e = l(h)),
        (s = l(n)),
        o === d
          ? (u = s - e)
          : h === d
          ? (u = 1 / 3 + M - s)
          : n === d && (u = 2 / 3 + e - M),
        u < 0 ? (u += 1) : u > 1 && (u -= 1)),
    {
      h: Math.round(360 * u),
      s: c(100 * m),
      v: c(100 * d),
      hsvstr: Math.round(360 * u) + "," + c(100 * m) + "," + c(100 * d)
    }
  );
}
function rgbtohsl(a, r, t) {
  var o = [a, r, t],
    h = o[0] / 255,
    n = o[1] / 255,
    M = o[2] / 255,
    e = Math.max(h, n, M),
    s = Math.min(h, n, M),
    u = (e + s) / 2,
    m = 0,
    d = 0;
  return (
    e != s &&
      ((m = u < 0.5 ? (e - s) / (e + s) : (e - s) / (2 - e - s)),
      (d =
        h == e
          ? (n - M) / (e - s)
          : n == e
          ? 2 + (M - h) / (e - s)
          : 4 + (h - n) / (e - s))),
    (d *= 60) < 0 && (d += 360),
    { h: d, s: (m *= 100), l: (u *= 100), hslstr: d + "," + m + "," + u }
  );
}
function hsvToRgb(a, r, t) {
  var o, h, n, M, e, s, u, m;
  if (
    ((a = Math.max(0, Math.min(360, a))),
    (r = Math.max(0, Math.min(100, r))),
    (t = Math.max(0, Math.min(100, t))),
    (t /= 100),
    0 == (r /= 100))
  )
    return (
      (o = h = n = t),
      [Math.round(255 * o), Math.round(255 * h), Math.round(255 * n)]
    );
  switch (
    ((s = t * (1 - r)),
    (u = t * (1 - r * (e = (a /= 60) - (M = Math.floor(a))))),
    (m = t * (1 - r * (1 - e))),
    M)
  ) {
    case 0:
      (o = t), (h = m), (n = s);
      break;
    case 1:
      (o = u), (h = t), (n = s);
      break;
    case 2:
      (o = s), (h = t), (n = m);
      break;
    case 3:
      (o = s), (h = u), (n = t);
      break;
    case 4:
      (o = m), (h = s), (n = t);
      break;
    default:
      (o = t), (h = s), (n = u);
  }
  return [Math.round(255 * o), Math.round(255 * h), Math.round(255 * n)];
}
function getligrd(a) {
  var r = hexToRgb(a),
    t = rgbtohsv(r.r, r.g, r.b),
    o = Math.floor(360 * Math.random()),
    h = 0,
    n = 0,
    M = 0,
    e = 0,
    s = 0,
    u = 0;
  t.h < 35 &&
    ((h = t.h + Math.floor(35 * Math.random())),
    (n = t.h + Math.floor(35 * Math.random()))),
    t.h > 35 &&
      t.h < 325 &&
      ((h = t.h + Math.floor(70 * Math.random() - 35)),
      (n = t.h + Math.floor(70 * Math.random() - 35))),
    t.h > 325 &&
      ((h = t.h - Math.floor(35 * Math.random())),
      (n = t.h - Math.floor(35 * Math.random()))),
    t.s < 35 &&
      ((M = t.s + Math.floor(35 * Math.random())),
      (e = t.s + Math.floor(35 * Math.random()))),
    t.s > 35 &&
      t.s < 65 &&
      ((M = t.s + Math.floor(70 * Math.random() - 35)),
      (e = t.s + Math.floor(70 * Math.random() - 35))),
    t.s > 65 &&
      ((M = t.s - Math.floor(35 * Math.random())),
      (e = t.s - Math.floor(35 * Math.random()))),
    t.v < 35 &&
      ((s = t.v + Math.floor(35 * Math.random())),
      (u = t.v + Math.floor(35 * Math.random()))),
    t.v > 35 &&
      t.v < 65 &&
      ((s = t.v + Math.floor(70 * Math.random() - 35)),
      (u = t.v + Math.floor(70 * Math.random() - 35))),
    t.v > 65 &&
      ((s = t.v - Math.floor(35 * Math.random())),
      (u = t.v - Math.floor(35 * Math.random())));
  var m = hsvToRgb(h, M, s),
    d = hsvToRgb(n, e, u);
  return [o, rgbToHex(m[0], m[1], m[2]), rgbToHex(d[0], d[1], d[2])];
}
function hsv2rgb(a, r, t) {
  (a /= 60), (r /= 100), (t /= 100);
  var o = Math.floor(a) % 6,
    h = a - Math.floor(a),
    n = 255 * t * (1 - r),
    M = 255 * t * (1 - r * h),
    e = 255 * t * (1 - r * (1 - h));
  t *= 255;
  switch (o) {
    case 0:
      return [t, e, n];
    case 1:
      return [M, t, n];
    case 2:
      return [n, t, e];
    case 3:
      return [n, M, t];
    case 4:
      return [e, n, t];
    case 5:
      return [t, n, M];
  }
}

function cllhi() {
  var tthi = getCookie("colorfav2")
    .substring(1, getCookie("colorfav2").length)
    .split("&");

  if (tthi.length < 10) {
    return false;
  }
  var ttww = [];
  var hhsv = [];
  var shsv = [];
  var vhsv = [];
  var rdbx = [
    "a0_15",
    "a16_30",
    "a31_45",
    "a46_60",
    "a61_75",
    "a76_90",
    "a91_105",
    "a106_120",
    "a121_135",
    "a136_150",
    "a151_165",
    "a166_180",
    "a181_195",
    "a196_210",
    "a211_225",
    "a226_240",
    "a241_255",
    "a256_270",
    "a271_285",
    "a286_300",
    "a301_315",
    "a316_330",
    "a331_345",
    "a346_360"
  ];
  var yau = {
    a0_15: [],
    a16_30: [],
    a31_45: [],
    a46_60: [],
    a61_75: [],
    a76_90: [],
    a91_105: [],
    a106_120: [],
    a121_135: [],
    a136_150: [],
    a151_165: [],
    a166_180: [],
    a181_195: [],
    a196_210: [],
    a211_225: [],
    a226_240: [],
    a241_255: [],
    a256_270: [],
    a271_285: [],
    a286_300: [],
    a301_315: [],
    a316_330: [],
    a331_345: [],
    a346_360: []
  };
  var yab = 0;

  for (var ffpp = 0; ffpp < tthi.length; ffpp++) {
    if (tthi[ffpp].indexOf("li") != -1) {
      //li
      var yywiw = tthi[ffpp].split("]");

      var yy_a = hexToRgb(yywiw[2]);
      var yy_b = hexToRgb(yywiw[3]);

      ttww.push(
        rgbToHex(
          Math.floor((yy_a.r + yy_b.r) / 2),
          Math.floor((yy_a.g + yy_b.g) / 2),
          Math.floor((yy_a.b + yy_b.b) / 2)
        )
      );

      hhsv.push(
        rgbtohsv(
          Math.floor((yy_a.r + yy_b.r) / 2),
          Math.floor((yy_a.g + yy_b.g) / 2),
          Math.floor((yy_a.b + yy_b.b) / 2)
        ).h
      );
    } else {
      if (tthi[ffpp].indexOf("pa") != -1) {
        var tyv = tthi[ffpp].split("]");
        var yy_y = hexToRgb(tyv[2]);
        var yy_yr = hexToRgb(tyv[1]);
        ttww.push(tyv[2]);
        hhsv.push(
          rgbtohsv(
            Math.floor((yy_y.r + yy_yr.r) / 2),
            Math.floor((yy_y.g + yy_yr.g) / 2),
            Math.floor((yy_y.b + yy_yr.b) / 2)
          ).h
        );
      } else {
        ttww.push(tthi[ffpp]);
        var yy_c = hexToRgb(tthi[ffpp]);
        hhsv.push(
          rgbtohsv(Math.floor(yy_c.r), Math.floor(yy_c.g), Math.floor(yy_c.b)).h
        );
      }
    }
  }

  for (var u = 0; u < hhsv.length; u++) {
    if (hhsv[u] >= 0 && hhsv[u] <= 15) {
      yau.a0_15.push(hhsv[u]);
    }
    if (hhsv[u] > 15 && hhsv[u] <= 30) {
      yau.a16_30.push(hhsv[u]);
    }
    if (hhsv[u] > 30 && hhsv[u] <= 45) {
      yau.a31_45.push(hhsv[u]);
    }
    if (hhsv[u] > 45 && hhsv[u] <= 60) {
      yau.a46_60.push(hhsv[u]);
    }
    if (hhsv[u] > 60 && hhsv[u] <= 75) {
      yau.a61_75.push(hhsv[u]);
    }
    if (hhsv[u] > 75 && hhsv[u] <= 90) {
      yau.a76_90.push(hhsv[u]);
    }
    if (hhsv[u] > 90 && hhsv[u] <= 105) {
      yau.a91_105.push(hhsv[u]);
    }
    if (hhsv[u] > 105 && hhsv[u] <= 120) {
      yau.a106_120.push(hhsv[u]);
    }
    if (hhsv[u] > 120 && hhsv[u] <= 135) {
      yau.a121_135.push(hhsv[u]);
    }
    if (hhsv[u] > 135 && hhsv[u] <= 150) {
      yau.a136_150.push(hhsv[u]);
    }
    if (hhsv[u] > 150 && hhsv[u] <= 165) {
      yau.a151_165.push(hhsv[u]);
    }
    if (hhsv[u] > 165 && hhsv[u] <= 180) {
      yau.a166_180.push(hhsv[u]);
    }
    if (hhsv[u] > 180 && hhsv[u] <= 195) {
      yau.a181_195.push(hhsv[u]);
    }
    if (hhsv[u] > 195 && hhsv[u] <= 210) {
      yau.a196_210.push(hhsv[u]);
    }
    if (hhsv[u] > 210 && hhsv[u] <= 225) {
      yau.a211_225.push(hhsv[u]);
    }
    if (hhsv[u] > 225 && hhsv[u] <= 240) {
      yau.a226_240.push(hhsv[u]);
    }
    if (hhsv[u] > 240 && hhsv[u] <= 255) {
      yau.a241_255.push(hhsv[u]);
    }
    if (hhsv[u] > 255 && hhsv[u] <= 270) {
      yau.a256_270.push(hhsv[u]);
    }
    if (hhsv[u] > 270 && hhsv[u] <= 285) {
      yau.a271_285.push(hhsv[u]);
    }
    if (hhsv[u] > 285 && hhsv[u] <= 300) {
      yau.a286_300.push(hhsv[u]);
    }
    if (hhsv[u] > 300 && hhsv[u] <= 315) {
      yau.a301_315.push(hhsv[u]);
    }
    if (hhsv[u] > 315 && hhsv[u] <= 330) {
      yau.a316_330.push(hhsv[u]);
    }
    if (hhsv[u] > 330 && hhsv[u] <= 345) {
      yau.a331_345.push(hhsv[u]);
    }
    if (hhsv[u] > 345 && hhsv[u] <= 360) {
      yau.a346_360.push(hhsv[u]);
    }
  }

  for (var t in yau) {
    eval("yau." + t + " = yau." + t + ".length");
  }
  for (var r in yau) {
    yab += eval("yau." + r);
  }

  for (var w in yau) {
    eval("yau." + w + "= Math.round((yau." + w + "/" + yab + ")*100)");
  }

  for (var x in yau) {
    for (var u = 0; u < eval("yau." + x); u++) {
      rdbx.push(x);
    }
  }

  var rsty = rdbx[Math.floor(Math.random() * (rdbx.length - 1))]
    .replaceAll("a", "")
    .split("_");

  rsta = parseInt(rsty[0]);
  rstb = parseInt(rsty[1]);
  var rstgg_h = rsta + Math.floor(Math.random() * (rstb - rsta));
  var rstgg_s = Math.floor(Math.random() * 100);
  var rstgg_v = Math.floor(Math.random() * 100);

  var thhu = hsv2rgb(rstgg_h, rstgg_s, rstgg_v);

  var rsthex = rgbToHex(
    Math.floor(thhu[0]),
    Math.floor(thhu[1]),
    Math.floor(thhu[2])
  );

  return rsthex;
}

function gtffim(l, b, s) {
  var ssscale = s;
  var ssssssw = window.innerWidth * ssscale;
  var ssssssh = window.innerHeight * ssscale;
  var sssizew = ssssssw * 2;
  var sssizeh = ssssssh * 2;
  var sssizex = -sssizew / 2;
  var sssizey = -sssizeh / 2;
  var sspath = ["M" + sssizex + " " + sssizey];
  for (var i = 0; i < 256; i++) {
    sspath.push(
      "S" +
        (sssizex + Math.random() * (sssizew - sssizex)).toFixed(3) +
        " " +
        (sssizey + Math.random() * (sssizeh - sssizey)).toFixed(3) +
        " " +
        (sssizex + Math.random() * (sssizew - sssizex)).toFixed(3) +
        " " +
        (sssizey + Math.random() * (sssizeh - sssizey)).toFixed(3)
    );
  }

  var thssvghtmlpp =
    '<svg xmlns="http://www.w3.org/2000/svg" id="sp" width="' +
    ssssssw +
    '" height="' +
    ssssssh +
    '" viewbox="0,0,' +
    ssssssw +
    "," +
    ssssssh +
    '"><path d="' +
    sspath.join(" ") +
    '" id="ssp" fill="transparent" stroke="' +
    l +
    '" stroke-width="0.4"/></svg>';
  return thssvghtmlpp;
}
	  

function textcol(r, g, b) {
  var textcolrgbfy = (r*0.213+g*0.718+b*0.072)
  //var textcolrgbfy = (r + g + b) / 3;
  if (textcolrgbfy > 255 / 2) {
    return "#000000";
  } else {
    return "#ffffff";
  }
}
function setthemecol(hexcolsjs,delaytimems) {
  setTimeout(function() {
  $('meta[name="theme-color"]').attr('content',hexcolsjs);
  },delaytimems);
}
function isRunningStandalone() {
    return (window.matchMedia('(display-mode: standalone)').matches);
}

	  
	  
function getunsplashimgurlbyid(picid) {
var ggyiyunpkiggvgsdx = $.ajax({type:'get',url:'https://picsum.photos/id/' + picid + '/info',dataType:'text',async:false});
var unpinfojson = JSON.parse(ggyiyunpkiggvgsdx.responseText)
return String(unpinfojson.url)
}

function newrandomimagecolors() {
var imgid = 'd-' + genid('uuid')
$('body').append('<img id="' + imgid + '" style="display:none;">')
var rcimgwh = ($('.container').width())*0.6
if(rcimgwh <= 256) {
rcimgwh = 256
}
//var rcimgwh = 350
var rcimg = 'https://picsum.photos/' + rcimgwh + '?' + Math.random();

    $.ajax({type:'GET',url:rcimg,beforeSend:function (xhr) {xhr.overrideMimeType('text/plain; charset=x-user-defined');},async: true,success:function(result, textStatus, jqXHR) {
    var binary = "";
    var responseText = jqXHR.responseText;
    var responseTextLen = responseText.length;
    for ( i = 0; i < responseTextLen; i++ ) {
        binary += String.fromCharCode(responseText.charCodeAt(i) & 255)
    }
    $('#' + imgid).attr('src','data:image/jpeg;base64,' + btoa(binary))
    var bigsizerdimgurl = String('https://picsum.photos/id/' + jqXHR.getResponseHeader('picsum-id') + '/1024/1024')
    
    $('#' + imgid).ready(function() {
    setTimeout(function() {
    const colorThief = new ColorThief();
    const imgee = document.querySelector('#' + imgid);

    if (imgee.complete) {
	    
      var imgcolorpalette = colorThief.getPalette(imgee) ;
			
        var hfur = 'k-' + genid('random')
        var imgsrcffd = String($('#' + imgid).attr('src'))
	if(!(localStorage.getItem('settings_lowspeed') === '1')) {
	bigsizerdimgurl
	}
	else {
	var bigimgrdgghtmlcc = '' ;
	}
	    
      var pltcchexpej = []
      for (var hq = 0; hq < imgcolorpalette.length; hq++) {
	
        var thsvstehecbwinsoiwpks = rgbToHex(imgcolorpalette[hq][0],imgcolorpalette[hq][1],imgcolorpalette[hq][2])
        pltcchexpej.push(thsvstehecbwinsoiwpks)
	      
    if((imgcolorpalette[hq][0]+imgcolorpalette[hq][1]+imgcolorpalette[hq][2])/3 > 128) {
      var aafhi9ooiyg = '000' 
    }
    else {
      var aafhi9ooiyg = 'fff' 
    }
        
      }
    }
	    
   },150);
    
    });

    }    
});
}

	  
	  
	  
	  
	  
	  
function addcolorcontent() {
  var col = cllhi()
  if(col === false) {
    var random_r = Math.floor(Math.random()*255)
    var random_g = Math.floor(Math.random()*255)
    var random_b = Math.floor(Math.random()*255)
    col = rgbToHex(random_r,random_g,random_b)
  }
  var txc = textcol(hexToRgb(col).r,hexToRgb(col).g,hexToRgb(col).b)
  var content = {
    type: "color",
    group: false,
    content: [col],
    shareurl: 'https://erichsia7.github.io/colors/?s=1&c=' + btoa(col) + '&r=' + genid('random'),
    id:'c_' + genid('random'),
    textcolor:txc
  };
  allcolor.push(content)
}
function addgradientcontent() {
  var col = cllhi()
  if(col === false) {
    var random_r = Math.floor(Math.random*255)
    var random_g = Math.floor(Math.random*255)
    var random_b = Math.floor(Math.random*255)
    col = rgbToHex(random_r,random_g,random_b)
  }
  
  var grd = getligrd(col)
  
  var txc = textcol((hexToRgb(grd[1]).r+hexToRgb(grd[2]).r)*.5,(hexToRgb(grd[1]).g+hexToRgb(grd[2]).g)*.5,(hexToRgb(grd[1]).b+hexToRgb(grd[2]).b)*.5)
  
  var content = {
    type: "gradient",
    group: false,
    content: grd,
    shareurl: 'https://erichsia7.github.io/colors/?s=2&ga=' + btoa(grd[1]) + '&gb=' + btoa(grd[2]) + '&gdeg=' + grd[0] + '&r=' + genid('random'),
    id:'c_' + genid('random'),
    textcolor:txc
  };
  allcolor.push(content)
}
function addimagecolorcontentgroup() {
var imgid = 'd-' + genid('uuid')
$('body').append('<img id="' + imgid + '" style="display:none;">')
var rcimgwh = 256
var rcimg = 'https://picsum.photos/' + rcimgwh + '?' + Math.random();

    $.ajax({type:'GET',url:rcimg,beforeSend:function (xhr) {xhr.overrideMimeType('text/plain; charset=x-user-defined');},async: true,success:function(result, textStatus, jqXHR) {
    var binary = "";
    var responseText = jqXHR.responseText;
    var responseTextLen = responseText.length;
    for ( i = 0; i < responseTextLen; i++ ) {
        binary += String.fromCharCode(responseText.charCodeAt(i) & 255)
    }
    var b64url = 'data:image/jpeg;base64,' + btoa(binary)
    
    
    //var bigsizerdimgurl = String('https://picsum.photos/id/' + jqXHR.getResponseHeader('picsum-id') + '/1024/1024')
    
$.ajax({type:'get',url:'https://picsum.photos/id/' + jqXHR.getResponseHeader('picsum-id') + '/info',dataType:'text',async:true,success:function(e){
var imginfojson = JSON.parse(e)
$('#' + imgid).attr('src',b64url)

$('#' + imgid).ready(function() {
    setTimeout(function() {
    const colorThief = new ColorThief();
    const imgee = document.querySelector('#' + imgid);

    if (imgee.complete) {
	    
      var imgcolorpalette = colorThief.getPalette(imgee) ;
      var imgmaincolor = colorThief.getColor(imgee)
			
      var pltcolorhex = []
      var plttextcolor = []
      for (var hq = 0; hq < imgcolorpalette.length; hq++) {
        var thshex = rgbToHex(imgcolorpalette[hq][0],imgcolorpalette[hq][1],imgcolorpalette[hq][2])
        pltcolorhex.push(thshex)      
        plttextcolor.push(textcol(imgcolorpalette[hq][0],imgcolorpalette[hq][1],imgcolorpalette[hq][2]))    
      }
var imagetxc = textcol(imgmaincolor[0],imgmaincolor[1],imgmaincolor[2])
	    
 var content = {
    type: "imagecolorgroup",
    group: true,
    content: pltcolorhex,
    image: {
      dataurl: b64url,
      hdurl:imginfojson.download_url,
      source: imginfojson.url
    },
    shareurl: 'https://erichsia7.github.io/colors/?s=4&grouplist=' + btoa(pltcolorhex.join(',')) + '&picid=' + jqXHR.getResponseHeader('picsum-id') + '&picurl=' + btoa(imginfojson.download_url) + '&picsou=' + btoa(imginfojson.url) + '&r=' + genid('random'),
    id:'c_' + genid('random'),
    textcolor:plttextcolor,
	  imgtextcolor:imagetxc
  };
  allcolor.push(content)
$('#' + imgid).remove()
    }
   },150);
    });


}});



	
    

    }    
});

  
}
function addpathcontent() {
  var content = {
    type: "path",
    group: false,
    content: ["#ffffff", "#000000"],
    path_data: "",
    shareurl: "",
    id:'c_' + genid('random')
  };
}



function initialize() {
	if(!(isRunningStandalone())) {
  $('#iphonesafearea').html('')
}
  $('#ft').html(':root{--ft-window-width:' + $('.container').width() + 'px;--ft-window-height:' + ($(window).height()-$('.bottom').height()) + 'px;}')
  //addimagecolorcontentgroup()
	if(gup('db') === '1') {
		allcolor.push(JSON.parse(decodeURIComponent(gup('dbjson'))))
	}
  for (var i = 0; i < 2; i++) {
    addcolorcontent()
    addgradientcontent()
  }
}



var gtg = 0 ;
		var dbclick = {}
function printcolor() {
  
  for (var i = gtg; i < allcolor.length; i++) {
    var ths_ctx = allcolor[i].content
    var contents = []
    var groupprogressbar = []
		var dftextcolor = '#000000'
    var themecol = '#888'
    if(allcolor[i].group) {
     var contentindexoffset = 0
    if(allcolor[i].type === 'imagecolorgroup') {
      contentindexoffset = 1
			var contentimageid = 'e_' + genid('uuid')
      contents.push('<div class="colorcontent" style="background:url(' + allcolor[i].image.dataurl + ');background-size:cover;background-position:center;background-repeat:no-repeat;--dx-li-f:' + 0 + ';"><div class="colorcontent-image-blur-mask"></div><div class="colorcontent-image" style="background:url(' + allcolor[i].image.hdurl + ');background-size: cover;background-position:center;background-repeat:no-repeat;" id="' + contentimageid + '" i="' + i + '"></div></div>')
   groupprogressbar.push('<li sl="1"></li>')
		}
    for (var d = 0; d < allcolor[i].content.length; d++) {
      contents.push('<div class="colorcontent" style="background:' + ths_ctx[d] + ';--dx-li-f:' + (d+contentindexoffset) + ';color:' + allcolor[i].textcolor[d] + '"><div class="colorcontent-text">' + ths_ctx[d] + '</div></div>')
      groupprogressbar.push('<li></li>')
    }
      dftextcolor = allcolor[i].imgtextcolor
	themecol = ths_ctx[0]
    }
    else {
      if(allcolor[i].type === 'color') {
        contents.push('<div class="colorcontent" style="background:' + ths_ctx[0] + ';color:' + allcolor[i].textcolor + '"><div class="colorcontent-text">' + ths_ctx + '</div></div>')
	dftextcolor = allcolor[i].textcolor
	themecol = ths_ctx[0]
      }
      if(allcolor[i].type === 'gradient') {
        contents.push('<div class="colorcontent" style="background:linear-gradient(' + ths_ctx[0] + 'deg ,' + ths_ctx[1] + ' ,' + ths_ctx[2] + ');color:' + allcolor[i].textcolor + '"><div class="colorcontent-text">' + ths_ctx + '</div></div>')
	dftextcolor = allcolor[i].textcolor
	themecol = ths_ctx[1]
      }
    }
    
    $('.box').append('<div class="color" fid="' + allcolor[i].id + '" group="' + allcolor[i].group + '" i="' + i + '" themecolor="' + themecol + '" group-index="0"><div class="colorbox">' + contents.join('') + '</div><div class="group-progress-bar" txtcolor="' + dftextcolor + '">' + groupprogressbar.join('') + '</div><div class="arrow arrow-left" txtcolor="' + dftextcolor + '" btnid="' + allcolor[i].id + '"></div><div class="arrow arrow-right" txtcolor="' + dftextcolor + '" btnid="' + allcolor[i].id + '"></div><div class="rightbar" txtcolor="' + dftextcolor + '"><div class="favorite" btnid="' + allcolor[i].id + '"></div><div class="share" btnid="' + allcolor[i].id + '"></div><div class="options" btnid="' + allcolor[i].id + '"></div></div></div>')
   
		/*
		if(allcolor[i].type === 'imagecolorgroup') {
    document.querySelector('#' + contentimageid).onload = function () {
		const colorThief2 = new ColorThief();
    const imgee2 = document.querySelector('#' + contentimageid);
    if (imgee2.complete) {
      var imgcolorpalette = colorThief2.getPalette(imgee2) ;
      var pltcolorhex = []
      var plttextcolor = []
      for (var hq = 0; hq < imgcolorpalette.length; hq++) {
        var thshex = rgbToHex(imgcolorpalette[hq][0],imgcolorpalette[hq][1],imgcolorpalette[hq][2])
        pltcolorhex.push(thshex)      
        plttextcolor.push(textcol(imgcolorpalette[hq][0],imgcolorpalette[hq][1],imgcolorpalette[hq][2]))    
      }
			allcolor[parseInt($(this).attr('i'))].content = pltcolorhex
			allcolor[parseInt($(this).attr('i'))].textcolor = plttextcolor
			for (var ag = 0; ag < pltcolorhex.length; ag++) {
				$('.color[i="' + parseInt($(this).attr('i')) + '"] .colorcontent').eq(ag).css({'background':pltcolorhex[ag],'--dx-li-f':(ag*1+1),'color':plttextcolor[ag]}).html('<div class="colorcontent-text">' + pltcolorhex[ag] + '</div>').attr('f','1')
				console.log('k')
			}
		}
		//ggg
		
    }
		
		}
		
		*/
		$('.arrow-left[btnid="' + allcolor[i].id + '"]').click(function(evt) {
		evt.stopPropagation();
		var gindex = parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index'))
   
		if(gindex > 0) {
			gindex -=1
			$('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index',gindex)
			$('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').attr('sl','0')
			$('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').eq(gindex).attr('sl','1')
			
			$('.color[fid="' + $(this).attr('btnid') + '"] .colorbox').css({'transform':'translateX(calc(var(--ft-window-width) * ' + gindex + ' * -1))','transition':'0.3s'});
			var nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].textcolor[(gindex-1)]
			if(gindex === 0) {
      nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].imgtextcolor
			}
			$('.color[fid="' + $(this).attr('btnid') + '"] .rightbar,.color[fid="' + $(this).attr('btnid') + '"] .arrow,.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar').attr('txtcolor',nwcol)
			
			var cfl = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].content[(gindex-1)]
			if(getCookie('colorfav2').indexOf('&' + cfl) > -1) {
				$('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'}).attr('class','favorite')
			}
			else {
				$('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorite.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'}).attr('class','favorite')
			}
		}
		});
		
		$('.arrow-right[btnid="' + allcolor[i].id + '"]').click(function(evt) {
			evt.stopPropagation();
		var gindex = parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index'))
		if(gindex < 10) {
			gindex +=1
			$('.color[fid="' + $(this).attr('btnid') + '"]').attr('group-index',gindex)
			$('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').attr('sl','0')
			$('.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar li').eq(gindex).attr('sl','1')
			
			$('.color[fid="' + $(this).attr('btnid') + '"] .colorbox').css({'transform':'translateX(calc(var(--ft-window-width) * ' + gindex + ' * -1))','transition':'0.3s'})
			var nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].textcolor[(gindex-1)]
			if(gindex === 0) {
      nwcol = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].imgtextcolor
			}
			$('.color[fid="' + $(this).attr('btnid') + '"] .rightbar,.color[fid="' + $(this).attr('btnid') + '"] .arrow,.color[fid="' + $(this).attr('btnid') + '"] .group-progress-bar').attr('txtcolor',nwcol)
			
			var cfl = allcolor[parseInt($('.color[fid="' + $(this).attr('btnid') + '"]').attr('i'))].content[(gindex-1)]
			if(getCookie('colorfav2').indexOf('&' + cfl) > -1) {
				$('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'}).attr('class','favorite')
			}
			else {
				$('.favorite[btnid="' + $(this).attr('btnid') + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorite.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'}).attr('class','favorite')
			}
		}
		});
	$('.share[btnid="' + allcolor[i].id + '"]').click(function(evt) {
		evt.stopPropagation();
       var fidtt = $(this).attr('btnid')
       var fidindex = parseInt($('.color[fid="' + fidtt + '"]').attr('i'))
       var shareurltt = allcolor[fidindex].shareurl
       if (navigator.share) { 
   navigator.share({
      title: 'Colors',
      url: shareurltt
    }).then(() => {
      //ok
    })
    .catch(console.error);
    } else {
        shareDialog.classList.add('is-open');
    }
    });
		
		
		
		$('.options[btnid="' + allcolor[i].id + '"]').click(function(evt) {
			evt.stopPropagation();
			var fidtt = $(this).attr('btnid')
  var fidindex = parseInt($('.color[fid="' + fidtt + '"]').attr('i'))
  var fytype= allcolor[fidindex].type
	var listcc = 0
	$('.optionlist').attr('f',fidtt)
	    if(fytype === 'color') {
				listcc = 7
				$('.optionlist li[h="qrcode"]').css({'display':'flex'});
				$('.optionlist li[h="picker"]').css({'display':'flex'});
				$('.optionlist li[h="toimg"]').css({'display':'flex'});
				$('.optionlist li[h="llgrd"]').css({'display':'flex'});
				$('.optionlist li[h="mixgrd"]').css({'display':'none'});
				$('.optionlist li[h="llpath"]').css({'display':'flex'});
				$('.optionlist li[h="copycolorcode"]').css({'display':'flex'});
				$('.optionlist li[h="copyoptions"]').css({'display':'flex'});
				$('.optionlist li[h="copysourceimageurl"]').css({'display':'none'});
				$('.optionlist li[h="dlsourceimage"]').css({'display':'none'});
				$('.optionlist li[h="addallfav"]').css({'display':'none'});
				$('.optionlist li[h="shareacolor"]').css({'display':'none'});
				
				
			}
			if(fytype === 'gradient') {
				listcc = 4
				$('.optionlist li[h="qrcode"]').css({'display':'flex'});
				$('.optionlist li[h="picker"]').css({'display':'none'});
				$('.optionlist li[h="toimg"]').css({'display':'none'});
				$('.optionlist li[h="llgrd"]').css({'display':'none'});
				$('.optionlist li[h="mixgrd"]').css({'display':'flex'});
				$('.optionlist li[h="llpath"]').css({'display':'none'});
				$('.optionlist li[h="copycolorcode"]').css({'display':'flex'});
				$('.optionlist li[h="copyoptions"]').css({'display':'flex'});
				$('.optionlist li[h="copysourceimageurl"]').css({'display':'none'});
				$('.optionlist li[h="dlsourceimage"]').css({'display':'none'});
				$('.optionlist li[h="addallfav"]').css({'display':'none'});
				$('.optionlist li[h="shareacolor"]').css({'display':'none'});
			}
			if(fytype === 'imagecolorgroup') {
				listcc = 7
				$('.optionlist li[h="qrcode"]').css({'display':'flex'});
				$('.optionlist li[h="picker"]').css({'display':'none'});
				$('.optionlist li[h="toimg"]').css({'display':'none'});
				$('.optionlist li[h="llgrd"]').css({'display':'none'});
				$('.optionlist li[h="mixgrd"]').css({'display':'none'});
				$('.optionlist li[h="llpath"]').css({'display':'none'});
				$('.optionlist li[h="copycolorcode"]').css({'display':'flex'});
				$('.optionlist li[h="copyoptions"]').css({'display':'flex'});
				$('.optionlist li[h="copysourceimageurl"]').css({'display':'flex'});
				$('.optionlist li[h="dlsourceimage"]').css({'display':'flex'});
				$('.optionlist li[h="addallfav"]').css({'display':'flex'});
				$('.optionlist li[h="shareacolor"]').css({'display':'flex'});
			}
			$('.optionlist').css({'--b-bottom-height':$('.bottom').height() + 'px','--b-option-list':listcc,'display':'block','opacity':'1','transition':'0.3s'});
			$('.optionlist-mask').css({'display':'block','transition':'0.3s'});
			setTimeout(function() {
			$('.optionlist').css({'transform':'translateY(0px)'});
			$('.optionlist-mask').css({'opacity':'1'});
			},1);
		});
		
	$('.favorite[btnid="' + allcolor[i].id + '"]').click(function(evt) {
		evt.stopPropagation();
	var fidtt = $(this).attr('btnid')
	var gindexff = parseInt($('.color[fid="' + fidtt + '"]').attr('group-index'))
  var fidindex = parseInt($('.color[fid="' + fidtt + '"]').attr('i'))
  var contentss= allcolor[fidindex].content
	var contentindex = 0
	var colorstr = contentss[contentindex]
	var coltype = allcolor[fidindex].type
	
	//gg
	opensou = 'recommend'
	
	//ggg
	
	 var favtdpromptdelaytime = 1 ;
    if(coltype === "color") {
      if(getCookie('colorfav2').indexOf('&' + colorstr) != -1) {
				$('.favorite[btnid="' + fidtt + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'}).attr('class','favorite')
    }
      else {
    setcookie('colorfav2',getCookie('colorfav2') + '&' + colorstr)
      if(opensou === 'recommend' || opensou === 'trend') {
    
      }
     else {
     if(localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
var favrecommendforms = $.ajax({url:"https://docs.google.com/forms/d/e/1FAIpQLSeMGuvbZSK1mqORhroslYL_j1yCJ0WLvw2vIqk9_LpCmAYj5Q/formResponse?usp=pp_url&entry.450237995=%23" + colorstr.replaceAll('#','') ,async:true});
      }
     }  
    if(String(localStorage.getItem('favanimation_v2')).length > 100) {
$('.favorite[btnid="' + fidtt + '"]').attr('class','favorite favoriteanimation')
favtdpromptdelaytime = 460 ;
    }
    else {
    $('.favorite[btnid="' + fidtt + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'});
    }
    
    } 
    }
    if(coltype === "gradient") {
      if(getCookie('colorfav2').indexOf('&li]' + contentss[0] + ']' + contentss[1] + ']' + contentss[2]) != -1) {
				$('.favorite[btnid="' + fidtt + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'}).attr('class','favorite')
    }
      else {
if(opensou === 'recommend' || opensou === 'trend') {
    
      }
     else {
if(localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
var favrecommendforms = $.ajax({url:'https://docs.google.com/forms/d/e/1FAIpQLScLxMmjmZNWrv7yyYazyAkuxp0eQAaN8jkYgx1I7BlXQWA4dg/formResponse?usp=pp_url&entry.1247563127=%23' + $('#rgb').attr('shga').split('#')[1] + '&entry.293943510=%23' + $('#rgb').attr('shgb').split('#')[1] + '&entry.123365810=' + $('#rgb').attr('shdeg') ,async:true});
      }
     }
    setcookie('colorfav2',getCookie('colorfav2') + '&li]' + contentss[0] + ']' + contentss[1] + ']' + contentss[2])
    
    if(String(localStorage.getItem('favanimation_v2')).length > 100) {
$('.favorite[btnid="' + fidtt + '"]').attr('class','favorite favoriteanimation')
favtdpromptdelaytime = 460 ;
    }
    else {
    $('.favorite[btnid="' + fidtt + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'});
    }
     
    } 
    }
		//hhhh
		if(coltype === "imagecolorgroup") {
		var cfystr = contentss[(gindexff-1)]
		if(!(cfystr === undefined)) {
		
		if(getCookie('colorfav2').indexOf('&' + cfystr) != -1) {
			$('.favorite[btnid="' + fidtt + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'}).attr('class','favorite')
    }
      else {
    setcookie('colorfav2',getCookie('colorfav2') + '&' + cfystr)
      if(opensou === 'recommend' || opensou === 'trend') {
    
      }
     else {
     if(localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
var favrecommendforms = $.ajax({url:"https://docs.google.com/forms/d/e/1FAIpQLSeMGuvbZSK1mqORhroslYL_j1yCJ0WLvw2vIqk9_LpCmAYj5Q/formResponse?usp=pp_url&entry.450237995=%23" + cfystr.replaceAll('#','') ,async:true});
      }
     }  
    if(String(localStorage.getItem('favanimation_v2')).length > 100) {
$('.favorite[btnid="' + fidtt + '"]').attr('style','').attr('class','favorite favoriteanimation')
favtdpromptdelaytime = 460 ;
    }
    else {
    $('.favorite[btnid="' + fidtt + '"]').css({'background':'url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'});
    }
    
    } 
		
		
		
		}
		
		}
//ggggg
if(coltype === "path") {
      if(getCookie('colorfav2').indexOf('&pa]' + $('#rgb').attr('lc1') + ']' + $('#rgb').attr('lc2')) != -1) {
    }
      else {
if(opensou === 'recommend' || opensou === 'trend') {
    
      }
     else {
if(localStorage.getItem('settings_sharefav') === '1' && favoriteshare() === true) {
var favrecommendformsppw = $.ajax({url:'https://docs.google.com/forms/d/e/1FAIpQLSd4KLvL9x_6jhRCdst5eT0gGv91wO8e0yqa1lnnTGDzVHoS4A/formResponse?usp=pp_url&entry.669769670=%23' + $('#rgb').attr('lc1').split('#')[1] + '&entry.2145134131=%23' + $('#rgb').attr('lc2').split('#')[1] ,async:true});
      }
     }
    document.cookie = 'colorfav2=' + getCookie('colorfav2') + '&pa]' + $('#rgb').attr('lc1') + ']' + $('#rgb').attr('lc2') + '; max-age='+60*60*24*30 + '; domain=erichsia7.github.io' ;
    
    if(String(localStorage.getItem('favanimation')).length > 100) {
$('.favt').attr('class','favt lle btn favoriteanimation')
favtdpromptdelaytime = 460 ;
    }
    else {
    $('.favt').css({'background':'rgba(245,245,245,0.8) url(https://erichsia7.github.io/colors/favorited.png)','background-size':'35px','background-position':'center','background-repeat':'no-repeat'});
    }
    setTimeout(function(){ 
    //$('body').prompt({'message':'已新增至喜好項目','time':1200,'animate':'slide'});
    },favtdpromptdelaytime);
    } 
    }

	
	
	
	
	
	
	
	
	
	
		});
		$('.color[fid="' + allcolor[i].id + '"]').click(function() {
			var dbclarr = eval('dbclick.' + $(this).attr('fid'))
			if(dbclarr === null || dbclarr === undefined) {
			eval('dbclick.' + $(this).attr('fid') + ' = [' + new Date().getTime() + ']')
			}
			dbclarr.push(new Date().getTime())
		eval('dbclick.' + $(this).attr('fid') + ' = dbclarr')
			if(dbclarr.length >= 2) {
				if((dbclarr[dbclarr.length-1]-dbclarr[(dbclarr.length-2)]) > 10 && (dbclarr[dbclarr.length-1]-dbclarr[(dbclarr.length-2)]) < 550) {
					$('.favorite[btnid="' + $(this).attr('fid') + '"]').click()
				}
			}
		});
		
    gtg +=1
  }
	$('.box').css({'height':'calc(' + $('.box .color').length + ' * var(--ft-window-height))'});
}


$(document).ready(function() {
initialize()
printcolor()
	$('.optionlist-mask').click(function(evt) {
		evt.stopPropagation();
$('.optionlist').css({'transform':'translateY(calc(var(--b-bottom-height) + (50px * var(--b-option-list))))'});
			$('.optionlist-mask').css({'opacity':'0'});
			setTimeout(function() {
			$('.optionlist,.optionlist-mask').css({'display':'none','opacity':'0','transition':'0s'});
			},310);
	});
	
});

var lastcolor 
var stopload = 0
let mouseX = 0
let mouseY = 0
let offsetX = 0
let offsetY = 0
let isDown = false
var div = document.querySelector(".box");
var imagect = 3
div.addEventListener('touchstart', function(e) {
  isDown = true
  mouseX = e.pageX
  mouseY = e.pageY
  document.addEventListener('touchmove', move)
});

document.addEventListener('touchend', function(e) {
  if (isDown) {
    offsetX += e.pageX - mouseX
    offsetY += e.pageY - mouseY
  }
  isDown = false
  document.removeEventListener('mousemove',move)
                               
  
var ns = Math.round(parseInt(div.getAttribute('dy'))/$('.container').height())*$('.container').height() 
  
  if(Math.abs(parseInt(div.getAttribute('dy'))-parseInt(div.getAttribute('fy'))) > ($('.container').height()*0.2)) {
    
  if(parseInt(div.getAttribute('dy'))-parseInt(div.getAttribute('fy')) < 0) {
    //down
     ns = Math.ceil(Math.abs(parseInt(div.getAttribute('dy'))/$('.container').height()))*-1*$('.container').height() 
    
  }
  else {
    //up
    var ns = Math.ceil(parseInt(div.getAttribute('dy'))/$('.container').height())*$('.container').height() 
    
  }
  }
  else {
    ns = parseInt(div.getAttribute('fy'))
  }
    //ns = Math.ceil(parseInt(div.getAttribute('dy'))/$('.container').height())*$('.container').height() 
  
  
 
 
   // ns = Math.ceil(Math.abs(parseInt(div.getAttribute('dy'))/$('.box').height()))*yg*$('.box').height()
  
  /*
  if((ts-Math.floor(ts))*yg > 0.3) {
    ns = Math.trunc(Math.abs(parseInt(div.getAttribute('dy'))/$('.box').height()))*yg*$('.box').height()
  }
  */
  
 // console.log((ts-Math.floor(ts))*yg)
  
 
   
  
  var ws = parseInt(div.getAttribute('dy'))-ns
  offsetY -= ws
  div.style.transform = 'translateY(' + (ns) + 'px)';
  div.style.transition = '0.3s'
  div.setAttribute('dy',(ns))
  
  if(Math.abs(Math.floor(parseInt(div.getAttribute('dy'))/$('.container').height())) > allcolor.length-3) {
  
  addcolorcontent()
  addgradientcontent()
  imagect -= 1
  if(imagect < 0) {
   addimagecolorcontentgroup()
   imagect = 3
  }
  
  printcolor()
	  /*
	if(allcolor.length > 10 && allcolor.length < 12) {
	addcolorcontent()
	lastcolor = allcolor[allcolor.length-1]
	stopload = 1
	}
	if(Math.abs(Math.floor(parseInt(div.getAttribute('dy'))/$('.container').height())) >= (allcolor.length-1)) {
	setTimeout(function(){ 
	location.href = 'https://erichsia7.github.io/colors/test5.html?db=1&dbjson=' + encodeURIComponent(JSON.stringify(lastcolor))
	},300);
	}
	*/
	  
  }
  div.setAttribute('fy',(ns))
   
 
 
  
});


function move(e) {
  if (isDown) {
    const dx = e.pageX - mouseX
    const dy = e.pageY - mouseY
   // const dy = e.pageY
    if((offsetY+dy) <= 0) {
      
    
    div.style.transform = 'translateY(' + (offsetY+dy) + 'px)';
    div.setAttribute('dy',(offsetY+dy))
    div.style.transition = '0s'
    }
    //ggg
	  
    
  }
}
    
		
		
		//option touch evt
		
		var divooo = document.querySelector('.box');
    var divooolt = 0
divooo.addEventListener('touchstart', function(e) {
  divooolt = setTimeout(function() {
		$('.options[btnid="' + allcolor[Math.abs(parseInt(document.querySelector(".box").getAttribute('dy'))/$('.container').height())].id + '"]').click()
	},500);
});

divooo.addEventListener('touchend', function(e) {
	clearTimeout(divooolt)
});
		//option touch evt end
		
		
    $(document).ready(function() {
if(localStorage.getItem('first_load') === "1") {
var googlefontloadtime = new Date().getTime() ;
 if(googlefontloadtime-parseInt(localStorage.getItem('googlefontNotoSansTCloaded')) < 2592000000) {
  $('body').append('<style>' + localStorage.getItem('googlefontNotoSansTC') + '</style>');
}
else {
 $.ajax({type:'get',url:"https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap",dataType:'text',success:function(e) {
  var googlefontloadtimedd = new Date().getTime() ;
  localStorage.setItem('googlefontNotoSansTC', e); localStorage.setItem('googlefontNotoSansTCloaded', googlefontloadtimedd);
   $('body').append('<style>' + e + '</style>');
   }
}); 
}
//fv

var favanimationloadid = 'qi63fd57x934nr7i' ;

 if(favanimationloadid === localStorage.getItem('favanimationloadid_v2')) {
  $('body').append('<style>.favoriteanimation{background:url(' + localStorage.getItem('favanimation_v2') + ');background-size:55px 5500px;background-repeat:no-repeat;background-position:top 0px left 0px;animation-name:fav;animation-duration:.46s;animation-timing-function:steps(99,jump-start);animation-fill-mode:forwards}@keyframes fav{0%{background-position:top 0px left 0px}100%{background-position:top -5445px left 0px}}</style>');
 }
else {
 $.ajax({type:'get',url:"https://erichsia7.github.io/colors/favorite_animation_png_3_v2_128_base64.txt",dataType:'text',success:function(e) {
  var favanimationloadtimedd = new Date().getTime() ;
  localStorage.setItem('favanimation_v2', e); 
  localStorage.setItem('favanimationloadid_v2', favanimationloadid);
   $('body').append('<style>.favoriteanimation{background:url(' + e + ');background-size:55px 5500px;background-repeat:no-repeat;background-position:top 0px left 0px;animation-name:fav;animation-duration:.46s;animation-timing-function:steps(99,jump-start);animation-fill-mode:forwards}@keyframes fav{0%{background-position:top 0px left 0px}100%{background-position:top -5445px left 0px}}</style>');
   }
}); 
}

	
var moreanimationloadid = 'chaq4tdiy3tqqevs' ;

 if(moreanimationloadid === localStorage.getItem('moreanimationloadid')) {
  $('body').append('<style>.moreanimation{background:rgba(245,245,245,0.8) url(' + localStorage.getItem('moreanimation') + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:mor;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}.moreanimation-f{background:rgba(245,245,245,0.8) url(' + localStorage.getItem('moreanimation') + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:morc;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}@keyframes mor{0%{background-position:top 0 left 0}100%{background-position:top -4815px left 0}}@keyframes morc{0%{background-position:top -4815px left 0}100%{background-position:top 0 left 0}}</style>');
 }
else {
 $.ajax({type:'get',url:"https://erichsia7.github.io/colors/more_animation_base64_1_128.txt",dataType:'text',success:function(e) {
  var moreanimationloadtime = new Date().getTime() ;
  localStorage.setItem('moreanimation', e); 
  localStorage.setItem('moreanimationloadid', moreanimationloadid);
   $('body').append('<style>.moreanimation{background:rgba(245,245,245,0.8) url(' + e + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:mor;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}.moreanimation-f{background:rgba(245,245,245,0.8) url(' + e + ');background-size:45px 4860px;background-repeat:no-repeat;background-position:top 0 left 0;animation-name:morc;animation-duration:.35s;animation-timing-function:steps(107,jump-start);animation-fill-mode:forwards}@keyframes mor{0%{background-position:top 0 left 0}100%{background-position:top -4815px left 0}}@keyframes morc{0%{background-position:top -4815px left 0}100%{background-position:top 0 left 0}}</style>');
   }
}); 
}



//f
}
else {
localStorage.setItem('first_load','1')
}
    });
  </script>
